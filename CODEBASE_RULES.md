# Codebase Rules and Guidelines for Food Truck Finder Web App

This document outlines a set of rules and guidelines for AI instances (Cline, Copilot, Jules) to reference during development of the Food Truck Finder web application. Adhering to these rules will ensure consistency, prevent errors, reduce duplicate code, and maintain a high standard of code quality and user experience.

## 1. Gemini Prompting Rules

- **Rule 1.1: Omission of "Food Truck" Phrase:** Food truck descriptions generated by Gemini MUST NOT include the phrase "food truck". The context of the application implies all listed businesses are food trucks.
- **Rule 1.2: Specific Cuisine Types:** Gemini descriptions SHOULD include specific cuisine types (e.g., 'Indian street food', 'Southern BBQ', 'Gourmet Sandwiches') and condensed general food types where applicable.
- **Rule 1.3: Natural Tone & Consistency:** Descriptions should aim for a natural, owner-written tone to provide variety, while maintaining consistency in the delivery of key information (e.g., cuisine, primary location).

## 2. Price Display Rules

- **Rule 2.1: Explicit Menu Item Prices:** Menu item prices in the Supabase database MUST be explicit numerical values.
- **Rule 2.2: Dynamic Price Range Fallback:** If explicit prices for menu items are unavailable in the database, the UI MUST implement a fallback mechanism to dynamically display a price range (e.g., '$-$$-$$$').

## 3. Location Handling Rules

- **Rule 3.1: Supabase Location Schema:** The Supabase schema MUST clearly store both `exact_location` (full address, latitude/longitude) and `city_location` for food trucks.
- **Rule 3.2: Location Prioritization:** Backend logic MUST prioritize `exact_location` for map pins and display on the food truck card.
- **Rule 3.3: City Location Fallback:** If `exact_location` is unavailable (even after deep research), `city_location` MUST be used for the map pin drop.
- **Rule 3.4: Address Display:** The identified address (whether exact or city-based) MUST be clearly displayed on the food truck card.

## 4. UI/UX Rules (Unified Food Truck Info Card)

- **Rule 4.1: Unified Component:** The food truck list and the expanded detail card MUST be refactored into a single, dynamically expandable component.
- **Rule 4.2: Expansion Trigger:** The unified component MUST expand/collapse on click/tap, and all food truck cards (including Roti Rolls) MUST correctly trigger this expansion.

## 5. Data Quality Score Rules

- **Rule 5.1: Admin Dashboard Only:** The data quality score MUST be removed from the user-facing UI. It MUST only be displayed and managed within the admin dashboard and backend.
