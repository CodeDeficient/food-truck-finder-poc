<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Copy/Paste Detector Report</title><link href="styles/tailwind.css" rel="stylesheet"><link href="styles/prism.css" rel="stylesheet"></head><body class="bg-gray-100"><header class="bg-white shadow py-4"><div class="container mx-auto px-4"><h1 class="text-3xl font-semibold text-gray-800">jscpd - copy/paste report</h1></div></header><main class="container mx-auto my-8 p-4 bg-white shadow rounded"><section class="mb-8" id="dashboard"><h2 class="text-2xl font-semibold text-gray-700 mb-4">Dashboard</h2><div class="grid grid-cols-4 gap-4"><div class="bg-blue-200 p-4 rounded text-center"><h3 class="text-lg font-semibold text-blue-800 mb-2">Total Files</h3><span class="text-4xl font-bold text-blue-800">730</span></div><div class="bg-green-200 p-4 rounded text-center"><h3 class="text-lg font-semibold text-green-800 mb-2">Total Lines of Code</h3><span class="text-4xl font-bold text-green-800">80621</span></div><div class="bg-yellow-200 p-4 rounded text-center"><h3 class="text-lg font-semibold text-yellow-800 mb-2">Number of Clones</h3><span class="text-4xl font-bold text-yellow-800">181</span></div><div class="bg-red-200 p-4 rounded text-center"><h3 class="text-lg font-semibold text-red-800 mb-2">Duplicated Lines</h3><span class="text-4xl font-bold text-red-800">3704 (4.59%)</span></div></div></section><section class="mb-8" id="formats"><h2 class="text-2xl font-semibold text-gray-700 mb-4">Formats with Duplications</h2><table class="w-full table-auto"><thead><tr class="bg-gray-200 text-gray-600 uppercase text-sm leading-normal"><th class="py-3 px-6 text-left">Format</th><th class="py-3 px-6 text-left">Files</th><th class="py-3 px-6 text-left">Lines</th><th class="py-3 px-6 text-left">Clones</th><th class="py-3 px-6 text-left">Duplicated Lines</th><th class="py-3 px-6 text-left">Duplicated Tokens</th></tr></thead><tbody><tr class="bg-white border-b border-gray-200 text-gray-800 text-sm"><td class="py-3 px-6"><a class="text-blue-600 hover:underline" href="#typescript-clones">typescript</a></td><td class="py-3 px-6">144</td><td class="py-3 px-6">21852</td><td class="py-3 px-6">27</td><td class="py-3 px-6">522</td><td class="py-3 px-6">4636</td></tr><tr class="bg-white border-b border-gray-200 text-gray-800 text-sm"><td class="py-3 px-6"><a class="text-blue-600 hover:underline" href="#javascript-clones">javascript</a></td><td class="py-3 px-6">327</td><td class="py-3 px-6">33520</td><td class="py-3 px-6">123</td><td class="py-3 px-6">2458</td><td class="py-3 px-6">23210</td></tr><tr class="bg-white border-b border-gray-200 text-gray-800 text-sm"><td class="py-3 px-6"><a class="text-blue-600 hover:underline" href="#tsx-clones">tsx</a></td><td class="py-3 px-6">199</td><td class="py-3 px-6">18519</td><td class="py-3 px-6">26</td><td class="py-3 px-6">350</td><td class="py-3 px-6">3008</td></tr><tr class="bg-white border-b border-gray-200 text-gray-800 text-sm"><td class="py-3 px-6"><a class="text-blue-600 hover:underline" href="#css-clones">css</a></td><td class="py-3 px-6">4</td><td class="py-3 px-6">654</td><td class="py-3 px-6">0</td><td class="py-3 px-6">0</td><td class="py-3 px-6">0</td></tr><tr class="bg-white border-b border-gray-200 text-gray-800 text-sm"><td class="py-3 px-6"><a class="text-blue-600 hover:underline" href="#json-clones">json</a></td><td class="py-3 px-6">21</td><td class="py-3 px-6">2331</td><td class="py-3 px-6">3</td><td class="py-3 px-6">314</td><td class="py-3 px-6">2247</td></tr><tr class="bg-white border-b border-gray-200 text-gray-800 text-sm"><td class="py-3 px-6"><a class="text-blue-600 hover:underline" href="#bash-clones">bash</a></td><td class="py-3 px-6">6</td><td class="py-3 px-6">612</td><td class="py-3 px-6">0</td><td class="py-3 px-6">0</td><td class="py-3 px-6">0</td></tr><tr class="bg-white border-b border-gray-200 text-gray-800 text-sm"><td class="py-3 px-6"><a class="text-blue-600 hover:underline" href="#markup-clones">markup</a></td><td class="py-3 px-6">3</td><td class="py-3 px-6">225</td><td class="py-3 px-6">0</td><td class="py-3 px-6">0</td><td class="py-3 px-6">0</td></tr><tr class="bg-white border-b border-gray-200 text-gray-800 text-sm"><td class="py-3 px-6"><a class="text-blue-600 hover:underline" href="#powershell-clones">powershell</a></td><td class="py-3 px-6">14</td><td class="py-3 px-6">1380</td><td class="py-3 px-6">1</td><td class="py-3 px-6">38</td><td class="py-3 px-6">308</td></tr><tr class="bg-white border-b border-gray-200 text-gray-800 text-sm"><td class="py-3 px-6"><a class="text-blue-600 hover:underline" href="#sql-clones">sql</a></td><td class="py-3 px-6">7</td><td class="py-3 px-6">1039</td><td class="py-3 px-6">1</td><td class="py-3 px-6">22</td><td class="py-3 px-6">157</td></tr><tr class="bg-white border-b border-gray-200 text-gray-800 text-sm"><td class="py-3 px-6"><a class="text-blue-600 hover:underline" href="#yaml-clones">yaml</a></td><td class="py-3 px-6">2</td><td class="py-3 px-6">31</td><td class="py-3 px-6">0</td><td class="py-3 px-6">0</td><td class="py-3 px-6">0</td></tr><tr class="bg-white border-b border-gray-200 text-gray-800 text-sm"><td class="py-3 px-6"><a class="text-blue-600 hover:underline" href="#markdown-clones">markdown</a></td><td class="py-3 px-6">3</td><td class="py-3 px-6">458</td><td class="py-3 px-6">0</td><td class="py-3 px-6">0</td><td class="py-3 px-6">0</td></tr></tbody></table></section><section class="mb-8" id="txt-clones"><a name="typescript-clones"></a><h2 class="text-2xl font-semibold text-gray-700 mb-4">typescript</h2><div class="divide-y divide-gray-200 border-b-2"><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/staging/ui-specialist-2/components/ui/OptimizedVariants.ts (Line 1:1 - Line 116:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/staging/ui-specialist-2/components/ui/variants.ts (Line 1:1 - Line 116:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn2" onclick="toggleCodeBlock('cloneGroup2', 'expandBtn2', 'collapseBtn2')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn2" onclick="toggleCodeBlock('cloneGroup2', 'expandBtn2', 'collapseBtn2')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup2"><code class="language-typescript text-sm text-gray-800">import { tv } from 'tailwind-variants';

export const buttonVariants = tv({
  base: 'inline-flex items-center justify-center rounded-modern text-sm font-medium transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50',
  variants: {
    variant: {
      default: 'bg-primary text-primary-foreground hover:bg-primary/90 hover:shadow-lg hover:shadow-primary/30 hover:scale-105',
      destructive:
        'bg-destructive text-destructive-foreground hover:bg-destructive/90 hover:shadow-lg hover:shadow-destructive/30',
      outline:
        'border border-input bg-background/50 hover:glass-strong hover:text-accent-foreground hover:neon-border',
      secondary:
        'glass text-secondary-foreground hover:glass-strong hover:scale-105',
      ghost: 'hover:glass hover:text-accent-foreground hover-neon',
      link: 'text-primary underline-offset-4 hover:underline hover-neon',
      neon: 'neon-border bg-background/20 text-primary hover:neon-glow hover:bg-primary/10 hover:scale-105',
    },
    size: {
      default: 'h-10 px-4 py-2',
      sm: 'h-9 rounded-md px-3',
      lg: 'h-11 rounded-md px-8',
      icon: 'h-10 w-10',
    },
  },
  defaultVariants: {
    variant: 'default',
    size: 'default',
  },
});

export const toggleVariants = tv({
  base: 'inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 gap-2',
  variants: {
    variant: {
      default: 'bg-transparent',
      outline: 'border border-input bg-transparent hover:bg-accent hover:text-accent-foreground',
    },
    size: {
      default: 'h-10 px-3 min-w-10',
      sm: 'h-9 px-2.5 min-w-9',
      lg: 'h-11 px-5 min-w-11',
    },
  },
  defaultVariants: {
    variant: 'default',
    size: 'default',
  },
});

export const toastVariants = tv({
  base: 'group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full',
  variants: {
    variant: {
      default: 'border bg-background text-foreground',
      destructive:
        'destructive group border-destructive bg-destructive text-destructive-foreground',
    },
  },
  defaultVariants: {
    variant: 'default',
  },
});

export const alertVariants = tv({
  base: 'relative w-full rounded-lg border p-4 [&amp;&gt;svg~*]:pl-7 [&amp;&gt;svg+div]:translate-y-[-3px] [&amp;&gt;svg]:absolute [&amp;&gt;svg]:left-4 [&amp;&gt;svg]:top-4 [&amp;&gt;svg]:text-foreground',
  variants: {
    variant: {
      default: 'bg-background text-foreground',
      destructive:
        'border-destructive/50 text-destructive dark:border-destructive [&amp;&gt;svg]:text-destructive',
    },
  },
  defaultVariants: {
    variant: 'default',
  },
});

export const badgeVariants = tv({
  base: 'inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2',
  variants: {
    variant: {
      default: 'border-transparent bg-primary text-primary-foreground hover:bg-primary/80',
      secondary:
        'border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80',
      destructive:
        'border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80',
      outline: 'text-foreground',
      success: 'border-transparent bg-green-600 text-white hover:bg-green-700 shadow-sm shadow-green-500/20',
      open: 'border-transparent bg-gradient-to-r from-green-500 to-emerald-500 text-white hover:from-green-600 hover:to-emerald-600 shadow-lg shadow-green-500/30',
    },
  },
  defaultVariants: {
    variant: 'default',
  },
});

export const labelVariants = tv({
  base: 'text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70',
});

export const sheetVariants = tv({
  base: 'fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500',
  variants: {
    side: {
      top: 'inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top',
      bottom:
        'inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom',
      left: 'inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm',
      right:
        'inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm',
    },
  },
  defaultVariants: {
    side: 'right',
  },
});</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/app/api/admin/realtime-events/route.ts (Line 41:30 - Line 54:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/app/api/admin/realtime-events/route.ts (Line 17:29 - Line 30:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn4" onclick="toggleCodeBlock('cloneGroup4', 'expandBtn4', 'collapseBtn4')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn4" onclick="toggleCodeBlock('cloneGroup4', 'expandBtn4', 'collapseBtn4')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup4"><code class="language-typescript text-sm text-gray-800">, error);
    return new Response(
      JSON.stringify({
        success: false,
        error: 'Internal server error',
        details: error instanceof Error ? error.message : 'Unknown error',
      }),
      {
        status: 500,
        headers: { 'Content-Type': 'application/json' },
      },
    );
  }
}</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/app/api/trucks/route.ts (Line 110:2 - Line 118:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/api/test-integration/helpers.ts (Line 106:2 - Line 114:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn6" onclick="toggleCodeBlock('cloneGroup6', 'expandBtn6', 'collapseBtn6')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn6" onclick="toggleCodeBlock('cloneGroup6', 'expandBtn6', 'collapseBtn6')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup6"><code class="language-typescript text-sm text-gray-800">{
      monday: { closed: true },
      tuesday: { closed: true },
      wednesday: { closed: true },
      thursday: { closed: true },
      friday: { closed: true },
      saturday: { closed: true },
      sunday: { closed: true },
    })</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/app/api/trucks/route.ts (Line 170:29 - Line 179:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/app/api/trucks/route.ts (Line 152:29 - Line 161:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn7" onclick="toggleCodeBlock('cloneGroup7', 'expandBtn7', 'collapseBtn7')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn7" onclick="toggleCodeBlock('cloneGroup7', 'expandBtn7', 'collapseBtn7')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup7"><code class="language-typescript text-sm text-gray-800">, error);
    if (error instanceof z.ZodError) {
      return NextResponse.json({ error: error.errors }, { status: 400 });
    }
    return NextResponse.json(
      { error: error instanceof Error ? error.message : String(error) },
      { status: 500 },
    );
  }
}</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/app/api/autonomous-discovery/route.ts (Line 20:47 - Line 42:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/app/api/enhanced-pipeline/route.ts (Line 21:62 - Line 43:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn8" onclick="toggleCodeBlock('cloneGroup8', 'expandBtn8', 'collapseBtn8')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn8" onclick="toggleCodeBlock('cloneGroup8', 'expandBtn8', 'collapseBtn8')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup8"><code class="language-typescript text-sm text-gray-800">,
        },
      },
    },
    { status: 410 },
  ); // 410 Gone - Resource no longer available
}

export function GET() {
  return NextResponse.json(
    {
      status: 'DEPRECATED',
      message: 'This endpoint has been consolidated into /api/pipeline',
      migration: {
        newEndpoint: '/api/pipeline',
        documentation: 'See /api/pipeline for current API documentation',
        deprecationDate: '2024-12-09',
        removalDate: '2025-01-01',
      },
    },
    { status: 410 },
  );
}</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/utils/foodTruckHelpers.ts (Line 277:2 - Line 282:6), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/api/search/filters.ts (Line 76:6 - Line 81:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn20" onclick="toggleCodeBlock('cloneGroup20', 'expandBtn20', 'collapseBtn20')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn20" onclick="toggleCodeBlock('cloneGroup20', 'expandBtn20', 'collapseBtn20')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup20"><code class="language-typescript text-sm text-gray-800">;
    const openTime = Number.parseInt(hours.open.replace(':', ''), 10);
    const closeTime = Number.parseInt(hours.close.replace(':', ''), 10);

    return currentTime &gt;= openTime &amp;&amp; currentTime &lt;= closeTime;
  } catch</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/utils/apiHelpers.ts (Line 6:2 - Line 15:7), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/app/api/trucks/route.ts (Line 153:2 - Line 161:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn22" onclick="toggleCodeBlock('cloneGroup22', 'expandBtn22', 'collapseBtn22')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn22" onclick="toggleCodeBlock('cloneGroup22', 'expandBtn22', 'collapseBtn22')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup22"><code class="language-typescript text-sm text-gray-800">ZodError) {
    return NextResponse.json({ error: error.errors }, { status: 400 });
  }
  return NextResponse.json(
    { error: error instanceof Error ? error.message : String(error) },
    { status: 500 },
  );
}

export</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/schemas/truck.ts (Line 74:2 - Line 80:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/app/api/trucks/route.ts (Line 127:2 - Line 135:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn23" onclick="toggleCodeBlock('cloneGroup23', 'expandBtn23', 'collapseBtn23')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn23" onclick="toggleCodeBlock('cloneGroup23', 'expandBtn23', 'collapseBtn23')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup23"><code class="language-typescript text-sm text-gray-800">z.object({
  instagram: z.string().optional(),
  facebook: z.string().optional(),
  twitter: z.string().optional(),
  tiktok: z.string().optional(),
  yelp: z.string().optional(),
});</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/schemas/truck.ts (Line 83:2 - Line 90:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/app/api/trucks/route.ts (Line 64:7 - Line 71:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn24" onclick="toggleCodeBlock('cloneGroup24', 'expandBtn24', 'collapseBtn24')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn24" onclick="toggleCodeBlock('cloneGroup24', 'expandBtn24', 'collapseBtn24')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup24"><code class="language-typescript text-sm text-gray-800">z.object({
  address: z.string().optional(),
  city: z.string().optional(),
  state: z.string().optional(),
  zip_code: z.string().optional(),
  lat: z.number().optional(),
  lng: z.number().optional(),
  timestamp: z.string(),</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/gemini/responseParser.ts (Line 64:2 - Line 74:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/gemini/responseParserWithYamlBackup.ts (Line 70:9 - Line 81:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn26" onclick="toggleCodeBlock('cloneGroup26', 'expandBtn26', 'collapseBtn26')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn26" onclick="toggleCodeBlock('cloneGroup26', 'expandBtn26', 'collapseBtn26')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup26"><code class="language-typescript text-sm text-gray-800">;
          }
        }
      }

      // If all else fails, log the problematic text for debugging
      console.error(&quot;Problematic text:&quot;, cleanedText);
      console.error(&quot;Original raw response text:&quot;, text);
      throw new Error(`Failed to parse Gemini response: ${jsonError instanceof Error ? jsonError.message : String(jsonError)}. Text length: ${cleanedText.length}`);
    }
  },</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/data-quality/duplicatePrevention.ts (Line 289:3 - Line 305:6), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/performance/databaseCache.ts (Line 276:7 - Line 290:9)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn31" onclick="toggleCodeBlock('cloneGroup31', 'expandBtn31', 'collapseBtn31')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn31" onclick="toggleCodeBlock('cloneGroup31', 'expandBtn31', 'collapseBtn31')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup31"><code class="language-typescript text-sm text-gray-800">): number {
    const R = 6371; // Earth's radius in kilometers
    const dLat = ((lat2 - lat1) * Math.PI) / 180;
    const dLng = ((lng2 - lng1) * Math.PI) / 180;
    const a =
      Math.sin(dLat / 2) * Math.sin(dLat / 2) +
      Math.cos((lat1 * Math.PI) / 180) *
        Math.cos((lat2 * Math.PI) / 180) *
        Math.sin(dLng / 2) *
        Math.sin(dLng / 2);
    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
    return R * c;
  }

  /**
   * Calculate contact similarity
   */</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/hooks/realtime/setupEventSourceListeners.ts (Line 2:34 - Line 23:10), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/api/admin/realtime-events/handlers.ts (Line 9:13 - Line 43:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn33" onclick="toggleCodeBlock('cloneGroup33', 'expandBtn33', 'collapseBtn33')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn33" onclick="toggleCodeBlock('cloneGroup33', 'expandBtn33', 'collapseBtn33')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup33"><code class="language-typescript text-sm text-gray-800">;

interface RealtimeMetrics {
  scrapingJobs: {
    active: number;
    completed: number;
    failed: number;
    pending: number;
  };
  dataQuality: {
    averageScore: number;
    totalTrucks: number;
    recentChanges: number;
  };
  systemHealth: {
    status: 'healthy' | 'warning' | 'error';
    uptime: number;
    lastUpdate: string;
  };
}

interface</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/hooks/realtime/setupEventSourceListeners.ts (Line 24:3 - Line 30:10), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/hooks/realtime/useConnectionManagement.ts (Line 19:3 - Line 41:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn34" onclick="toggleCodeBlock('cloneGroup34', 'expandBtn34', 'collapseBtn34')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn34" onclick="toggleCodeBlock('cloneGroup34', 'expandBtn34', 'collapseBtn34')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup34"><code class="language-typescript text-sm text-gray-800">setIsConnected: (connected: boolean) =&gt; void;
  setIsConnecting: (connecting: boolean) =&gt; void;
  setConnectionError: (error: string | undefined) =&gt; void;
  setConnectionAttempts: (attempts: number | ((prev: number) =&gt; number)) =&gt; void;
}

interface</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/hooks/realtime/setupEventSourceListeners.ts (Line 155:5 - Line 165:9), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/hooks/realtime/useConnectionManagement.ts (Line 15:8 - Line 41:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn35" onclick="toggleCodeBlock('cloneGroup35', 'expandBtn35', 'collapseBtn35')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn35" onclick="toggleCodeBlock('cloneGroup35', 'expandBtn35', 'collapseBtn35')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup35"><code class="language-typescript text-sm text-gray-800">;
  setLastEventTime: React.Dispatch&lt;React.SetStateAction&lt;Date | undefined&gt;&gt;;
  setLatestMetrics: React.Dispatch&lt;React.SetStateAction&lt;RealtimeMetrics | undefined&gt;&gt;;
  setRecentEvents: React.Dispatch&lt;React.SetStateAction&lt;RealtimeEvent[]&gt;&gt;;
  setIsConnected: (connected: boolean) =&gt; void;
  setIsConnecting: (connecting: boolean) =&gt; void;
  setConnectionError: (error: string | undefined) =&gt; void;
  setConnectionAttempts: (attempts: number | ((prev: number) =&gt; number)) =&gt; void;
}

function</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/hooks/realtime/createEventSourceConnection.ts (Line 1:2 - Line 21:7), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/hooks/realtime/setupEventSourceListeners.ts (Line 1:2 - Line 43:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn36" onclick="toggleCodeBlock('cloneGroup36', 'expandBtn36', 'collapseBtn36')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn36" onclick="toggleCodeBlock('cloneGroup36', 'expandBtn36', 'collapseBtn36')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup36"><code class="language-typescript text-sm text-gray-800">React from 'react';
import type { RealtimeEvent } from '../useRealtimeAdminEvents.types';
interface RealtimeMetrics {
  scrapingJobs: {
    active: number;
    completed: number;
    failed: number;
    pending: number;
  };
  dataQuality: {
    averageScore: number;
    totalTrucks: number;
    recentChanges: number;
  };
  systemHealth: {
    status: 'healthy' | 'warning' | 'error';
    uptime: number;
    lastUpdate: string;
  };
}
import</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/hooks/realtime/createEventSourceConnection.ts (Line 138:5 - Line 147:16), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/hooks/realtime/setupEventSourceListeners.ts (Line 154:2 - Line 23:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn37" onclick="toggleCodeBlock('cloneGroup37', 'expandBtn37', 'collapseBtn37')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn37" onclick="toggleCodeBlock('cloneGroup37', 'expandBtn37', 'collapseBtn37')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup37"><code class="language-typescript text-sm text-gray-800">;
  connect: () =&gt; void;
  setLastEventTime: React.Dispatch&lt;React.SetStateAction&lt;Date | undefined&gt;&gt;;
  setLatestMetrics: React.Dispatch&lt;React.SetStateAction&lt;RealtimeMetrics | undefined&gt;&gt;;
  setRecentEvents: React.Dispatch&lt;React.SetStateAction&lt;RealtimeEvent[]&gt;&gt;;
  setIsConnected: (connected: boolean) =&gt; void;
  setIsConnecting: (connecting: boolean) =&gt; void;
  setConnectionError: (error: string | undefined) =&gt; void;
  setConnectionAttempts: (attempts: number | ((prev: number) =&gt; number)) =&gt; void;
  connectionState</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/components/ui/variants.ts (Line 1:1 - Line 116:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/staging/ui-specialist-2/components/ui/variants.ts (Line 1:1 - Line 116:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn38" onclick="toggleCodeBlock('cloneGroup38', 'expandBtn38', 'collapseBtn38')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn38" onclick="toggleCodeBlock('cloneGroup38', 'expandBtn38', 'collapseBtn38')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup38"><code class="language-typescript text-sm text-gray-800">import { tv } from 'tailwind-variants';

export const buttonVariants = tv({
  base: 'inline-flex items-center justify-center rounded-modern text-sm font-medium transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50',
  variants: {
    variant: {
      default: 'bg-primary text-primary-foreground hover:bg-primary/90 hover:shadow-lg hover:shadow-primary/30 hover:scale-105',
      destructive:
        'bg-destructive text-destructive-foreground hover:bg-destructive/90 hover:shadow-lg hover:shadow-destructive/30',
      outline:
        'border border-input bg-background/50 hover:glass-strong hover:text-accent-foreground hover:neon-border',
      secondary:
        'glass text-secondary-foreground hover:glass-strong hover:scale-105',
      ghost: 'hover:glass hover:text-accent-foreground hover-neon',
      link: 'text-primary underline-offset-4 hover:underline hover-neon',
      neon: 'neon-border bg-background/20 text-primary hover:neon-glow hover:bg-primary/10 hover:scale-105',
    },
    size: {
      default: 'h-10 px-4 py-2',
      sm: 'h-9 rounded-md px-3',
      lg: 'h-11 rounded-md px-8',
      icon: 'h-10 w-10',
    },
  },
  defaultVariants: {
    variant: 'default',
    size: 'default',
  },
});

export const toggleVariants = tv({
  base: 'inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 gap-2',
  variants: {
    variant: {
      default: 'bg-transparent',
      outline: 'border border-input bg-transparent hover:bg-accent hover:text-accent-foreground',
    },
    size: {
      default: 'h-10 px-3 min-w-10',
      sm: 'h-9 px-2.5 min-w-9',
      lg: 'h-11 px-5 min-w-11',
    },
  },
  defaultVariants: {
    variant: 'default',
    size: 'default',
  },
});

export const toastVariants = tv({
  base: 'group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full',
  variants: {
    variant: {
      default: 'border bg-background text-foreground',
      destructive:
        'destructive group border-destructive bg-destructive text-destructive-foreground',
    },
  },
  defaultVariants: {
    variant: 'default',
  },
});

export const alertVariants = tv({
  base: 'relative w-full rounded-lg border p-4 [&amp;&gt;svg~*]:pl-7 [&amp;&gt;svg+div]:translate-y-[-3px] [&amp;&gt;svg]:absolute [&amp;&gt;svg]:left-4 [&amp;&gt;svg]:top-4 [&amp;&gt;svg]:text-foreground',
  variants: {
    variant: {
      default: 'bg-background text-foreground',
      destructive:
        'border-destructive/50 text-destructive dark:border-destructive [&amp;&gt;svg]:text-destructive',
    },
  },
  defaultVariants: {
    variant: 'default',
  },
});

export const badgeVariants = tv({
  base: 'inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2',
  variants: {
    variant: {
      default: 'border-transparent bg-primary text-primary-foreground hover:bg-primary/80',
      secondary:
        'border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80',
      destructive:
        'border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80',
      outline: 'text-foreground',
      success: 'border-transparent bg-green-600 text-white hover:bg-green-700 shadow-sm shadow-green-500/20',
      open: 'border-transparent bg-gradient-to-r from-green-500 to-emerald-500 text-white hover:from-green-600 hover:to-emerald-600 shadow-lg shadow-green-500/30',
    },
  },
  defaultVariants: {
    variant: 'default',
  },
});

export const labelVariants = tv({
  base: 'text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70',
});

export const sheetVariants = tv({
  base: 'fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500',
  variants: {
    side: {
      top: 'inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top',
      bottom:
        'inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom',
      left: 'inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm',
      right:
        'inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm',
    },
  },
  defaultVariants: {
    side: 'right',
  },
});</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/check-db-status.ts (Line 1:1 - Line 17:20), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/check-stuck-jobs.ts (Line 1:1 - Line 17:15)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn117" onclick="toggleCodeBlock('cloneGroup117', 'expandBtn117', 'collapseBtn117')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn117" onclick="toggleCodeBlock('cloneGroup117', 'expandBtn117', 'collapseBtn117')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup117"><code class="language-typescript text-sm text-gray-800">import { createClient } from '@supabase/supabase-js';
import * as dotenv from 'dotenv';

// Load environment variables
dotenv.config({ path: '.env.local' });

const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;

if (!supabaseUrl || !supabaseServiceKey) {
  console.error('Missing required environment variables');
  process.exit(1);
}

const supabase = createClient(supabaseUrl, supabaseServiceKey);

async function checkDatabaseStatus</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/types.ts (Line 84:3 - Line 95:16), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/mappers/uprootedVeganMapper.ts (Line 43:3 - Line 55:18)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn141" onclick="toggleCodeBlock('cloneGroup141', 'expandBtn141', 'collapseBtn141')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn141" onclick="toggleCodeBlock('cloneGroup141', 'expandBtn141', 'collapseBtn141')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup141"><code class="language-typescript text-sm text-gray-800">scheduled_locations?: {
    address?: string;
    city?: string;
    state?: string;
    zip_code?: string;
    lat?: number;
    lng?: number;
    timestamp: string;
    start_time: string;
    end_time: string;
  }[];
  operating_hours</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/types.ts (Line 212:2 - Line 231:7), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/api/admin/realtime-events/handlers.ts (Line 12:1 - Line 43:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn142" onclick="toggleCodeBlock('cloneGroup142', 'expandBtn142', 'collapseBtn142')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn142" onclick="toggleCodeBlock('cloneGroup142', 'expandBtn142', 'collapseBtn142')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup142"><code class="language-typescript text-sm text-gray-800">interface RealtimeMetrics {
  scrapingJobs: {
    active: number;
    completed: number;
    failed: number;
    pending: number;
  };
  dataQuality: {
    averageScore: number;
    totalTrucks: number;
    recentChanges: number;
  };
  systemHealth: {
    status: 'healthy' | 'warning' | 'error';
    uptime: number;
    lastUpdate: string;
  };
}

export</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/ScraperEngine.ts (Line 795:8 - Line 801:36), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/ScraperEngine.ts (Line 760:8 - Line 766:32)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn143" onclick="toggleCodeBlock('cloneGroup143', 'expandBtn143', 'collapseBtn143')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn143" onclick="toggleCodeBlock('cloneGroup143', 'expandBtn143', 'collapseBtn143')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup143"><code class="language-typescript text-sm text-gray-800">;

      const response = await this.makeGeminiRequest(prompt);
      this.updateUsageCounters(1, prompt.length + response.length);
      const parsed: unknown = JSON.parse(response);
      if (parsed == undefined || typeof parsed !== 'object') {
        throw new Error('Invalid Gemini sentiment response'</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/firecrawl.ts (Line 235:2 - Line 247:17), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/firecrawl.ts (Line 152:2 - Line 164:18)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn151" onclick="toggleCodeBlock('cloneGroup151', 'expandBtn151', 'collapseBtn151')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn151" onclick="toggleCodeBlock('cloneGroup151', 'expandBtn151', 'collapseBtn151')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup151"><code class="language-typescript text-sm text-gray-800">,
        }),
      });

      const data: unknown = await response.json();

      if (!response.ok) {
        const errorData = data as { error?: string };
        throw new Error(errorData.error ?? `HTTP ${response.status}`);
      }

      this.setCacheResult(cacheKey, data);
      return data as CrawlJobResponse</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/firecrawl.ts (Line 281:2 - Line 292:20), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/firecrawl.ts (Line 153:2 - Line 164:18)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn152" onclick="toggleCodeBlock('cloneGroup152', 'expandBtn152', 'collapseBtn152')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn152" onclick="toggleCodeBlock('cloneGroup152', 'expandBtn152', 'collapseBtn152')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup152"><code class="language-typescript text-sm text-gray-800">,
      });

      const data: unknown = await response.json();

      if (!response.ok) {
        const errorData = data as { error?: string };
        throw new Error(errorData.error ?? `HTTP ${response.status}`);
      }

      this.setCacheResult(cacheKey, data);
      return data as CrawlStatusResponse</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/discoveryEngine.ts (Line 376:14 - Line 392:65), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/discoveryEngine.ts (Line 295:13 - Line 311:56)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn155" onclick="toggleCodeBlock('cloneGroup155', 'expandBtn155', 'collapseBtn155')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn155" onclick="toggleCodeBlock('cloneGroup155', 'expandBtn155', 'collapseBtn155')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup155"><code class="language-typescript text-sm text-gray-800">) {
        if (typeof result === 'object' &amp;&amp; result !== null &amp;&amp; 'url' in result) {
          const resultObj = result as { url?: string };
          const resultUrl: string | undefined = resultObj.url;
          if (
            resultUrl != undefined &amp;&amp;
            typeof resultUrl === 'string' &amp;&amp;
            (await this.isFoodTruckUrl(resultUrl))
          ) {
            discoveredUrls.add(resultUrl);
          }
        }
      }
    }
  }

  // Helper method to store discovered URLs from discovery process</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/discoveryEngine.ts (Line 648:2 - Line 656:8), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/discoveryEngine.ts (Line 349:15 - Line 356:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn156" onclick="toggleCodeBlock('cloneGroup156', 'expandBtn156', 'collapseBtn156')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn156" onclick="toggleCodeBlock('cloneGroup156', 'expandBtn156', 'collapseBtn156')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup156"><code class="language-typescript text-sm text-gray-800">);
    } catch (error) {
      console.error(`❌ Location search failed for ${city}:`, error);
      results.errors.push(
        `Location search failed for ${city}: ${error instanceof Error ? error.message : 'Unknown error'}`,
      );
    }

    console</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/discoveryEngine.ts (Line 773:6 - Line 789:8), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/discoveryEngine.ts (Line 415:2 - Line 443:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn157" onclick="toggleCodeBlock('cloneGroup157', 'expandBtn157', 'collapseBtn157')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn157" onclick="toggleCodeBlock('cloneGroup157', 'expandBtn157', 'collapseBtn157')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup157"><code class="language-typescript text-sm text-gray-800">,
        });
        if (stored.isNew === true) {
          results.urls_stored += 1;
        } else {
          results.urls_duplicates += 1;
        }
      } catch (error) {
        console.error(`❌ Failed to store URL ${url}:`, error);
        results.errors.push(
          `Failed to store URL ${url}: ${error instanceof Error ? error.message : 'Unknown error'}`,
        );
      }
    }
  }

  private</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/autoScraper.ts (Line 227:22 - Line 233:3), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/autoScraper.ts (Line 180:27 - Line 186:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn162" onclick="toggleCodeBlock('cloneGroup162', 'expandBtn162', 'collapseBtn162')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn162" onclick="toggleCodeBlock('cloneGroup162', 'expandBtn162', 'collapseBtn162')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup162"><code class="language-typescript text-sm text-gray-800">(
  url: string,
  result: { status: string; details?: string },
  counters: { trucksProcessed: number; newTrucksFound: number },
  errors: Array&lt;{ url: string; details?: string }&gt;,
): Promise&lt;void&gt; {
  if</code></pre></div><!-- Add more clone groups for .txt format as needed         // Add more clone groups for .txt format as needed--></div><a name="javascript-clones"></a><h2 class="text-2xl font-semibold text-gray-700 mb-4">javascript</h2><div class="divide-y divide-gray-200 border-b-2"><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/api/cron/auto-scrape/handlers.js (Line 64:21 - Line 74:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/api/cron/auto-scrape/improvedHandler.js (Line 94:2 - Line 104:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn3" onclick="toggleCodeBlock('cloneGroup3', 'expandBtn3', 'collapseBtn3')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn3" onclick="toggleCodeBlock('cloneGroup3', 'expandBtn3', 'collapseBtn3')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup3"><code class="language-javascript text-sm text-gray-800">(error) {
    console.error('Auto-scraping cron job failed:', error);
    logActivity({
        type: 'cron_job',
        action: 'auto_scrape_failed',
        details: {
            timestamp: new Date().toISOString(),
            error: error instanceof Error ? error.message : 'Unknown error',
        },
    });
}</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/__tests__/components/TruckContactInfo.test.tsx (Line 87:6 - Line 352:16), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/__tests__/components/TruckContactInfo.test.tsx (Line 60:6 - Line 279:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn11" onclick="toggleCodeBlock('cloneGroup11', 'expandBtn11', 'collapseBtn11')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn11" onclick="toggleCodeBlock('cloneGroup11', 'expandBtn11', 'collapseBtn11')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup11"><code class="language-javascript text-sm text-gray-800">={truck} /&gt;);

      // Check phone link
      const phoneLink = screen.getByRole('link', { name: /\(555\) 123-4567/i });
      expect(phoneLink).toHaveAttribute('href', 'tel:(555) 123-4567');

      // Check email link
      const emailLink = screen.getByRole('link', { name: /test@example\.com/i });
      expect(emailLink).toHaveAttribute('href', 'mailto:test@example.com');

      // Check website link
      const websiteLink = screen.getByRole('link', { name: /visit website/i });
      expect(websiteLink).toHaveAttribute('href', 'https://example.com');
      expect(websiteLink).toHaveAttribute('target', '_blank');

      // Check social media links
      const instagramLink = screen.getByRole('link', { name: /instagram/i });
      expect(instagramLink).toHaveAttribute('href', 'https://instagram.com/test_insta');

      const facebookLink = screen.getByRole('link', { name: /facebook/i });
      expect(facebookLink).toHaveAttribute('href', 'https://facebook.com/test_fb');

      const twitterLink = screen.getByRole('link', { name: /twitter/i });
      expect(twitterLink).toHaveAttribute('href', 'https://twitter.com/test_tw');
    });
  });

  describe('with null/undefined contact information', () =&gt; {
    it('renders fallback messages when contact_info is undefined', () =&gt; {
      const truck = createMockTruck({
        contact_info: undefined,
        social_media: undefined
      });

      render(&lt;TruckContactInfo truck={truck} /&gt;);

      expect(screen.getByText('No phone number available')).toBeInTheDocument();
      expect(screen.getByText('No email available')).toBeInTheDocument();
      expect(screen.getByText('No website available')).toBeInTheDocument();
    });

    it('renders fallback messages when contact_info is null', () =&gt; {
      const truck = createMockTruck({
        contact_info: null as any,
        social_media: null as any
      });

      render(&lt;TruckContactInfo truck={truck} /&gt;);

      expect(screen.getByText('No phone number available')).toBeInTheDocument();
      expect(screen.getByText('No email available')).toBeInTheDocument();
      expect(screen.getByText('No website available')).toBeInTheDocument();
    });

    it('renders fallback messages when contact fields are empty strings', () =&gt; {
      const truck = createMockTruck({
        contact_info: {
          phone: '',
          email: '',
          website: ''
        },
        social_media: {}
      });

      render(&lt;TruckContactInfo truck={truck} /&gt;);

      expect(screen.getByText('No phone number available')).toBeInTheDocument();
      expect(screen.getByText('No email available')).toBeInTheDocument();
      expect(screen.getByText('No website available')).toBeInTheDocument();
    });

    it('does not render social media section when social_media is undefined', () =&gt; {
      const truck = createMockTruck({
        contact_info: {
          phone: '(555) 123-4567'
        },
        social_media: undefined
      });

      render(&lt;TruckContactInfo truck={truck} /&gt;);

      expect(screen.queryByText('Instagram')).not.toBeInTheDocument();
      expect(screen.queryByText('Facebook')).not.toBeInTheDocument();
      expect(screen.queryByText('Twitter')).not.toBeInTheDocument();
    });
  });

  describe('with partial contact information', () =&gt; {
    it('renders only phone when other contact info is missing', () =&gt; {
      const truck = createMockTruck({
        contact_info: {
          phone: '(555) 123-4567'
        }
      });

      render(&lt;TruckContactInfo truck={truck} /&gt;);

      expect(screen.getByText('(555) 123-4567')).toBeInTheDocument();
      expect(screen.getByText('No email available')).toBeInTheDocument();
      expect(screen.getByText('No website available')).toBeInTheDocument();
    });

    it('renders only email when other contact info is missing', () =&gt; {
      const truck = createMockTruck({
        contact_info: {
          email: 'test@example.com'
        }
      });

      render(&lt;TruckContactInfo truck={truck} /&gt;);

      expect(screen.getByText('test@example.com')).toBeInTheDocument();
      expect(screen.getByText('No phone number available')).toBeInTheDocument();
      expect(screen.getByText('No website available')).toBeInTheDocument();
    });

    it('renders only website when other contact info is missing', () =&gt; {
      const truck = createMockTruck({
        contact_info: {
          website: 'https://example.com'
        }
      });

      render(&lt;TruckContactInfo truck={truck} /&gt;);

      expect(screen.getByText('Visit Website')).toBeInTheDocument();
      expect(screen.getByText('No phone number available')).toBeInTheDocument();
      expect(screen.getByText('No email available')).toBeInTheDocument();
    });

    it('renders only available social media platforms', () =&gt; {
      const truck = createMockTruck({
        contact_info: {},
        social_media: {
          instagram: 'test_insta'
          // facebook and twitter are undefined
        }
      });

      render(&lt;TruckContactInfo truck={truck} /&gt;);

      expect(screen.getByText('Instagram')).toBeInTheDocument();
      expect(screen.queryByText('Facebook')).not.toBeInTheDocument();
      expect(screen.queryByText('Twitter')).not.toBeInTheDocument();
    });
  });

  describe('edge cases', () =&gt; {
    it('renders whitespace-only contact information as links (actual behavior)', () =&gt; {
      const truck = createMockTruck({
        contact_info: {
          phone: '   ',
          email: '\t\n',
          website: '  '
        }
      });

      render(&lt;TruckContactInfo truck={truck} /&gt;);

      // The component doesn't trim whitespace, so whitespace-only strings are treated as valid values
      // and render as clickable links. Since testing library trims accessible names,
      // we check for links with the appropriate hrefs
      const links = screen.getAllByRole('link');
      expect(links).toHaveLength(3); // Three empty-name links
      expect(links.some(link =&gt; link.getAttribute('href') === 'tel:   ')).toBe(true);
      expect(links.some(link =&gt; link.getAttribute('href') === 'mailto:\t\n')).toBe(true);
      expect(links.some(link =&gt; link.getAttribute('href') === '  ')).toBe(true);
    });

    it('handles mixed valid and invalid contact information', () =&gt; {
      const truck = createMockTruck({
        contact_info: {
          phone: '(555) 123-4567',
          email: '',
          website: '   '
        }
      });

      render(&lt;TruckContactInfo truck={truck} /&gt;);

      expect(screen.getByText('(555) 123-4567')).toBeInTheDocument();
      expect(screen.getByText('No email available')).toBeInTheDocument();
      // Website with spaces is treated as valid by the component - check by href since name is trimmed
      const links = screen.getAllByRole('link');
      expect(links.some(link =&gt; link.getAttribute('href') === '   ')).toBe(true);
    });

    it('handles empty social media object', () =&gt; {
      const truck = createMockTruck({
        social_media: {}
      });

      render(&lt;TruckContactInfo truck={truck} /&gt;);

      expect(screen.queryByText('Instagram')).not.toBeInTheDocument();
      expect(screen.queryByText('Facebook')).not.toBeInTheDocument();
      expect(screen.queryByText('Twitter')).not.toBeInTheDocument();
    });
  });

  describe('accessibility', () =&gt; {
    it('has proper card structure with title', () =&gt; {
      const truck = createMockTruck({
        contact_info: {
          phone: '(555) 123-4567'
        }
      });

      render(&lt;TruckContactInfo truck={truck} /&gt;);

      // CardTitle is a div, not a semantic heading
      expect(screen.getByText('Contact Information')).toBeInTheDocument();
      expect(screen.getByText('Get in touch')).toBeInTheDocument();
    });

    it('has proper labels for each contact field', () =&gt; {
      const truck = createMockTruck({
        contact_info: {
          phone: '(555) 123-4567',
          email: 'test@example.com',
          website: 'https://example.com'
        }
      });

      render(&lt;TruckContactInfo truck={truck} /&gt;);

      expect(screen.getByText('Phone')).toBeInTheDocument();
      expect(screen.getByText('Email')).toBeInTheDocument();
      expect(screen.getByText('Website')).toBeInTheDocument();
    });

    it('has proper security attributes for external links', () =&gt; {
      const truck = createMockTruck({
        contact_info: {
          website: 'https://example.com'
        },
        social_media: {
          instagram: 'test_insta'
        }
      });

      render(&lt;TruckContactInfo truck={truck} /&gt;);

      const websiteLink = screen.getByRole('link', { name: /visit website/i });
      expect(websiteLink).toHaveAttribute('target', '_blank');
      expect(websiteLink).toHaveAttribute('rel', 'noopener noreferrer');

      const instagramLink = screen.getByRole('link', { name: /instagram/i });
      expect(instagramLink).toHaveAttribute('target', '_blank');
      expect(instagramLink).toHaveAttribute('rel', 'noopener noreferrer');
    });
  });

  describe('component resilience', () =&gt; {
    it('does not crash when truck object has missing required fields', () =&gt; {
      const incompleteTruck = {
        contact_info: {
          phone: '(555) 123-4567'
        },
        social_media: {
          instagram: 'test_insta'
        }
      } as FoodTruck;

      expect(() =&gt; {
        render(&lt;TruckContactInfo truck={incompleteTruck</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/utils/foodTruckHelpers.js (Line 242:2 - Line 247:6), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/api/search/filters.js (Line 60:6 - Line 64:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn21" onclick="toggleCodeBlock('cloneGroup21', 'expandBtn21', 'collapseBtn21')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn21" onclick="toggleCodeBlock('cloneGroup21', 'expandBtn21', 'collapseBtn21')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup21"><code class="language-javascript text-sm text-gray-800">;
        const openTime = Number.parseInt(hours.open.replace(':', ''), 10);
        const closeTime = Number.parseInt(hours.close.replace(':', ''), 10);
        return currentTime &gt;= openTime &amp;&amp; currentTime &lt;= closeTime;
    }
    catch</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/pipeline/pipelineHelpers.js (Line 62:2 - Line 70:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/api/test-integration/helpers.js (Line 45:2 - Line 53:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn25" onclick="toggleCodeBlock('cloneGroup25', 'expandBtn25', 'collapseBtn25')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn25" onclick="toggleCodeBlock('cloneGroup25', 'expandBtn25', 'collapseBtn25')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup25"><code class="language-javascript text-sm text-gray-800">{
            monday: { closed: true },
            tuesday: { closed: true },
            wednesday: { closed: true },
            thursday: { closed: true },
            friday: { closed: true },
            saturday: { closed: true },
            sunday: { closed: true },
        };</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/data-quality/duplicatePrevention.js (Line 217:21 - Line 231:8), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/performance/databaseCache.js (Line 206:18 - Line 218:9)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn32" onclick="toggleCodeBlock('cloneGroup32', 'expandBtn32', 'collapseBtn32')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn32" onclick="toggleCodeBlock('cloneGroup32', 'expandBtn32', 'collapseBtn32')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup32"><code class="language-javascript text-sm text-gray-800">(lat1, lng1, lat2, lng2) {
        const R = 6371; // Earth's radius in kilometers
        const dLat = ((lat2 - lat1) * Math.PI) / 180;
        const dLng = ((lng2 - lng1) * Math.PI) / 180;
        const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
            Math.cos((lat1 * Math.PI) / 180) *
                Math.cos((lat2 * Math.PI) / 180) *
                Math.sin(dLng / 2) *
                Math.sin(dLng / 2);
        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
        return R * c;
    }
    /**
     * Calculate contact similarity
     */</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/.internal/scripts/scraper-with-listing-extraction.cjs (Line 140:2 - Line 145:14), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/.internal/scripts/scraper-with-listing-extraction.cjs (Line 91:2 - Line 96:14)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn48" onclick="toggleCodeBlock('cloneGroup48', 'expandBtn48', 'collapseBtn48')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn48" onclick="toggleCodeBlock('cloneGroup48', 'expandBtn48', 'collapseBtn48')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup48"><code class="language-javascript text-sm text-gray-800">= await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${process.env.GEMINI_API_KEY || process.env.GOOGLE_API_KEY}`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            contents: [{
              parts: [{ text: listingPrompt</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/test-oauth-flow.js (Line 40:3 - Line 53:5), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/verify-oauth-setup.js (Line 58:3 - Line 71:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn49" onclick="toggleCodeBlock('cloneGroup49', 'expandBtn49', 'collapseBtn49')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn49" onclick="toggleCodeBlock('cloneGroup49', 'expandBtn49', 'collapseBtn49')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup49"><code class="language-javascript text-sm text-gray-800">loadEnvironment() {
    const envPath = path.join(process.cwd(), '.env.local');
    if (fs.existsSync(envPath)) {
      const envContent = fs.readFileSync(envPath, 'utf8');
      envContent.split('\n').forEach((line) =&gt; {
        const [key, value] = line.split('=');
        if (key &amp;&amp; value) {
          process.env[key] = value.replace(/&quot;/g, '');
        }
      });
    }
  }

  log(message, type</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/test-name-normalization.js (Line 38:5 - Line 57:4), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/data-quality/duplicatePrevention.js (Line 160:9 - Line 179:61)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn50" onclick="toggleCodeBlock('cloneGroup50', 'expandBtn50', 'collapseBtn50')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn50" onclick="toggleCodeBlock('cloneGroup50', 'expandBtn50', 'collapseBtn50')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup50"><code class="language-javascript text-sm text-gray-800">const isSubstring = normalized1.includes(normalized2) || normalized2.includes(normalized1);
    if (isSubstring &amp;&amp; (normalized1.length &gt; 0 &amp;&amp; normalized2.length &gt; 0)) {
        const minLength = Math.min(normalized1.length, normalized2.length);
        const maxLength = Math.max(normalized1.length, normalized2.length);
        // High similarity for substring matches (0.8 to 0.95 based on length ratio)
        return 0.8 + (0.15 * (minLength / maxLength));
    }
    
    // Calculate Levenshtein distance on normalized strings
    const matrix = [];
    const len1 = normalized1.length;
    const len2 = normalized2.length;
    for (let i = 0; i &lt;= len1; i += 1) {
        matrix[i] = [i];
    }
    for (let j = 0; j &lt;= len2; j += 1) {
        matrix[0][j] = j;
    }
    for (let i = 1; i &lt;= len1; i += 1) {
        for</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/test-name-normalization.js (Line 57:9 - Line 69:48), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/data-quality/duplicatePrevention.js (Line 180:13 - Line 193:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn51" onclick="toggleCodeBlock('cloneGroup51', 'expandBtn51', 'collapseBtn51')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn51" onclick="toggleCodeBlock('cloneGroup51', 'expandBtn51', 'collapseBtn51')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup51"><code class="language-javascript text-sm text-gray-800">for (let j = 1; j &lt;= len2; j += 1) {
            const cost = normalized1[i - 1] === normalized2[j - 1] ? 0 : 1;
            matrix[i][j] = Math.min(matrix[i - 1][j] + 1, // deletion
            matrix[i][j - 1] + 1, // insertion
            matrix[i - 1][j - 1] + cost);
        }
    }
    const distance = matrix[len1][len2];
    const maxLength = Math.max(len1, len2);
    return maxLength === 0 ? 1 : 1 - distance / maxLength;
}

// Test cases for food truck name normalization</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/test-duplicate-prevention.js (Line 9:1 - Line 34:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/test-name-normalization.js (Line 69:1 - Line 95:69)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn52" onclick="toggleCodeBlock('cloneGroup52', 'expandBtn52', 'collapseBtn52')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn52" onclick="toggleCodeBlock('cloneGroup52', 'expandBtn52', 'collapseBtn52')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup52"><code class="language-javascript text-sm text-gray-800">// Test cases for food truck name normalization
const testCases = [
    // Exact matches
    { name1: &quot;Page's Okra Grill&quot;, name2: &quot;Page's Okra Grill&quot;, expected: 1.0 },
    
    // Food truck suffix variations
    { name1: &quot;Page's Okra Grill&quot;, name2: &quot;Page's Okra Grill Food Truck&quot;, expected: 0.9 },
    { name1: &quot;Taco Bell&quot;, name2: &quot;Taco Bell Food Trailer&quot;, expected: 0.9 },
    { name1: &quot;Burger King Mobile&quot;, name2: &quot;Burger King Mobile Kitchen&quot;, expected: 0.9 },
    
    // Case variations
    { name1: &quot;Page's Okra Grill&quot;, name2: &quot;PAGE'S OKRA GRILL&quot;, expected: 1.0 },
    { name1: &quot;Taco Bell&quot;, name2: &quot;taco bell&quot;, expected: 1.0 },
    
    // Punctuation variations
    { name1: &quot;Page's Okra Grill&quot;, name2: &quot;Pages Okra Grill&quot;, expected: 0.9 },
    { name1: &quot;Taco &amp; Burrito&quot;, name2: &quot;Taco and Burrito&quot;, expected: 0.9 },
    
    // Substring matches
    { name1: &quot;Page's Okra Grill Food Truck&quot;, name2: &quot;Page's Okra Grill&quot;, expected: 0.9 },
    { name1: &quot;Taco Bell Express&quot;, name2: &quot;Taco Bell&quot;, expected: 0.9 },
    
    // Different names (should be low similarity)
    { name1: &quot;Page's Okra Grill&quot;, name2: &quot;Taco Bell&quot;, expected: 0.0 },
    { name1: &quot;Burger King&quot;, name2: &quot;Pizza Hut&quot;, expected: 0.0 },
]</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/test-duplicate-prevention.js (Line 51:2 - Line 60:27), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/test-name-normalization.js (Line 120:2 - Line 129:29)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn53" onclick="toggleCodeBlock('cloneGroup53', 'expandBtn53', 'collapseBtn53')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn53" onclick="toggleCodeBlock('cloneGroup53', 'expandBtn53', 'collapseBtn53')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup53"><code class="language-javascript text-sm text-gray-800">normalizeFoodTruckName(name);
    console.log(`  &quot;${name}&quot; → &quot;${normalized}&quot;`);
});

console.log('\n📊 Similarity Calculation Tests:');
let passed = 0;
let total = testCases.length;

testCases.forEach((test, index) =&gt; {
    const similarity = DuplicatePreventionService</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/test-duplicate-prevention.js (Line 62:5 - Line 71:50), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/test-name-normalization.js (Line 131:5 - Line 140:39)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn54" onclick="toggleCodeBlock('cloneGroup54', 'expandBtn54', 'collapseBtn54')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn54" onclick="toggleCodeBlock('cloneGroup54', 'expandBtn54', 'collapseBtn54')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup54"><code class="language-javascript text-sm text-gray-800">if (passedTest) passed++;
    
    console.log(
        `  ${index + 1}. &quot;${test.name1}&quot; vs &quot;${test.name2}&quot;: ${similarity.toFixed(2)} ${passedTest ? '✅' : '❌'} (expected ~${test.expected})`
    );
});

console.log(`\n📈 Results: ${passed}/${total} tests passed (${Math.round((passed/total)*100)}%)`);

// Test the full duplicate check with sample data</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/reset-jobs.js (Line 7:1 - Line 23:6), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/safe-convert-discovered-to-jobs.js (Line 8:1 - Line 24:61)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn55" onclick="toggleCodeBlock('cloneGroup55', 'expandBtn55', 'collapseBtn55')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn55" onclick="toggleCodeBlock('cloneGroup55', 'expandBtn55', 'collapseBtn55')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup55"><code class="language-javascript text-sm text-gray-800">import dotenv from 'dotenv';
dotenv.config({ path: '.env.local' });

import { createClient } from '@supabase/supabase-js';

// Initialize Supabase with environment variables
const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
const serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;

if (!supabaseUrl || !serviceRoleKey) {
  console.error('❌ Missing Supabase credentials! Need both NEXT_PUBLIC_SUPABASE_URL and SUPABASE_SERVICE_ROLE_KEY');
  process.exit(1);
}

const supabase = createClient(supabaseUrl, serviceRoleKey);

async</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/reset-all-running-jobs.cjs (Line 48:3 - Line 57:27), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/test-scrape.cjs (Line 34:3 - Line 43:16)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn56" onclick="toggleCodeBlock('cloneGroup56', 'expandBtn56', 'collapseBtn56')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn56" onclick="toggleCodeBlock('cloneGroup56', 'expandBtn56', 'collapseBtn56')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup56"><code class="language-javascript text-sm text-gray-800">const { data: jobStats } = await supabase
    .from('scraping_jobs')
    .select('status');
  
  const stats = jobStats?.reduce((acc, job) =&gt; {
    acc[job.status] = (acc[job.status] || 0) + 1;
    return acc;
  }, {}) || {};

  console.log('\n📊 Current job status:'</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/process-one-job.cjs (Line 34:26 - Line 40:8), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/reset-all-running-jobs.cjs (Line 25:27 - Line 31:24)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn57" onclick="toggleCodeBlock('cloneGroup57', 'expandBtn57', 'collapseBtn57')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn57" onclick="toggleCodeBlock('cloneGroup57', 'expandBtn57', 'collapseBtn57')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup57"><code class="language-javascript text-sm text-gray-800">);
      runningJobs.forEach(job =&gt; {
        const age = Math.floor((Date.now() - new Date(job.created_at).getTime()) / (1000 * 60 * 60));
        console.log(`- ${job.target_url} (${age} hours old)`);
      });
      
      console</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/process-one-job.cjs (Line 60:5 - Line 74:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/.internal/scripts/scraper-with-listing-extraction.cjs (Line 50:7 - Line 64:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn58" onclick="toggleCodeBlock('cloneGroup58', 'expandBtn58', 'collapseBtn58')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn58" onclick="toggleCodeBlock('cloneGroup58', 'expandBtn58', 'collapseBtn58')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup58"><code class="language-javascript text-sm text-gray-800">const scrapeResponse = await fetch('https://api.firecrawl.dev/v1/scrape', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${process.env.FIRECRAWL_API_KEY}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        url: job.target_url,
        formats: ['markdown'],
        waitFor: 2000
      })
    });

    if (!scrapeResponse.ok) {
      throw new Error(`Firecrawl error: ${scrapeResponse.status} </code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/process-one-job.cjs (Line 99:42 - Line 116:6), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/.internal/scripts/scraper-with-listing-extraction.cjs (Line 89:42 - Line 106:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn59" onclick="toggleCodeBlock('cloneGroup59', 'expandBtn59', 'collapseBtn59')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn59" onclick="toggleCodeBlock('cloneGroup59', 'expandBtn59', 'collapseBtn59')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup59"><code class="language-javascript text-sm text-gray-800">;

    const geminiResponse = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${process.env.GEMINI_API_KEY || process.env.GOOGLE_API_KEY}`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        contents: [{
          parts: [{ text: extractPrompt }]
        }],
        generationConfig: {
          temperature: 0.1,
          maxOutputTokens: 2048
        }
      })
    });

    if (!geminiResponse.ok) {
      const</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/merge-page-trucks.js (Line 7:1 - Line 17:34), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/safe-convert-discovered-to-jobs.js (Line 8:1 - Line 18:99)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn60" onclick="toggleCodeBlock('cloneGroup60', 'expandBtn60', 'collapseBtn60')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn60" onclick="toggleCodeBlock('cloneGroup60', 'expandBtn60', 'collapseBtn60')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup60"><code class="language-javascript text-sm text-gray-800">import dotenv from 'dotenv';
dotenv.config({ path: '.env.local' });

import { createClient } from '@supabase/supabase-js';

// Initialize Supabase with environment variables
const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
const serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;

if (!supabaseUrl || !serviceRoleKey) {
  console.error('❌ Missing Supabase credentials!'</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/local-scraper-simple.cjs (Line 9:5 - Line 19:21), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/utils/geocoding.js (Line 14:9 - Line 22:59)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn61" onclick="toggleCodeBlock('cloneGroup61', 'expandBtn61', 'collapseBtn61')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn61" onclick="toggleCodeBlock('cloneGroup61', 'expandBtn61', 'collapseBtn61')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup61"><code class="language-javascript text-sm text-gray-800">const cleanAddress = address.trim();
    if (!cleanAddress) {
      throw new Error('Empty address provided');
    }

    // Construct search query - add city if not already in address
    const searchQuery = cleanAddress.toLowerCase().includes('charleston') 
      ? cleanAddress 
      : `${cleanAddress}, ${city}`;

    // Use Nominatim API</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/local-scraper-simple.cjs (Line 20:5 - Line 27:6), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/utils/geocoding.js (Line 23:9 - Line 29:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn62" onclick="toggleCodeBlock('cloneGroup62', 'expandBtn62', 'collapseBtn62')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn62" onclick="toggleCodeBlock('cloneGroup62', 'expandBtn62', 'collapseBtn62')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup62"><code class="language-javascript text-sm text-gray-800">const url = new URL('https://nominatim.openstreetmap.org/search');
    url.searchParams.set('q', searchQuery);
    url.searchParams.set('format', 'json');
    url.searchParams.set('limit', '1');
    url.searchParams.set('countrycodes', 'us');
    url.searchParams.set('addressdetails', '1');

    const</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/local-scraper-simple.cjs (Line 104:39 - Line 146:4), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/.internal/scripts/scraper-with-listing-extraction.cjs (Line 6:51 - Line 48:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn63" onclick="toggleCodeBlock('cloneGroup63', 'expandBtn63', 'collapseBtn63')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn63" onclick="toggleCodeBlock('cloneGroup63', 'expandBtn63', 'collapseBtn63')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup63"><code class="language-javascript text-sm text-gray-800">);
console.log(`- Batch size: ${BATCH_SIZE} jobs`);
console.log(`- Running every: ${INTERVAL_MINUTES} minutes`);
console.log('\nPress Ctrl+C to stop\n');

async function processBatch() {
  const startTime = new Date();
  console.log(`\n[${startTime.toLocaleTimeString()}] Starting batch processing...`);
  
  // Import modules
  const { createClient } = await import('@supabase/supabase-js');
  
  const supabase = createClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL,
    process.env.SUPABASE_SERVICE_ROLE_KEY
  );

  // Get pending jobs
  const { data: pendingJobs, error } = await supabase
    .from('scraping_jobs')
    .select('*')
    .eq('status', 'pending')
    .order('priority', { ascending: false })
    .limit(BATCH_SIZE);

  if (error || !pendingJobs || pendingJobs.length === 0) {
    console.log('No pending jobs found.');
    return;
  }

  console.log(`Found ${pendingJobs.length} pending jobs to process`);

  // Process each job
  for (const job of pendingJobs) {
    console.log(`\n📋 Processing: ${job.target_url}`);
    
    // Update to running
    await supabase
      .from('scraping_jobs')
      .update({ status: 'running', updated_at: new Date().toISOString() })
      .eq('id', job.id);

    let</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/local-scraper-simple.cjs (Line 147:2 - Line 168:11), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/.internal/scripts/scraper-with-listing-extraction.cjs (Line 46:2 - Line 67:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn64" onclick="toggleCodeBlock('cloneGroup64', 'expandBtn64', 'collapseBtn64')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn64" onclick="toggleCodeBlock('cloneGroup64', 'expandBtn64', 'collapseBtn64')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup64"><code class="language-javascript text-sm text-gray-800">;
    
    try {
      // Scrape with Firecrawl
      const scrapeResponse = await fetch('https://api.firecrawl.dev/v1/scrape', {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${process.env.FIRECRAWL_API_KEY}`,
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          url: job.target_url,
          formats: ['markdown'],
          waitFor: 2000
        })
      });

      if (!scrapeResponse.ok) {
        throw new Error(`Firecrawl error: ${scrapeResponse.status}`);
      }

      scrapeData</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/local-scraper-simple.cjs (Line 203:42 - Line 227:4), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/.internal/scripts/scraper-with-listing-extraction.cjs (Line 89:42 - Line 113:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn65" onclick="toggleCodeBlock('cloneGroup65', 'expandBtn65', 'collapseBtn65')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn65" onclick="toggleCodeBlock('cloneGroup65', 'expandBtn65', 'collapseBtn65')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup65"><code class="language-javascript text-sm text-gray-800">;

      const geminiResponse = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${process.env.GEMINI_API_KEY || process.env.GOOGLE_API_KEY}`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          contents: [{
            parts: [{ text: extractPrompt }]
          }],
          generationConfig: {
            temperature: 0.1,
            maxOutputTokens: 2048
          }
        })
      });

      if (!geminiResponse.ok) {
        throw new Error(`Gemini error: ${geminiResponse.status}`);
      }

      const geminiData = await geminiResponse.json();
      const extractedText = geminiData.candidates?.[0]?.content?.parts?.[0]?.text || '{}';
      
      // Parse JSON
      try</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/local-scraper-simple.cjs (Line 227:7 - Line 241:8), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/.internal/scripts/scraper-with-listing-extraction.cjs (Line 114:7 - Line 128:32)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn66" onclick="toggleCodeBlock('cloneGroup66', 'expandBtn66', 'collapseBtn66')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn66" onclick="toggleCodeBlock('cloneGroup66', 'expandBtn66', 'collapseBtn66')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup66"><code class="language-javascript text-sm text-gray-800">try {
        const jsonMatch = extractedText.match(/\{[\s\S]*\}/);
        if (jsonMatch) {
          let cleanJson = jsonMatch[0]
            .replace(/,\s*}/g, '}')
            .replace(/,\s*]/g, ']')
            .replace(/\n/g, ' ')
            .replace(/\s+/g, ' ');
          extractedData = JSON.parse(cleanJson);
        }
      } catch (e) {
        extractedData = { name: 'Unknown' };
      }

      console</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/local-scraper-simple.cjs (Line 387:7 - Line 407:20), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/.internal/scripts/scraper-with-listing-extraction.cjs (Line 206:9 - Line 226:14)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn67" onclick="toggleCodeBlock('cloneGroup67', 'expandBtn67', 'collapseBtn67')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn67" onclick="toggleCodeBlock('cloneGroup67', 'expandBtn67', 'collapseBtn67')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup67"><code class="language-javascript text-sm text-gray-800">// Check for existing truck
      const { data: existing } = await supabase
        .from('food_trucks')
        .select('id, name, source_urls')
        .ilike('name', `%${extractedData.name}%`)
        .limit(1);

      if (existing &amp;&amp; existing.length &gt; 0) {
        // Update existing
        const urls = Array.from(new Set([...(existing[0].source_urls || []), job.target_url]));
        await supabase
          .from('food_trucks')
          .update({
            ...extractedData,
            source_urls: urls,
            last_scraped_at: new Date().toISOString()
          })
          .eq('id', existing[0].id);
        console.log(`  ✓ Updated existing truck`);
      } else {
        // Create new truck</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/local-scraper-simple.cjs (Line 464:4 - Line 480:6), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/.internal/scripts/scraper-with-listing-extraction.cjs (Line 233:4 - Line 248:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn68" onclick="toggleCodeBlock('cloneGroup68', 'expandBtn68', 'collapseBtn68')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn68" onclick="toggleCodeBlock('cloneGroup68', 'expandBtn68', 'collapseBtn68')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup68"><code class="language-javascript text-sm text-gray-800">,
            verification_status: 'pending'
          });
        console.log(`  ✓ Created new truck`);
      }

      // Mark job completed
      await supabase
        .from('scraping_jobs')
        .update({ 
          status: 'completed',
          completed_at: new Date().toISOString(),
          data_collected: extractedData
        })
        .eq('id', job.id);

    } catch</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/local-scraper-simple.cjs (Line 480:5 - Line 516:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/.internal/scripts/scraper-with-listing-extraction.cjs (Line 252:5 - Line 289:20)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn69" onclick="toggleCodeBlock('cloneGroup69', 'expandBtn69', 'collapseBtn69')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn69" onclick="toggleCodeBlock('cloneGroup69', 'expandBtn69', 'collapseBtn69')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup69"><code class="language-javascript text-sm text-gray-800">} catch (error) {
      console.error(`  ❌ Failed: ${error.message}`);
      
      // Mark job failed
      await supabase
        .from('scraping_jobs')
        .update({ 
          status: 'failed',
          errors: [error.message],
          updated_at: new Date().toISOString()
        })
        .eq('id', job.id);
    }

    // Small delay between jobs
    await new Promise(resolve =&gt; setTimeout(resolve, 2000));
  }

  const endTime = new Date();
  const duration = Math.round((endTime - startTime) / 1000);
  console.log(`\n✅ Batch completed in ${duration} seconds`);
  
  // Show stats
  const { data: stats } = await supabase
    .from('scraping_jobs')
    .select('status');
  
  const counts = stats?.reduce((acc, job) =&gt; {
    acc[job.status] = (acc[job.status] || 0) + 1;
    return acc;
  }, {}) || {};

  console.log('\n📊 Job Status:');
  Object.entries(counts).forEach(([status, count]) =&gt; {
    console.log(`  ${status}: ${count}`);
  });
}</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/local-scraper-simple.cjs (Line 515:2 - Line 530:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/.internal/scripts/scraper-with-listing-extraction.cjs (Line 294:2 - Line 309:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn70" onclick="toggleCodeBlock('cloneGroup70', 'expandBtn70', 'collapseBtn70')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn70" onclick="toggleCodeBlock('cloneGroup70', 'expandBtn70', 'collapseBtn70')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup70"><code class="language-javascript text-sm text-gray-800">);
}

// Run immediately, then schedule
processBatch().catch(console.error);

// Schedule to run every INTERVAL_MINUTES
setInterval(() =&gt; {
  processBatch().catch(console.error);
}, INTERVAL_MINUTES * 60 * 1000);

// Handle graceful shutdown
process.on('SIGINT', () =&gt; {
  console.log('\n\n👋 Scraper stopped gracefully');
  process.exit(0);
});</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/local-scraper-server.js (Line 83:3 - Line 92:4), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/test-scrape.cjs (Line 34:3 - Line 43:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn71" onclick="toggleCodeBlock('cloneGroup71', 'expandBtn71', 'collapseBtn71')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn71" onclick="toggleCodeBlock('cloneGroup71', 'expandBtn71', 'collapseBtn71')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup71"><code class="language-javascript text-sm text-gray-800">const { data: jobStats } = await supabase
    .from('scraping_jobs')
    .select('status');
  
  const stats = jobStats?.reduce((acc, job) =&gt; {
    acc[job.status] = (acc[job.status] || 0) + 1;
    return acc;
  }, {}) || {};

  res</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/list-tables.js (Line 7:1 - Line 23:11), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/safe-convert-discovered-to-jobs.js (Line 8:1 - Line 23:10)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn72" onclick="toggleCodeBlock('cloneGroup72', 'expandBtn72', 'collapseBtn72')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn72" onclick="toggleCodeBlock('cloneGroup72', 'expandBtn72', 'collapseBtn72')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup72"><code class="language-javascript text-sm text-gray-800">import dotenv from 'dotenv';
dotenv.config({ path: '.env.local' });

import { createClient } from '@supabase/supabase-js';

// Initialize Supabase with environment variables
const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
const serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;

if (!supabaseUrl || !serviceRoleKey) {
  console.error('❌ Missing Supabase credentials! Need both NEXT_PUBLIC_SUPABASE_URL and SUPABASE_SERVICE_ROLE_KEY');
  process.exit(1);
}

const supabase = createClient(supabaseUrl, serviceRoleKey);

async function listTables</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/list-all-tables.js (Line 1:1 - Line 27:37), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/list-tables.js (Line 1:1 - Line 27:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn73" onclick="toggleCodeBlock('cloneGroup73', 'expandBtn73', 'collapseBtn73')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn73" onclick="toggleCodeBlock('cloneGroup73', 'expandBtn73', 'collapseBtn73')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup73"><code class="language-javascript text-sm text-gray-800">#!/usr/bin/env node

/**
 * Script to list all tables in the database.
 */

import dotenv from 'dotenv';
dotenv.config({ path: '.env.local' });

import { createClient } from '@supabase/supabase-js';

// Initialize Supabase with environment variables
const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
const serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;

if (!supabaseUrl || !serviceRoleKey) {
  console.error('❌ Missing Supabase credentials! Need both NEXT_PUBLIC_SUPABASE_URL and SUPABASE_SERVICE_ROLE_KEY');
  process.exit(1);
}

const supabase = createClient(supabaseUrl, serviceRoleKey);

async function listTables() {
  console.log('🔍 Listing all tables in the database...');

  try {
    // Query information schema directly</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/list-all-tables.js (Line 66:3 - Line 75:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/list-tables.js (Line 38:3 - Line 47:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn74" onclick="toggleCodeBlock('cloneGroup74', 'expandBtn74', 'collapseBtn74')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn74" onclick="toggleCodeBlock('cloneGroup74', 'expandBtn74', 'collapseBtn74')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup74"><code class="language-javascript text-sm text-gray-800">} catch (error) {
    console.error('💥 Fatal error:', error);
    process.exit(1);
  }
}

listTables().catch((error) =&gt; {
  console.error('💥 Unhandled error:', error);
  process.exit(1);
});</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/get-unknown-trucks.js (Line 7:1 - Line 23:17), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/safe-convert-discovered-to-jobs.js (Line 8:1 - Line 23:10)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn75" onclick="toggleCodeBlock('cloneGroup75', 'expandBtn75', 'collapseBtn75')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn75" onclick="toggleCodeBlock('cloneGroup75', 'expandBtn75', 'collapseBtn75')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup75"><code class="language-javascript text-sm text-gray-800">import dotenv from 'dotenv';
dotenv.config({ path: '.env.local' });

import { createClient } from '@supabase/supabase-js';

// Initialize Supabase with environment variables
const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
const serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;

if (!supabaseUrl || !serviceRoleKey) {
  console.error('❌ Missing Supabase credentials! Need both NEXT_PUBLIC_SUPABASE_URL and SUPABASE_SERVICE_ROLE_KEY');
  process.exit(1);
}

const supabase = createClient(supabaseUrl, serviceRoleKey);

async function getUnknownTrucks</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/get-high-impact-files.cjs (Line 57:13 - Line 66:36), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/get-high-impact-files.cjs (Line 41:11 - Line 50:34)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn76" onclick="toggleCodeBlock('cloneGroup76', 'expandBtn76', 'collapseBtn76')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn76" onclick="toggleCodeBlock('cloneGroup76', 'expandBtn76', 'collapseBtn76')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup76"><code class="language-javascript text-sm text-gray-800">.forEach((f) =&gt; {
      appendToReport(`${f.errors} errors: ${f.file}`);
      f.messages.forEach((msg) =&gt; {
        appendToReport(
          `  - [${msg.severity}] ${msg.ruleId} (Line ${msg.line}, Col ${msg.column}): ${msg.message}`,
        );
      });
    });
  } else {
    appendToReport('No files with 10-19 errors found.'</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/get-high-impact-files.cjs (Line 73:12 - Line 82:34), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/get-high-impact-files.cjs (Line 41:11 - Line 50:34)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn77" onclick="toggleCodeBlock('cloneGroup77', 'expandBtn77', 'collapseBtn77')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn77" onclick="toggleCodeBlock('cloneGroup77', 'expandBtn77', 'collapseBtn77')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup77"><code class="language-javascript text-sm text-gray-800">.forEach((f) =&gt; {
      appendToReport(`${f.errors} errors: ${f.file}`);
      f.messages.forEach((msg) =&gt; {
        appendToReport(
          `  - [${msg.severity}] ${msg.ruleId} (Line ${msg.line}, Col ${msg.column}): ${msg.message}`,
        );
      });
    });
  } else {
    appendToReport('No files with 5-9 errors found.'</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/fix-require-await.cjs (Line 65:25 - Line 89:6), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/replace-null-with-undefined.cjs (Line 20:54 - Line 44:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn78" onclick="toggleCodeBlock('cloneGroup78', 'expandBtn78', 'collapseBtn78')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn78" onclick="toggleCodeBlock('cloneGroup78', 'expandBtn78', 'collapseBtn78')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup78"><code class="language-javascript text-sm text-gray-800">${filePath}`);
        }
      });
    }
  });
}

function walkDir(dir) {
  fs.readdir(dir, (err, files) =&gt; {
    if (err) {
      console.error(`Error reading directory ${dir}:`, err);
      return;
    }

    files.forEach((file) =&gt; {
      const filePath = path.join(dir, file);
      fs.stat(filePath, (err, stat) =&gt; {
        if (err) {
          console.error(`Error stating file ${filePath}:`, err);
          return;
        }

        if (stat.isDirectory()) {
          walkDir(filePath);
        } else if (filePath.endsWith('.ts'</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/fix-redundant-jump.cjs (Line 7:17 - Line 19:3), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/fix-require-await.cjs (Line 7:16 - Line 20:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn79" onclick="toggleCodeBlock('cloneGroup79', 'expandBtn79', 'collapseBtn79')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn79" onclick="toggleCodeBlock('cloneGroup79', 'expandBtn79', 'collapseBtn79')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup79"><code class="language-javascript text-sm text-gray-800">(filePath) {
  fs.readFile(filePath, 'utf8', (err, code) =&gt; {
    if (err) {
      console.error(`Error reading file ${filePath}:`, err);
      return;
    }

    const sourceFile = ts.createSourceFile(filePath, code, ts.ScriptTarget.Latest, true);

    const transformations = [];

    function visit(node) {
      if (ts</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/fix-redundant-jump.cjs (Line 27:9 - Line 45:26), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/fix-require-await.cjs (Line 47:9 - Line 65:25)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn80" onclick="toggleCodeBlock('cloneGroup80', 'expandBtn80', 'collapseBtn80')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn80" onclick="toggleCodeBlock('cloneGroup80', 'expandBtn80', 'collapseBtn80')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup80"><code class="language-javascript text-sm text-gray-800">}
      }
      ts.forEachChild(node, visit);
    }

    visit(sourceFile);

    if (transformations.length &gt; 0) {
      transformations.sort((a, b) =&gt; b.pos - a.pos);
      let newCode = code;
      for (const transform of transformations) {
        newCode = newCode.slice(0, transform.pos) + transform.text + newCode.slice(transform.end);
      }

      fs.writeFile(filePath, newCode, 'utf8', (err) =&gt; {
        if (err) {
          console.error(`Error writing file ${filePath}:`, err);
        } else {
          console.log(`Fixed redundant jump in </code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/fix-redundant-jump.cjs (Line 45:26 - Line 70:17), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/replace-null-with-undefined.cjs (Line 20:54 - Line 45:14)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn81" onclick="toggleCodeBlock('cloneGroup81', 'expandBtn81', 'collapseBtn81')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn81" onclick="toggleCodeBlock('cloneGroup81', 'expandBtn81', 'collapseBtn81')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup81"><code class="language-javascript text-sm text-gray-800">${filePath}`);
        }
      });
    }
  });
}

function walkDir(dir) {
  fs.readdir(dir, (err, files) =&gt; {
    if (err) {
      console.error(`Error reading directory ${dir}:`, err);
      return;
    }

    files.forEach((file) =&gt; {
      const filePath = path.join(dir, file);
      fs.stat(filePath, (err, stat) =&gt; {
        if (err) {
          console.error(`Error stating file ${filePath}:`, err);
          return;
        }

        if (stat.isDirectory()) {
          walkDir(filePath);
        } else if (filePath.endsWith('.tsx')) {
          fixRedundantJump</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/fix-readonly-props-ts.cjs (Line 7:23 - Line 19:23), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/fix-require-await.cjs (Line 7:16 - Line 19:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn82" onclick="toggleCodeBlock('cloneGroup82', 'expandBtn82', 'collapseBtn82')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn82" onclick="toggleCodeBlock('cloneGroup82', 'expandBtn82', 'collapseBtn82')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup82"><code class="language-javascript text-sm text-gray-800">(filePath) {
  fs.readFile(filePath, 'utf8', (err, code) =&gt; {
    if (err) {
      console.error(`Error reading file ${filePath}:`, err);
      return;
    }

    const sourceFile = ts.createSourceFile(filePath, code, ts.ScriptTarget.Latest, true);

    const transformations = [];

    function visit(node) {
      if (ts.isInterfaceDeclaration</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/fix-readonly-props-ts.cjs (Line 28:12 - Line 49:31), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/fix-require-await.cjs (Line 44:3 - Line 65:25)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn83" onclick="toggleCodeBlock('cloneGroup83', 'expandBtn83', 'collapseBtn83')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn83" onclick="toggleCodeBlock('cloneGroup83', 'expandBtn83', 'collapseBtn83')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup83"><code class="language-javascript text-sm text-gray-800">,
            });
          }
        }
      }
      ts.forEachChild(node, visit);
    }

    visit(sourceFile);

    if (transformations.length &gt; 0) {
      transformations.sort((a, b) =&gt; b.pos - a.pos);
      let newCode = code;
      for (const transform of transformations) {
        newCode = newCode.slice(0, transform.pos) + transform.text + newCode.slice(transform.end);
      }

      fs.writeFile(filePath, newCode, 'utf8', (err) =&gt; {
        if (err) {
          console.error(`Error writing file ${filePath}:`, err);
        } else {
          console.log(`Added &quot;readonly&quot; to props in </code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/fix-readonly-props-ts.cjs (Line 49:31 - Line 74:23), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/replace-null-with-undefined.cjs (Line 20:54 - Line 45:14)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn84" onclick="toggleCodeBlock('cloneGroup84', 'expandBtn84', 'collapseBtn84')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn84" onclick="toggleCodeBlock('cloneGroup84', 'expandBtn84', 'collapseBtn84')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup84"><code class="language-javascript text-sm text-gray-800">${filePath}`);
        }
      });
    }
  });
}

function walkDir(dir) {
  fs.readdir(dir, (err, files) =&gt; {
    if (err) {
      console.error(`Error reading directory ${dir}:`, err);
      return;
    }

    files.forEach((file) =&gt; {
      const filePath = path.join(dir, file);
      fs.stat(filePath, (err, stat) =&gt; {
        if (err) {
          console.error(`Error stating file ${filePath}:`, err);
          return;
        }

        if (stat.isDirectory()) {
          walkDir(filePath);
        } else if (filePath.endsWith('.tsx')) {
          addReadonlyToInterface</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/fix-readonly-props-ast.cjs (Line 4:13 - Line 15:4), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/fix-readonly-props-ts.cjs (Line 3:13 - Line 14:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn85" onclick="toggleCodeBlock('cloneGroup85', 'expandBtn85', 'collapseBtn85')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn85" onclick="toggleCodeBlock('cloneGroup85', 'expandBtn85', 'collapseBtn85')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup85"><code class="language-javascript text-sm text-gray-800">);

const componentsDir = path.join(__dirname, '../components');

function addReadonlyToInterface(filePath) {
  fs.readFile(filePath, 'utf8', (err, code) =&gt; {
    if (err) {
      console.error(`Error reading file ${filePath}:`, err);
      return;
    }

    try</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/fix-readonly-props-ast.cjs (Line 40:9 - Line 48:6), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/fix-readonly-props-ts.cjs (Line 45:7 - Line 53:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn86" onclick="toggleCodeBlock('cloneGroup86', 'expandBtn86', 'collapseBtn86')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn86" onclick="toggleCodeBlock('cloneGroup86', 'expandBtn86', 'collapseBtn86')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup86"><code class="language-javascript text-sm text-gray-800">fs.writeFile(filePath, newCode, 'utf8', (err) =&gt; {
          if (err) {
            console.error(`Error writing file ${filePath}:`, err);
          } else {
            console.log(`Added &quot;readonly&quot; to props in ${filePath}`);
          }
        });
      }
    } catch</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/fix-readonly-props-ast.cjs (Line 49:2 - Line 79:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/replace-null-with-undefined.cjs (Line 22:2 - Line 81:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn87" onclick="toggleCodeBlock('cloneGroup87', 'expandBtn87', 'collapseBtn87')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn87" onclick="toggleCodeBlock('cloneGroup87', 'expandBtn87', 'collapseBtn87')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup87"><code class="language-javascript text-sm text-gray-800">);
    }
  });
}

function walkDir(dir) {
  fs.readdir(dir, (err, files) =&gt; {
    if (err) {
      console.error(`Error reading directory ${dir}:`, err);
      return;
    }

    files.forEach((file) =&gt; {
      const filePath = path.join(dir, file);
      fs.stat(filePath, (err, stat) =&gt; {
        if (err) {
          console.error(`Error stating file ${filePath}:`, err);
          return;
        }

        if (stat.isDirectory()) {
          walkDir(filePath);
        } else if (filePath.endsWith('.tsx')) {
          addReadonlyToInterface(filePath);
        }
      });
    });
  });
}

walkDir(componentsDir);</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/fix-imports-systematic.js (Line 1:1 - Line 9:64), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/fix-imports.js (Line 1:1 - Line 9:37)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn88" onclick="toggleCodeBlock('cloneGroup88', 'expandBtn88', 'collapseBtn88')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn88" onclick="toggleCodeBlock('cloneGroup88', 'expandBtn88', 'collapseBtn88')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup88"><code class="language-javascript text-sm text-gray-800">import { readFileSync, writeFileSync, existsSync, readdirSync, statSync } from 'fs';
import { join, dirname, relative } from 'path';
import { fileURLToPath } from 'url';

// Get __dirname equivalent in ES modules
const __filename = fileURLToPath(import.meta.url);
const __dirname = dirname(__filename);

// Comprehensive mapping of directory imports to specific files</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/fix-imports-systematic.js (Line 176:3 - Line 188:4), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/fix-imports.js (Line 100:3 - Line 112:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn89" onclick="toggleCodeBlock('cloneGroup89', 'expandBtn89', 'collapseBtn89')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn89" onclick="toggleCodeBlock('cloneGroup89', 'expandBtn89', 'collapseBtn89')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup89"><code class="language-javascript text-sm text-gray-800">const dirPath = dirname(filePath);
  const distLibPath = join(__dirname, '../dist/lib');
  
  content = content.replace(
    /from\s+['&quot;]@\/lib\/([^'&quot;]+)['&quot;]/g,
    (match, importPath) =&gt; {
      // Convert @/lib/path to relative path
      const targetPath = join(distLibPath, importPath);
      const relativePath = relative(dirPath, targetPath);
      const normalizedPath = relativePath.replace(/\\/g, '/');
      
      // Add .js extension if it's a file (not a directory)
      let</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/fix-filename-case.cjs (Line 29:1 - Line 49:16), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/replace-null-with-undefined.cjs (Line 25:1 - Line 90:16)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn90" onclick="toggleCodeBlock('cloneGroup90', 'expandBtn90', 'collapseBtn90')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn90" onclick="toggleCodeBlock('cloneGroup90', 'expandBtn90', 'collapseBtn90')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup90"><code class="language-javascript text-sm text-gray-800">}

function walkDir(dir) {
  fs.readdir(dir, (err, files) =&gt; {
    if (err) {
      console.error(`Error reading directory ${dir}:`, err);
      return;
    }

    files.forEach((file) =&gt; {
      const filePath = path.join(dir, file);
      fs.stat(filePath, (err, stat) =&gt; {
        if (err) {
          console.error(`Error stating file ${filePath}:`, err);
          return;
        }

        if (stat.isDirectory()) {
          walkDir(filePath);
        } else if (filePath.endsWith('.ts') || filePath.endsWith('.tsx')) {
          fixFilenameCase</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/fix-empty-interfaces.cjs (Line 7:19 - Line 19:8), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/fix-require-await.cjs (Line 7:16 - Line 19:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn91" onclick="toggleCodeBlock('cloneGroup91', 'expandBtn91', 'collapseBtn91')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn91" onclick="toggleCodeBlock('cloneGroup91', 'expandBtn91', 'collapseBtn91')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup91"><code class="language-javascript text-sm text-gray-800">(filePath) {
  fs.readFile(filePath, 'utf8', (err, code) =&gt; {
    if (err) {
      console.error(`Error reading file ${filePath}:`, err);
      return;
    }

    const sourceFile = ts.createSourceFile(filePath, code, ts.ScriptTarget.Latest, true);

    const transformations = [];

    function visit(node) {
      if (ts.isInterfaceDeclaration(node) &amp;&amp; node.members</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/fix-empty-interfaces.cjs (Line 25:7 - Line 42:27), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/fix-require-await.cjs (Line 48:7 - Line 65:25)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn92" onclick="toggleCodeBlock('cloneGroup92', 'expandBtn92', 'collapseBtn92')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn92" onclick="toggleCodeBlock('cloneGroup92', 'expandBtn92', 'collapseBtn92')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup92"><code class="language-javascript text-sm text-gray-800">}
      ts.forEachChild(node, visit);
    }

    visit(sourceFile);

    if (transformations.length &gt; 0) {
      transformations.sort((a, b) =&gt; b.pos - a.pos);
      let newCode = code;
      for (const transform of transformations) {
        newCode = newCode.slice(0, transform.pos) + transform.text + newCode.slice(transform.end);
      }

      fs.writeFile(filePath, newCode, 'utf8', (err) =&gt; {
        if (err) {
          console.error(`Error writing file ${filePath}:`, err);
        } else {
          console.log(`Fixed empty interface in </code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/fix-empty-interfaces.cjs (Line 42:27 - Line 67:19), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/replace-null-with-undefined.cjs (Line 20:54 - Line 45:14)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn93" onclick="toggleCodeBlock('cloneGroup93', 'expandBtn93', 'collapseBtn93')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn93" onclick="toggleCodeBlock('cloneGroup93', 'expandBtn93', 'collapseBtn93')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup93"><code class="language-javascript text-sm text-gray-800">${filePath}`);
        }
      });
    }
  });
}

function walkDir(dir) {
  fs.readdir(dir, (err, files) =&gt; {
    if (err) {
      console.error(`Error reading directory ${dir}:`, err);
      return;
    }

    files.forEach((file) =&gt; {
      const filePath = path.join(dir, file);
      fs.stat(filePath, (err, stat) =&gt; {
        if (err) {
          console.error(`Error stating file ${filePath}:`, err);
          return;
        }

        if (stat.isDirectory()) {
          walkDir(filePath);
        } else if (filePath.endsWith('.tsx')) {
          fixEmptyInterfaces</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/fix-all-imports.cjs (Line 14:3 - Line 35:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/fix-imports.cjs (Line 13:2 - Line 34:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn94" onclick="toggleCodeBlock('cloneGroup94', 'expandBtn94', 'collapseBtn94')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn94" onclick="toggleCodeBlock('cloneGroup94', 'expandBtn94', 'collapseBtn94')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup94"><code class="language-javascript text-sm text-gray-800">);
    }
  }
  return importPath;
}

function addJsExtensions(dir) {
  const files = fs.readdirSync(dir);

  for (const file of files) {
    const filePath = path.join(dir, file);
    const stat = fs.statSync(filePath);

    if (stat.isDirectory()) {
      addJsExtensions(filePath);
    } else if (filePath.endsWith('.js')) {
      let content = fs.readFileSync(filePath, 'utf8');
      const importRegex = /from\s+['&quot;](.*?)['&quot;]/g;
      let changed = false;

      content = content.replace(importRegex, (match, p1) =&gt; {
        let resolvedPath = resolveAlias(p1,</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/fix-all-imports.cjs (Line 35:9 - Line 51:5), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/fix-imports.cjs (Line 34:3 - Line 50:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn95" onclick="toggleCodeBlock('cloneGroup95', 'expandBtn95', 'collapseBtn95')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn95" onclick="toggleCodeBlock('cloneGroup95', 'expandBtn95', 'collapseBtn95')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup95"><code class="language-javascript text-sm text-gray-800">);
        if (resolvedPath.startsWith('.') &amp;&amp; !resolvedPath.endsWith('.js')) {
          changed = true;
          return `from '${resolvedPath}.js'`;
        }
        return match;
      });

      if (changed) {
        console.log(`Fixing imports in ${filePath}`);
        fs.writeFileSync(filePath, content, 'utf8');
      }
    }
  }
}

addJsExtensions(path</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/find-merge-duplicates.cjs (Line 68:11 - Line 78:9), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/data-quality/duplicatePrevention.js (Line 184:17 - Line 193:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn97" onclick="toggleCodeBlock('cloneGroup97', 'expandBtn97', 'collapseBtn97')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn97" onclick="toggleCodeBlock('cloneGroup97', 'expandBtn97', 'collapseBtn97')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup97"><code class="language-javascript text-sm text-gray-800">matrix[i - 1][j - 1] + cost
        );
      }
    }

    const distance = matrix[len1][len2];
    const maxLength = Math.max(len1, len2);
    return maxLength === 0 ? 1 : 1 - distance / maxLength;
  }

  function</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/find-merge-duplicates.cjs (Line 119:5 - Line 132:3), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/data-quality/duplicatePrevention.js (Line 246:9 - Line 259:20)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn98" onclick="toggleCodeBlock('cloneGroup98', 'expandBtn98', 'collapseBtn98')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn98" onclick="toggleCodeBlock('cloneGroup98', 'expandBtn98', 'collapseBtn98')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup98"><code class="language-javascript text-sm text-gray-800">if (contact1.website != undefined &amp;&amp; contact2.website != undefined) {
      const url1 = contact1.website
        .toLowerCase()
        .replace(/^https?:\/\//, '')
        .replace(/\/$/, '');
      const url2 = contact2.website
        .toLowerCase()
        .replace(/^https?:\/\//, '')
        .replace(/\/$/, '');
      if (url1 === url2) matches += 1;
      total += 1;
    }

    if</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/find-merge-duplicates.cjs (Line 132:5 - Line 140:9), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/data-quality/duplicatePrevention.js (Line 260:9 - Line 269:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn99" onclick="toggleCodeBlock('cloneGroup99', 'expandBtn99', 'collapseBtn99')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn99" onclick="toggleCodeBlock('cloneGroup99', 'expandBtn99', 'collapseBtn99')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup99"><code class="language-javascript text-sm text-gray-800">if (contact1.email != undefined &amp;&amp; contact2.email != undefined) {
      if (contact1.email.toLowerCase() === contact2.email.toLowerCase()) matches += 1;
      total += 1;
    }

    return total &gt; 0 ? matches / total : 0;
  }

  function</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/find-merge-duplicates.cjs (Line 142:5 - Line 153:9), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/data-quality/duplicatePrevention.js (Line 274:9 - Line 286:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn100" onclick="toggleCodeBlock('cloneGroup100', 'expandBtn100', 'collapseBtn100')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn100" onclick="toggleCodeBlock('cloneGroup100', 'expandBtn100', 'collapseBtn100')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup100"><code class="language-javascript text-sm text-gray-800">const categories1 = menu1
      .map((cat) =&gt; cat.category?.toLowerCase() ?? '')
      .filter(Boolean);
    const categories2 = menu2
      .map((cat) =&gt; cat.category?.toLowerCase() ?? '')
      .filter(Boolean);
    const commonCategories = categories1.filter((cat) =&gt; categories2.includes(cat));
    const totalCategories = new Set([...categories1, ...categories2]).size;
    return totalCategories &gt; 0 ? commonCategories.length / totalCategories : 0;
  }

  function</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/count-errors.cjs (Line 77:2 - Line 84:11), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/count-errors.cjs (Line 48:14 - Line 56:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn101" onclick="toggleCodeBlock('cloneGroup101', 'expandBtn101', 'collapseBtn101')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn101" onclick="toggleCodeBlock('cloneGroup101', 'expandBtn101', 'collapseBtn101')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup101"><code class="language-javascript text-sm text-gray-800">,
        files: results.length,
        filesWithErrors: results.filter((f) =&gt; f.errorCount &gt; 0).length,
      };

      fs.writeFileSync('.current-metrics.json', JSON.stringify(metrics, null, 2));
      return totalErrors;
    } catch (parseError</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/convert-discovered-to-jobs.js (Line 8:1 - Line 24:83), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/safe-convert-discovered-to-jobs.js (Line 8:1 - Line 24:61)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn102" onclick="toggleCodeBlock('cloneGroup102', 'expandBtn102', 'collapseBtn102')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn102" onclick="toggleCodeBlock('cloneGroup102', 'expandBtn102', 'collapseBtn102')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup102"><code class="language-javascript text-sm text-gray-800">import dotenv from 'dotenv';
dotenv.config({ path: '.env.local' });

import { createClient } from '@supabase/supabase-js';

// Initialize Supabase with environment variables
const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
const serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;

if (!supabaseUrl || !serviceRoleKey) {
  console.error('❌ Missing Supabase credentials! Need both NEXT_PUBLIC_SUPABASE_URL and SUPABASE_SERVICE_ROLE_KEY');
  process.exit(1);
}

const supabase = createClient(supabaseUrl, serviceRoleKey);

// Import autoScraper after Supabase is initialized to avoid circular dependencies</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/convert-discovered-to-jobs.js (Line 44:5 - Line 59:48), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/safe-convert-discovered-to-jobs.js (Line 71:5 - Line 85:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn103" onclick="toggleCodeBlock('cloneGroup103', 'expandBtn103', 'collapseBtn103')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn103" onclick="toggleCodeBlock('cloneGroup103', 'expandBtn103', 'collapseBtn103')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup103"><code class="language-javascript text-sm text-gray-800">if (error) {
      console.error('❌ Error fetching discovered URLs:', error.message);
      process.exit(1);
    }

    if (!discoveredUrls || discoveredUrls.length === 0) {
      console.log('✅ No new discovered URLs found');
      return;
    }

    console.log(`📦 Found ${discoveredUrls.length} new discovered URLs to convert to jobs`);

    let createdJobs = 0;
    let failedJobs = 0;

    // Convert each discovered URL to a pending job</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/convert-discovered-to-jobs.js (Line 64:2 - Line 77:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/safe-convert-discovered-to-jobs.js (Line 106:2 - Line 118:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn104" onclick="toggleCodeBlock('cloneGroup104', 'expandBtn104', 'collapseBtn104')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn104" onclick="toggleCodeBlock('cloneGroup104', 'expandBtn104', 'collapseBtn104')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup104"><code class="language-javascript text-sm text-gray-800">triggerScrapingProcess(url);
        
        if (result.success) {
          createdJobs++;
          console.log(`✅ Job created for ${url} (ID: ${result.jobId})`);
          
          // Update the discovered URL status to 'processing'
          const { error: updateError } = await supabase
            .from('discovered_urls')
            .update({
              status: 'processing',
              last_processed_at: new Date().toISOString(),
              notes: `Job created: ${result.jobId}`
            }</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/convert-discovered-to-jobs.js (Line 94:13 - Line 104:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/safe-convert-discovered-to-jobs.js (Line 144:13 - Line 155:52)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn105" onclick="toggleCodeBlock('cloneGroup105', 'expandBtn105', 'collapseBtn105')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn105" onclick="toggleCodeBlock('cloneGroup105', 'expandBtn105', 'collapseBtn105')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup105"><code class="language-javascript text-sm text-gray-800">})
            .eq('id', id);
            
          if (updateError) {
            console.warn(`⚠️  Failed to update discovered URL status for ${url}:`, updateError.message);
          }
        }
      } catch (error) {
        failedJobs++;
        console.error(`💥 Error processing URL ${url}:`, error.message);
      }</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/comprehensive-automated-fixer.cjs (Line 28:20 - Line 49:6), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/revert-boolean-fixer-damage.cjs (Line 16:13 - Line 37:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn106" onclick="toggleCodeBlock('cloneGroup106', 'expandBtn106', 'collapseBtn106')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn106" onclick="toggleCodeBlock('cloneGroup106', 'expandBtn106', 'collapseBtn106')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup106"><code class="language-javascript text-sm text-gray-800">: 0,
      errors: [],
    };
  }

  /**
   * Get current error count
   */
  getCurrentErrorCount() {
    try {
      const output = execSync('node scripts/count-errors.cjs', { encoding: 'utf8' });
      const lines = output.trim().split('\n');
      return parseInt(lines[lines.length - 1]) || 0;
    } catch (error) {
      console.warn('Could not get current error count:', error.message);
      return 0;
    }
  }

  /**
   * Step 1: Run ESLint auto-fix for safe rules
   */</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/comprehensive-automated-fixer.cjs (Line 339:8 - Line 349:28), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/revert-boolean-fixer-damage.cjs (Line 222:2 - Line 232:21)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn107" onclick="toggleCodeBlock('cloneGroup107', 'expandBtn107', 'collapseBtn107')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn107" onclick="toggleCodeBlock('cloneGroup107', 'expandBtn107', 'collapseBtn107')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup107"><code class="language-javascript text-sm text-gray-800">)
    .then((result) =&gt; {
      process.exit(result.success ? 0 : 1);
    })
    .catch((error) =&gt; {
      console.error('Fatal error:', error);
      process.exit(1);
    });
}

module.exports = ComprehensiveAutomatedFixer</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/compare-urls.js (Line 7:1 - Line 23:6), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/safe-convert-discovered-to-jobs.js (Line 8:1 - Line 23:59)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn108" onclick="toggleCodeBlock('cloneGroup108', 'expandBtn108', 'collapseBtn108')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn108" onclick="toggleCodeBlock('cloneGroup108', 'expandBtn108', 'collapseBtn108')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup108"><code class="language-javascript text-sm text-gray-800">import dotenv from 'dotenv';
dotenv.config({ path: '.env.local' });

import { createClient } from '@supabase/supabase-js';

// Initialize Supabase with environment variables
const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
const serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;

if (!supabaseUrl || !serviceRoleKey) {
  console.error('❌ Missing Supabase credentials!');
  process.exit(1);
}

const supabase = createClient(supabaseUrl, serviceRoleKey);

async</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/cleanup-duplicate-jobs.js (Line 8:1 - Line 24:21), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/safe-convert-discovered-to-jobs.js (Line 8:1 - Line 23:12)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn109" onclick="toggleCodeBlock('cloneGroup109', 'expandBtn109', 'collapseBtn109')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn109" onclick="toggleCodeBlock('cloneGroup109', 'expandBtn109', 'collapseBtn109')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup109"><code class="language-javascript text-sm text-gray-800">import dotenv from 'dotenv';
dotenv.config({ path: '.env.local' });

import { createClient } from '@supabase/supabase-js';

// Initialize Supabase with environment variables
const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
const serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;

if (!supabaseUrl || !serviceRoleKey) {
  console.error('❌ Missing Supabase credentials!');
  process.exit(1);
}

const supabase = createClient(supabaseUrl, serviceRoleKey);

async function cleanupDuplicateJobs</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/clean-scraping-queue.cjs (Line 34:5 - Line 46:3), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/local-scraper-simple.cjs (Line 330:7 - Line 342:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn110" onclick="toggleCodeBlock('cloneGroup110', 'expandBtn110', 'collapseBtn110')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn110" onclick="toggleCodeBlock('cloneGroup110', 'expandBtn110', 'collapseBtn110')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup110"><code class="language-javascript text-sm text-gray-800">if (url.includes('.png') || url.includes('.jpg') || url.includes('.gif') ||
        url.includes('.css') || url.includes('.js') || url.includes('facebook.com') ||
        url.includes('instagram.com') || url.includes('twitter.com') || 
        url.includes('linkedin.com') || url.includes('reddit.com') ||
        url.includes('whatsapp.com') || url.includes('/login') ||
        url.includes('/user_') || url.includes('/images/') ||
        url.includes('/static/') || url.includes('/assets/') ||
        url.includes('googleapis.com') || url.includes('gstatic.com') ||
        url.includes('cloudinary.com') || url.includes('spotapps.co') ||
        url.includes('openstreetmap.org') || url.includes('cartodb') ||
        url.includes('#') || url.includes('?page=') ||
        url.includes('/join') || url.includes('/contact') ||
        url.includes('/about') || url.includes('/privacy') ||</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/check-viable-trucks.cjs (Line 27:7 - Line 40:7), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/utils/foodTruckHelpers.js (Line 202:9 - Line 210:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn111" onclick="toggleCodeBlock('cloneGroup111', 'expandBtn111', 'collapseBtn111')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn111" onclick="toggleCodeBlock('cloneGroup111', 'expandBtn111', 'collapseBtn111')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup111"><code class="language-javascript text-sm text-gray-800">return false;
    }
    
    // Must have either coordinates OR a meaningful address
    const hasCoordinates = 
      typeof truck.current_location.lat === 'number' &amp;&amp; 
      typeof truck.current_location.lng === 'number';
      
    const hasAddress = 
      truck.current_location.address &amp;&amp; 
      truck.current_location.address.trim() !== '' &amp;&amp;
      truck.current_location.address !== 'Unknown';
    
    return</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/check-table-structure.js (Line 7:1 - Line 23:20), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/safe-convert-discovered-to-jobs.js (Line 8:1 - Line 23:10)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn112" onclick="toggleCodeBlock('cloneGroup112', 'expandBtn112', 'collapseBtn112')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn112" onclick="toggleCodeBlock('cloneGroup112', 'expandBtn112', 'collapseBtn112')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup112"><code class="language-javascript text-sm text-gray-800">import dotenv from 'dotenv';
dotenv.config({ path: '.env.local' });

import { createClient } from '@supabase/supabase-js';

// Initialize Supabase with environment variables
const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
const serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;

if (!supabaseUrl || !serviceRoleKey) {
  console.error('❌ Missing Supabase credentials! Need both NEXT_PUBLIC_SUPABASE_URL and SUPABASE_SERVICE_ROLE_KEY');
  process.exit(1);
}

const supabase = createClient(supabaseUrl, serviceRoleKey);

async function checkTableStructure</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/check-page-trucks.js (Line 7:1 - Line 23:16), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/safe-convert-discovered-to-jobs.js (Line 8:1 - Line 23:12)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn113" onclick="toggleCodeBlock('cloneGroup113', 'expandBtn113', 'collapseBtn113')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn113" onclick="toggleCodeBlock('cloneGroup113', 'expandBtn113', 'collapseBtn113')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup113"><code class="language-javascript text-sm text-gray-800">import dotenv from 'dotenv';
dotenv.config({ path: '.env.local' });

import { createClient } from '@supabase/supabase-js';

// Initialize Supabase with environment variables
const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
const serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;

if (!supabaseUrl || !serviceRoleKey) {
  console.error('❌ Missing Supabase credentials!');
  process.exit(1);
}

const supabase = createClient(supabaseUrl, serviceRoleKey);

async function checkPageTrucks</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/check-jobs-table.js (Line 7:1 - Line 23:15), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/safe-convert-discovered-to-jobs.js (Line 8:1 - Line 23:12)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn114" onclick="toggleCodeBlock('cloneGroup114', 'expandBtn114', 'collapseBtn114')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn114" onclick="toggleCodeBlock('cloneGroup114', 'expandBtn114', 'collapseBtn114')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup114"><code class="language-javascript text-sm text-gray-800">import dotenv from 'dotenv';
dotenv.config({ path: '.env.local' });

import { createClient } from '@supabase/supabase-js';

// Initialize Supabase with environment variables
const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
const serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;

if (!supabaseUrl || !serviceRoleKey) {
  console.error('❌ Missing Supabase credentials!');
  process.exit(1);
}

const supabase = createClient(supabaseUrl, serviceRoleKey);

async function checkJobsTable</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/check-duplicate-jobs.js (Line 7:1 - Line 23:19), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/safe-convert-discovered-to-jobs.js (Line 8:1 - Line 23:12)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn115" onclick="toggleCodeBlock('cloneGroup115', 'expandBtn115', 'collapseBtn115')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn115" onclick="toggleCodeBlock('cloneGroup115', 'expandBtn115', 'collapseBtn115')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup115"><code class="language-javascript text-sm text-gray-800">import dotenv from 'dotenv';
dotenv.config({ path: '.env.local' });

import { createClient } from '@supabase/supabase-js';

// Initialize Supabase with environment variables
const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
const serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;

if (!supabaseUrl || !serviceRoleKey) {
  console.error('❌ Missing Supabase credentials!');
  process.exit(1);
}

const supabase = createClient(supabaseUrl, serviceRoleKey);

async function checkDuplicateJobs</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/check-duplicate-jobs.js (Line 24:61 - Line 64:8), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/cleanup-duplicate-jobs.js (Line 25:68 - Line 66:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn116" onclick="toggleCodeBlock('cloneGroup116', 'expandBtn116', 'collapseBtn116')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn116" onclick="toggleCodeBlock('cloneGroup116', 'expandBtn116', 'collapseBtn116')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup116"><code class="language-javascript text-sm text-gray-800">);
  
  try {
    // Get all pending jobs
    const { data: pendingJobs, error } = await supabase
      .from('scraping_jobs')
      .select('id, target_url, created_at')
      .eq('status', 'pending')
      .order('created_at', { ascending: false });

    if (error) {
      console.error('❌ Error fetching pending jobs:', error.message);
      return;
    }

    if (!pendingJobs || pendingJobs.length === 0) {
      console.log('✅ No pending jobs found.');
      return;
    }

    console.log(`📊 Found ${pendingJobs.length} pending jobs`);

    // Group jobs by URL
    const urlGroups = {};
    pendingJobs.forEach(job =&gt; {
      if (!urlGroups[job.target_url]) {
        urlGroups[job.target_url] = [];
      }
      urlGroups[job.target_url].push(job);
    });

    // Find duplicates
    const duplicates = Object.entries(urlGroups).filter(([_, jobs]) =&gt; jobs.length &gt; 1);
    
    if (duplicates.length === 0) {
      console.log('✅ No duplicate URLs found in pending jobs.');
      return;
    }

    console.log(`\n⚠️  Found ${duplicates.length} URLs with duplicates:`);
    console</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/check-current-state.js (Line 7:1 - Line 23:18), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/safe-convert-discovered-to-jobs.js (Line 8:1 - Line 23:12)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn118" onclick="toggleCodeBlock('cloneGroup118', 'expandBtn118', 'collapseBtn118')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn118" onclick="toggleCodeBlock('cloneGroup118', 'expandBtn118', 'collapseBtn118')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup118"><code class="language-javascript text-sm text-gray-800">import dotenv from 'dotenv';
dotenv.config({ path: '.env.local' });

import { createClient } from '@supabase/supabase-js';

// Initialize Supabase with environment variables
const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
const serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;

if (!supabaseUrl || !serviceRoleKey) {
  console.error('❌ Missing Supabase credentials!');
  process.exit(1);
}

const supabase = createClient(supabaseUrl, serviceRoleKey);

async function checkCurrentState</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/check-completed-jobs.js (Line 7:1 - Line 23:19), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/safe-convert-discovered-to-jobs.js (Line 8:1 - Line 23:10)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn119" onclick="toggleCodeBlock('cloneGroup119', 'expandBtn119', 'collapseBtn119')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn119" onclick="toggleCodeBlock('cloneGroup119', 'expandBtn119', 'collapseBtn119')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup119"><code class="language-javascript text-sm text-gray-800">import dotenv from 'dotenv';
dotenv.config({ path: '.env.local' });

import { createClient } from '@supabase/supabase-js';

// Initialize Supabase with environment variables
const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
const serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;

if (!supabaseUrl || !serviceRoleKey) {
  console.error('❌ Missing Supabase credentials! Need both NEXT_PUBLIC_SUPABASE_URL and SUPABASE_SERVICE_ROLE_KEY');
  process.exit(1);
}

const supabase = createClient(supabaseUrl, serviceRoleKey);

async function checkCompletedJobs</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/automated-unused-code-cleaner.cjs (Line 37:3 - Line 50:6), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/revert-boolean-fixer-damage.cjs (Line 24:3 - Line 37:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn120" onclick="toggleCodeBlock('cloneGroup120', 'expandBtn120', 'collapseBtn120')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn120" onclick="toggleCodeBlock('cloneGroup120', 'expandBtn120', 'collapseBtn120')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup120"><code class="language-javascript text-sm text-gray-800">getCurrentErrorCount() {
    try {
      const output = execSync('node scripts/count-errors.cjs', { encoding: 'utf8' });
      const lines = output.trim().split('\n');
      return parseInt(lines[lines.length - 1]) || 0;
    } catch (error) {
      console.warn('Could not get current error count:', error.message);
      return 0;
    }
  }

  /**
   * Create backup of current state
   */</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/automated-unused-code-cleaner.cjs (Line 292:5 - Line 302:18), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/comprehensive-automated-fixer.cjs (Line 339:5 - Line 232:21)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn121" onclick="toggleCodeBlock('cloneGroup121', 'expandBtn121', 'collapseBtn121')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn121" onclick="toggleCodeBlock('cloneGroup121', 'expandBtn121', 'collapseBtn121')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup121"><code class="language-javascript text-sm text-gray-800">.run(options)
    .then((result) =&gt; {
      process.exit(result.success ? 0 : 1);
    })
    .catch((error) =&gt; {
      console.error('Fatal error:', error);
      process.exit(1);
    });
}

module.exports = UnusedCodeCleaner</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/automated-nullish-coalescing-converter.cjs (Line 103:3 - Line 111:12), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/revert-boolean-fixer-damage.cjs (Line 87:3 - Line 95:24)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn122" onclick="toggleCodeBlock('cloneGroup122', 'expandBtn122', 'collapseBtn122')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn122" onclick="toggleCodeBlock('cloneGroup122', 'expandBtn122', 'collapseBtn122')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup122"><code class="language-javascript text-sm text-gray-800">processFile(filePath) {
    try {
      const content = fs.readFileSync(filePath, 'utf8');
      const lines = content.split('\n');
      let hasChanges = false;
      const results = [];

      lines.forEach((line, index) =&gt; {
        const result = this.convertLine</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/automated-nullish-coalescing-converter.cjs (Line 115:16 - Line 136:6), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/revert-boolean-fixer-damage.cjs (Line 100:10 - Line 121:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn123" onclick="toggleCodeBlock('cloneGroup123', 'expandBtn123', 'collapseBtn123')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn123" onclick="toggleCodeBlock('cloneGroup123', 'expandBtn123', 'collapseBtn123')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup123"><code class="language-javascript text-sm text-gray-800">);
        }
      });

      if (hasChanges) {
        fs.writeFileSync(filePath, results.join('\n'));
        console.log(`✅ Updated: ${filePath}`);
        return true;
      } else {
        console.log(`⏭️  No changes: ${filePath}`);
        return false;
      }
    } catch (error) {
      this.stats.errors.push({ file: filePath, error: error.message });
      console.error(`❌ Error processing ${filePath}: ${error.message}`);
      return false;
    }
  }

  /**
   * Find all TypeScript/TSX files in specified directories
   */</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/automated-nullish-coalescing-converter.cjs (Line 138:2 - Line 148:3), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/comprehensive-automated-fixer.cjs (Line 172:6 - Line 182:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn124" onclick="toggleCodeBlock('cloneGroup124', 'expandBtn124', 'collapseBtn124')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn124" onclick="toggleCodeBlock('cloneGroup124', 'expandBtn124', 'collapseBtn124')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup124"><code class="language-javascript text-sm text-gray-800">];

    directories.forEach((dir) =&gt; {
      if (fs.existsSync(dir)) {
        const findFiles = (currentDir) =&gt; {
          const items = fs.readdirSync(currentDir);
          items.forEach((item) =&gt; {
            const fullPath = path.join(currentDir, item);
            const stat = fs.statSync(fullPath);

            if (stat.isDirectory() &amp;&amp; !item.startsWith('.') &amp;&amp;</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/automated-nullish-coalescing-converter.cjs (Line 148:15 - Line 164:6), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/comprehensive-automated-fixer.cjs (Line 182:2 - Line 198:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn125" onclick="toggleCodeBlock('cloneGroup125', 'expandBtn125', 'collapseBtn125')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn125" onclick="toggleCodeBlock('cloneGroup125', 'expandBtn125', 'collapseBtn125')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup125"><code class="language-javascript text-sm text-gray-800">) {
              findFiles(fullPath);
            } else if (stat.isFile() &amp;&amp; (item.endsWith('.ts') || item.endsWith('.tsx'))) {
              files.push(fullPath);
            }
          });
        };
        findFiles(dir);
      }
    });

    return files;
  }

  /**
   * Get current error count for comparison
   */</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/automated-nullish-coalescing-converter.cjs (Line 159:6 - Line 178:6), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/automated-unused-code-cleaner.cjs (Line 31:2 - Line 37:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn126" onclick="toggleCodeBlock('cloneGroup126', 'expandBtn126', 'collapseBtn126')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn126" onclick="toggleCodeBlock('cloneGroup126', 'expandBtn126', 'collapseBtn126')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup126"><code class="language-javascript text-sm text-gray-800">;
  }

  /**
   * Get current error count for comparison
   */
  getCurrentErrorCount() {
    try {
      const output = execSync('node scripts/count-errors.cjs', { encoding: 'utf8' });
      const lines = output.trim().split('\n');
      return parseInt(lines[lines.length - 1]) || 0;
    } catch (error) {
      console.warn('Could not get current error count:', error.message);
      return 0;
    }
  }

  /**
   * Run the conversion process
   */</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/automated-nullish-coalescing-converter.cjs (Line 245:5 - Line 259:19), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/revert-boolean-fixer-damage.cjs (Line 197:4 - Line 211:13)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn127" onclick="toggleCodeBlock('cloneGroup127', 'expandBtn127', 'collapseBtn127')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn127" onclick="toggleCodeBlock('cloneGroup127', 'expandBtn127', 'collapseBtn127')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup127"><code class="language-javascript text-sm text-gray-800">(
      `Error reduction: ${errorReduction} (${((errorReduction / initialErrors) * 100).toFixed(1)}%)`,
    );

    if (this.stats.errors.length &gt; 0) {
      console.log('');
      console.log('❌ ERRORS:');
      this.stats.errors.forEach((err) =&gt; {
        console.log(`  ${err.file}: ${err.error}`);
      });
    }

    return {
      filesChanged,
      conversionsApplied</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/automated-nullish-coalescing-converter.cjs (Line 280:5 - Line 290:27), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/comprehensive-automated-fixer.cjs (Line 339:5 - Line 232:21)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn128" onclick="toggleCodeBlock('cloneGroup128', 'expandBtn128', 'collapseBtn128')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn128" onclick="toggleCodeBlock('cloneGroup128', 'expandBtn128', 'collapseBtn128')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup128"><code class="language-javascript text-sm text-gray-800">.run(options)
    .then((result) =&gt; {
      process.exit(result.success ? 0 : 1);
    })
    .catch((error) =&gt; {
      console.error('Fatal error:', error);
      process.exit(1);
    });
}

module.exports = NullishCoalescingConverter</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/async-function-cleaner.cjs (Line 26:21 - Line 47:6), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/revert-boolean-fixer-damage.cjs (Line 16:13 - Line 37:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn129" onclick="toggleCodeBlock('cloneGroup129', 'expandBtn129', 'collapseBtn129')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn129" onclick="toggleCodeBlock('cloneGroup129', 'expandBtn129', 'collapseBtn129')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup129"><code class="language-javascript text-sm text-gray-800">: 0,
      errors: [],
    };
  }

  /**
   * Get current error count
   */
  getCurrentErrorCount() {
    try {
      const output = execSync('node scripts/count-errors.cjs', { encoding: 'utf8' });
      const lines = output.trim().split('\n');
      return parseInt(lines[lines.length - 1]) || 0;
    } catch (error) {
      console.warn('Could not get current error count:', error.message);
      return 0;
    }
  }

  /**
   * Check if a function body contains await expressions
   */</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/async-function-cleaner.cjs (Line 107:26 - Line 122:6), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/revert-boolean-fixer-damage.cjs (Line 106:2 - Line 121:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn130" onclick="toggleCodeBlock('cloneGroup130', 'expandBtn130', 'collapseBtn130')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn130" onclick="toggleCodeBlock('cloneGroup130', 'expandBtn130', 'collapseBtn130')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup130"><code class="language-javascript text-sm text-gray-800">);
        return true;
      } else {
        console.log(`⏭️  No changes: ${filePath}`);
        return false;
      }
    } catch (error) {
      this.stats.errors.push({ file: filePath, error: error.message });
      console.error(`❌ Error processing ${filePath}: ${error.message}`);
      return false;
    }
  }

  /**
   * Find TypeScript files
   */</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/async-function-cleaner.cjs (Line 123:3 - Line 137:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/automated-nullish-coalescing-converter.cjs (Line 137:3 - Line 185:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn131" onclick="toggleCodeBlock('cloneGroup131', 'expandBtn131', 'collapseBtn131')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn131" onclick="toggleCodeBlock('cloneGroup131', 'expandBtn131', 'collapseBtn131')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup131"><code class="language-javascript text-sm text-gray-800">findTSFiles(directories = ['app', 'components', 'lib']) {
    const files = [];

    directories.forEach((dir) =&gt; {
      if (fs.existsSync(dir)) {
        const findFiles = (currentDir) =&gt; {
          const items = fs.readdirSync(currentDir);
          items.forEach((item) =&gt; {
            const fullPath = path.join(currentDir, item);
            const stat = fs.statSync(fullPath);

            if (stat.isDirectory() &amp;&amp; !item.startsWith('.')) {
              findFiles(fullPath);
            } else if (stat.isFile() &amp;&amp; (item.endsWith('.ts') || item.endsWith('.tsx'))) {
              files.push(fullPath.</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/async-function-cleaner.cjs (Line 171:4 - Line 184:7), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/automated-nullish-coalescing-converter.cjs (Line 199:5 - Line 212:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn132" onclick="toggleCodeBlock('cloneGroup132', 'expandBtn132', 'collapseBtn132')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn132" onclick="toggleCodeBlock('cloneGroup132', 'expandBtn132', 'collapseBtn132')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup132"><code class="language-javascript text-sm text-gray-800">('');

    // Process files
    let filesChanged = 0;
    for (const file of filesToProcess) {
      console.log(`Processing: ${file}`);

      if (!dryRun) {
        const changed = this.processFile(file);
        if (changed) filesChanged++;
      } else {
        // Dry run - just analyze
        const content = fs.readFileSync(file, 'utf8');
        const result</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/async-function-cleaner.cjs (Line 205:21 - Line 224:21), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/revert-boolean-fixer-damage.cjs (Line 192:13 - Line 211:13)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn133" onclick="toggleCodeBlock('cloneGroup133', 'expandBtn133', 'collapseBtn133')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn133" onclick="toggleCodeBlock('cloneGroup133', 'expandBtn133', 'collapseBtn133')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup133"><code class="language-javascript text-sm text-gray-800">}`);
    console.log(`Errors encountered: ${this.stats.errors.length}`);
    console.log('');
    console.log(`Initial errors: ${initialErrors}`);
    console.log(`Final errors: ${finalErrors}`);
    console.log(
      `Error reduction: ${errorReduction} (${((errorReduction / initialErrors) * 100).toFixed(1)}%)`,
    );

    if (this.stats.errors.length &gt; 0) {
      console.log('');
      console.log('❌ ERRORS:');
      this.stats.errors.forEach((err) =&gt; {
        console.log(`  ${err.file}: ${err.error}`);
      });
    }

    return {
      filesChanged,
      asyncKeywordsRemoved</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/async-function-cleaner.cjs (Line 224:21 - Line 243:8), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/automated-nullish-coalescing-converter.cjs (Line 259:19 - Line 278:10)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn134" onclick="toggleCodeBlock('cloneGroup134', 'expandBtn134', 'collapseBtn134')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn134" onclick="toggleCodeBlock('cloneGroup134', 'expandBtn134', 'collapseBtn134')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup134"><code class="language-javascript text-sm text-gray-800">,
      errorReduction,
      success: this.stats.errors.length === 0,
    };
  }
}

// CLI interface
if (require.main === module) {
  const args = process.argv.slice(2);
  const options = {};

  // Parse command line arguments
  if (args.includes('--dry-run')) options.dryRun = true;
  if (args.includes('--max-files')) {
    const maxIndex = args.indexOf('--max-files');
    options.maxFiles = parseInt(args[maxIndex + 1]) || 10;
  }

  const cleaner</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/async-function-cleaner.cjs (Line 243:21 - Line 255:21), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/automated-unused-code-cleaner.cjs (Line 290:18 - Line 232:21)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn135" onclick="toggleCodeBlock('cloneGroup135', 'expandBtn135', 'collapseBtn135')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn135" onclick="toggleCodeBlock('cloneGroup135', 'expandBtn135', 'collapseBtn135')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup135"><code class="language-javascript text-sm text-gray-800">();
  cleaner
    .run(options)
    .then((result) =&gt; {
      process.exit(result.success ? 0 : 1);
    })
    .catch((error) =&gt; {
      console.error('Fatal error:', error);
      process.exit(1);
    });
}

module.exports = AsyncFunctionCleaner</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/apply-production-migrations.cjs (Line 138:5 - Line 150:24), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/execute-migration.cjs (Line 58:5 - Line 69:42)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn136" onclick="toggleCodeBlock('cloneGroup136', 'expandBtn136', 'collapseBtn136')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn136" onclick="toggleCodeBlock('cloneGroup136', 'expandBtn136', 'collapseBtn136')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup136"><code class="language-javascript text-sm text-gray-800">const { data: testData, error: testError } = await supabase
      .from('food_trucks')
      .select('id')
      .limit(1);

    if (testError) {
      console.log('❌ Connection failed:', testError.message);
      return;
    }

    console.log('✅ Connected to production database\n');

    // Apply each migration</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/analyze-error-patterns.cjs (Line 42:17 - Line 62:3), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/temp-analyze-errors.cjs (Line 25:50 - Line 45:15)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn137" onclick="toggleCodeBlock('cloneGroup137', 'expandBtn137', 'collapseBtn137')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn137" onclick="toggleCodeBlock('cloneGroup137', 'expandBtn137', 'collapseBtn137')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup137"><code class="language-javascript text-sm text-gray-800">, error.message);
      return [];
    }
  }

  /**
   * Analyze error patterns from ESLint results
   */
  analyzePatterns(results) {
    console.log('📊 Analyzing error patterns...');

    results.forEach((file) =&gt; {
      const fileName = file.filePath.replace(process.cwd(), '').replace(/\\/g, '/');
      let fileErrorCount = 0;

      file.messages.forEach((msg) =&gt; {
        if (msg.severity === 2) {
          // Error (not warning)
          const ruleId = msg.ruleId || 'unknown';
          this.errorCounts[ruleId] = (this.errorCounts[ruleId] || 0) + 1;
          if</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/analyze-error-patterns.cjs (Line 68:2 - Line 139:19), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/temp-analyze-errors.cjs (Line 44:2 - Line 115:15)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn138" onclick="toggleCodeBlock('cloneGroup138', 'expandBtn138', 'collapseBtn138')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn138" onclick="toggleCodeBlock('cloneGroup138', 'expandBtn138', 'collapseBtn138')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup138"><code class="language-javascript text-sm text-gray-800">;
          fileErrorCount++;
        }
      });

      if (fileErrorCount &gt; 0) {
        this.fileErrorCounts[fileName] = fileErrorCount;
      }
    });
  }

  /**
   * Identify automation candidates based on frequency and safety
   */
  identifyAutomationCandidates() {
    console.log('🎯 Identifying automation candidates...');

    // Define automation-friendly rules
    const automationRules = {
      // High confidence - safe to automate
      '@typescript-eslint/no-unused-vars': {
        confidence: 'HIGH',
        method: 'eslint-autofix',
        description: 'Remove unused variables and imports',
        estimatedReduction: '90%',
      },
      'sonarjs/unused-import': {
        confidence: 'HIGH',
        method: 'eslint-autofix',
        description: 'Remove unused imports',
        estimatedReduction: '95%',
      },
      'unicorn/no-null': {
        confidence: 'HIGH',
        method: 'pattern-replacement',
        description: 'Replace null with undefined',
        estimatedReduction: '85%',
      },

      // Medium confidence - needs careful automation
      '@typescript-eslint/no-explicit-any': {
        confidence: 'MEDIUM',
        method: 'pattern-replacement',
        description: 'Replace any with unknown in safe contexts',
        estimatedReduction: '40%',
      },
      '@typescript-eslint/no-unsafe-assignment': {
        confidence: 'MEDIUM',
        method: 'type-annotation',
        description: 'Add type annotations for unsafe assignments',
        estimatedReduction: '30%',
      },
      'sonarjs/no-dead-store': {
        confidence: 'MEDIUM',
        method: 'pattern-replacement',
        description: 'Remove dead store assignments',
        estimatedReduction: '70%',
      },

      // Low confidence - manual review needed
      '@typescript-eslint/strict-boolean-expressions': {
        confidence: 'LOW',
        method: 'manual-review',
        description: 'Complex boolean expression fixes',
        estimatedReduction: '10%',
      },
      'max-lines-per-function': {
        confidence: 'MANUAL_ONLY',
        method: 'manual-ide-refactor',
        description:
          'RESEARCH-PROVEN UNSAFE FOR AUTOMATION: Function extraction requires human judgment. Use VS Code Extract Method only.',
        estimatedReduction</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/analyze-error-patterns.cjs (Line 139:5 - Line 315:20), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/temp-analyze-errors.cjs (Line 114:119 - Line 290:21)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn139" onclick="toggleCodeBlock('cloneGroup139', 'expandBtn139', 'collapseBtn139')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn139" onclick="toggleCodeBlock('cloneGroup139', 'expandBtn139', 'collapseBtn139')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup139"><code class="language-javascript text-sm text-gray-800">,
        automationRisk: 'HIGH',
        researchEvidence: 'Academic studies show 47% failure rate, semantic errors common',
      },
    };

    // Calculate automation potential
    Object.entries(this.errorCounts).forEach(([ruleId, count]) =&gt; {
      if (automationRules[ruleId] &amp;&amp; count &gt;= 5) {
        // Only consider rules with 5+ occurrences
        const rule = automationRules[ruleId];
        const estimatedFixes = Math.floor(count * (parseInt(rule.estimatedReduction) / 100));

        this.automationCandidates.push({
          ruleId,
          count,
          confidence: rule.confidence,
          method: rule.method,
          description: rule.description,
          estimatedFixes,
          priority: this.calculatePriority(count, rule.confidence, estimatedFixes),
        });
      }
    });

    // Sort by priority (highest first)
    this.automationCandidates.sort((a, b) =&gt; b.priority - a.priority);
  }

  /**
   * Calculate automation priority score
   */
  calculatePriority(count, confidence, estimatedFixes) {
    const confidenceMultiplier = {
      HIGH: 3,
      MEDIUM: 2,
      LOW: 1,
    };

    return estimatedFixes * confidenceMultiplier[confidence];
  }

  /**
   * Generate automation recommendations
   */
  generateRecommendations() {
    console.log('💡 Generating automation recommendations...');

    const highConfidenceCandidates = this.automationCandidates.filter(
      (c) =&gt; c.confidence === 'HIGH',
    );
    const mediumConfidenceCandidates = this.automationCandidates.filter(
      (c) =&gt; c.confidence === 'MEDIUM',
    );

    const totalHighConfidenceFixes = highConfidenceCandidates.reduce(
      (sum, c) =&gt; sum + c.estimatedFixes,
      0,
    );
    const totalMediumConfidenceFixes = mediumConfidenceCandidates.reduce(
      (sum, c) =&gt; sum + c.estimatedFixes,
      0,
    );

    return {
      highConfidence: {
        candidates: highConfidenceCandidates,
        totalFixes: totalHighConfidenceFixes,
        methods: [...new Set(highConfidenceCandidates.map((c) =&gt; c.method))],
      },
      mediumConfidence: {
        candidates: mediumConfidenceCandidates,
        totalFixes: totalMediumConfidenceFixes,
        methods: [...new Set(mediumConfidenceCandidates.map((c) =&gt; c.method))],
      },
    };
  }

  /**
   * Print analysis results
   */
  printResults() {
    const totalErrors = Object.values(this.errorCounts).reduce((sum, count) =&gt; sum + count, 0);
    const sortedErrors = Object.entries(this.errorCounts).sort((a, b) =&gt; b[1] - a[1]);
    const recommendations = this.generateRecommendations();

    console.log('\n📈 ERROR PATTERN ANALYSIS RESULTS');
    console.log('=====================================');
    console.log(`Total errors: ${totalErrors}`);
    console.log(`Unique error types: ${Object.keys(this.errorCounts).length}`);
    console.log(`Files with errors: ${Object.keys(this.fileErrorCounts).length}`);

    console.log('\n🔝 TOP 15 ERROR TYPES:');
    console.log('----------------------');
    sortedErrors.slice(0, 15).forEach(([rule, count], index) =&gt; {
      const percentage = ((count / totalErrors) * 100).toFixed(1);
      console.log(`${index + 1}. ${rule}: ${count} (${percentage}%)`);
    });

    console.log('\n🎯 HIGH CONFIDENCE AUTOMATION CANDIDATES:');
    console.log('------------------------------------------');
    if (recommendations.highConfidence.candidates.length &gt; 0) {
      recommendations.highConfidence.candidates.forEach((candidate) =&gt; {
        console.log(
          `✅ ${candidate.ruleId}: ${candidate.count} errors → ~${candidate.estimatedFixes} fixes (${candidate.method})`,
        );
        console.log(`   ${candidate.description}`);
      });
      console.log(`\n🚀 TOTAL HIGH CONFIDENCE FIXES: ${recommendations.highConfidence.totalFixes}`);
    } else {
      console.log('No high confidence automation candidates found.');
    }

    console.log('\n⚠️  MEDIUM CONFIDENCE AUTOMATION CANDIDATES:');
    console.log('--------------------------------------------');
    if (recommendations.mediumConfidence.candidates.length &gt; 0) {
      recommendations.mediumConfidence.candidates.forEach((candidate) =&gt; {
        console.log(
          `🔶 ${candidate.ruleId}: ${candidate.count} errors → ~${candidate.estimatedFixes} fixes (${candidate.method})`,
        );
        console.log(`   ${candidate.description}`);
      });
      console.log(
        `\n⚡ TOTAL MEDIUM CONFIDENCE FIXES: ${recommendations.mediumConfidence.totalFixes}`,
      );
    } else {
      console.log('No medium confidence automation candidates found.');
    }

    const totalAutomationPotential =
      recommendations.highConfidence.totalFixes + recommendations.mediumConfidence.totalFixes;
    const automationPercentage = ((totalAutomationPotential / totalErrors) * 100).toFixed(1);

    console.log('\n📊 AUTOMATION SUMMARY:');
    console.log('----------------------');
    console.log(`Current errors: ${totalErrors}`);
    console.log(
      `Automation potential: ${totalAutomationPotential} fixes (${automationPercentage}%)`,
    );
    console.log(`Remaining manual work: ${totalErrors - totalAutomationPotential} errors`);

    console.log('\n🛠️  RECOMMENDED AUTOMATION METHODS:');
    console.log('-----------------------------------');
    const allMethods = [
      ...recommendations.highConfidence.methods,
      ...recommendations.mediumConfidence.methods,
    ];
    [...new Set(allMethods)].forEach((method) =&gt; {
      console.log(`• ${method}`);
    });

    return recommendations;
  }

  /**
   * Run the complete analysis
   */
  async run() {
    const results = this.getESLintResults();
    this.analyzePatterns(results);
    this.identifyAutomationCandidates();
    return this.printResults();
  }
}

// CLI interface
if (require.main === module) {
  const analyzer = new ErrorPatternAnalyzer();
  analyzer
    .run()
    .then((recommendations) =&gt; {
      // Save results for other scripts to use
      const output = {
        timestamp: new Date().toISOString(),
        totalErrors: Object.values(analyzer.errorCounts).reduce((sum, count) =&gt; sum + count, 0),
        errorCounts: analyzer.errorCounts,
        errorsByRuleAndFile</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/analyze-error-patterns.cjs (Line 315:20 - Line 331:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/temp-analyze-errors.cjs (Line 289:12 - Line 305:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn140" onclick="toggleCodeBlock('cloneGroup140', 'expandBtn140', 'collapseBtn140')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn140" onclick="toggleCodeBlock('cloneGroup140', 'expandBtn140', 'collapseBtn140')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup140"><code class="language-javascript text-sm text-gray-800">,
        automationCandidates: analyzer.automationCandidates,
        recommendations,
      };

      fs.writeFileSync('error-analysis.json', JSON.stringify(output, null, 2));
      console.log('\n💾 Analysis saved to error-analysis.json');

      process.exit(0);
    })
    .catch((error) =&gt; {
      console.error('Analysis failed:', error);
      process.exit(1);
    });
}

module.exports = ErrorPatternAnalyzer;</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/ScraperEngine.js (Line 572:8 - Line 577:36), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/ScraperEngine.js (Line 539:8 - Line 544:32)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn144" onclick="toggleCodeBlock('cloneGroup144', 'expandBtn144', 'collapseBtn144')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn144" onclick="toggleCodeBlock('cloneGroup144', 'expandBtn144', 'collapseBtn144')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup144"><code class="language-javascript text-sm text-gray-800">;
            const response = await this.makeGeminiRequest(prompt);
            this.updateUsageCounters(1, prompt.length + response.length);
            const parsed = JSON.parse(response);
            if (parsed == undefined || typeof parsed !== 'object') {
                throw new Error('Invalid Gemini sentiment response'</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/gemini.js (Line 201:8 - Line 216:10), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/gemini.js (Line 186:7 - Line 201:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn145" onclick="toggleCodeBlock('cloneGroup145', 'expandBtn145', 'collapseBtn145')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn145" onclick="toggleCodeBlock('cloneGroup145', 'expandBtn145', 'collapseBtn145')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup145"><code class="language-javascript text-sm text-gray-800">: {
                            type: ['object', 'null'],
                            properties: {
                                open: {
                                    type: ['string', 'null']
                                },
                                close: {
                                    type: ['string', 'null']
                                },
                                closed: {
                                    type: 'boolean'
                                }
                            },
                            required: ['closed']
                        },
                        wednesday</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/gemini.js (Line 216:10 - Line 231:9), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/gemini.js (Line 186:7 - Line 201:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn146" onclick="toggleCodeBlock('cloneGroup146', 'expandBtn146', 'collapseBtn146')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn146" onclick="toggleCodeBlock('cloneGroup146', 'expandBtn146', 'collapseBtn146')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup146"><code class="language-javascript text-sm text-gray-800">: {
                            type: ['object', 'null'],
                            properties: {
                                open: {
                                    type: ['string', 'null']
                                },
                                close: {
                                    type: ['string', 'null']
                                },
                                closed: {
                                    type: 'boolean'
                                }
                            },
                            required: ['closed']
                        },
                        thursday</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/gemini.js (Line 231:9 - Line 246:7), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/gemini.js (Line 186:7 - Line 201:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn147" onclick="toggleCodeBlock('cloneGroup147', 'expandBtn147', 'collapseBtn147')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn147" onclick="toggleCodeBlock('cloneGroup147', 'expandBtn147', 'collapseBtn147')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup147"><code class="language-javascript text-sm text-gray-800">: {
                            type: ['object', 'null'],
                            properties: {
                                open: {
                                    type: ['string', 'null']
                                },
                                close: {
                                    type: ['string', 'null']
                                },
                                closed: {
                                    type: 'boolean'
                                }
                            },
                            required: ['closed']
                        },
                        friday</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/gemini.js (Line 246:7 - Line 261:9), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/gemini.js (Line 186:7 - Line 201:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn148" onclick="toggleCodeBlock('cloneGroup148', 'expandBtn148', 'collapseBtn148')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn148" onclick="toggleCodeBlock('cloneGroup148', 'expandBtn148', 'collapseBtn148')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup148"><code class="language-javascript text-sm text-gray-800">: {
                            type: ['object', 'null'],
                            properties: {
                                open: {
                                    type: ['string', 'null']
                                },
                                close: {
                                    type: ['string', 'null']
                                },
                                closed: {
                                    type: 'boolean'
                                }
                            },
                            required: ['closed']
                        },
                        saturday</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/gemini.js (Line 261:9 - Line 276:7), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/gemini.js (Line 186:7 - Line 201:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn149" onclick="toggleCodeBlock('cloneGroup149', 'expandBtn149', 'collapseBtn149')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn149" onclick="toggleCodeBlock('cloneGroup149', 'expandBtn149', 'collapseBtn149')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup149"><code class="language-javascript text-sm text-gray-800">: {
                            type: ['object', 'null'],
                            properties: {
                                open: {
                                    type: ['string', 'null']
                                },
                                close: {
                                    type: ['string', 'null']
                                },
                                closed: {
                                    type: 'boolean'
                                }
                            },
                            required: ['closed']
                        },
                        sunday</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/gemini.js (Line 276:7 - Line 291:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/gemini.js (Line 186:7 - Line 200:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn150" onclick="toggleCodeBlock('cloneGroup150', 'expandBtn150', 'collapseBtn150')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn150" onclick="toggleCodeBlock('cloneGroup150', 'expandBtn150', 'collapseBtn150')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup150"><code class="language-javascript text-sm text-gray-800">: {
                            type: ['object', 'null'],
                            properties: {
                                open: {
                                    type: ['string', 'null']
                                },
                                close: {
                                    type: ['string', 'null']
                                },
                                closed: {
                                    type: 'boolean'
                                }
                            },
                            required: ['closed']
                        }
                    }</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/firecrawl.js (Line 142:2 - Line 154:25), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/firecrawl.js (Line 77:2 - Line 89:26)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn153" onclick="toggleCodeBlock('cloneGroup153', 'expandBtn153', 'collapseBtn153')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn153" onclick="toggleCodeBlock('cloneGroup153', 'expandBtn153', 'collapseBtn153')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup153"><code class="language-javascript text-sm text-gray-800">,
                }),
            });
            const data = await response.json();
            if (!response.ok) {
                const errorData = data;
                throw new Error(errorData.error ?? `HTTP ${response.status}`);
            }
            this.setCacheResult(cacheKey, data);
            return data;
        }
        catch (error) {
            console.warn('Firecrawl crawl error:'</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/firecrawl.js (Line 184:2 - Line 195:26), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/firecrawl.js (Line 78:2 - Line 89:26)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn154" onclick="toggleCodeBlock('cloneGroup154', 'expandBtn154', 'collapseBtn154')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn154" onclick="toggleCodeBlock('cloneGroup154', 'expandBtn154', 'collapseBtn154')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup154"><code class="language-javascript text-sm text-gray-800">,
            });
            const data = await response.json();
            if (!response.ok) {
                const errorData = data;
                throw new Error(errorData.error ?? `HTTP ${response.status}`);
            }
            this.setCacheResult(cacheKey, data);
            return data;
        }
        catch (error) {
            console.warn('Firecrawl status error:'</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/discoveryEngine.js (Line 269:14 - Line 281:65), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/discoveryEngine.js (Line 206:13 - Line 218:56)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn158" onclick="toggleCodeBlock('cloneGroup158', 'expandBtn158', 'collapseBtn158')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn158" onclick="toggleCodeBlock('cloneGroup158', 'expandBtn158', 'collapseBtn158')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup158"><code class="language-javascript text-sm text-gray-800">) {
                if (typeof result === 'object' &amp;&amp; result !== null &amp;&amp; 'url' in result) {
                    const resultUrl = result.url;
                    if (resultUrl != undefined &amp;&amp;
                        typeof resultUrl === 'string' &amp;&amp;
                        (await this.isFoodTruckUrl(resultUrl))) {
                        discoveredUrls.add(resultUrl);
                    }
                }
            }
        }
    }
    // Helper method to store discovered URLs from discovery process</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/discoveryEngine.js (Line 503:2 - Line 509:8), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/discoveryEngine.js (Line 247:15 - Line 253:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn159" onclick="toggleCodeBlock('cloneGroup159', 'expandBtn159', 'collapseBtn159')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn159" onclick="toggleCodeBlock('cloneGroup159', 'expandBtn159', 'collapseBtn159')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup159"><code class="language-javascript text-sm text-gray-800">);
        }
        catch (error) {
            console.error(`❌ Location search failed for ${city}:`, error);
            results.errors.push(`Location search failed for ${city}: ${error instanceof Error ? error.message : 'Unknown error'}`);
        }
        console</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/discoveryEngine.js (Line 604:6 - Line 619:6), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/discoveryEngine.js (Line 300:2 - Line 327:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn160" onclick="toggleCodeBlock('cloneGroup160', 'expandBtn160', 'collapseBtn160')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn160" onclick="toggleCodeBlock('cloneGroup160', 'expandBtn160', 'collapseBtn160')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup160"><code class="language-javascript text-sm text-gray-800">,
                });
                if (stored.isNew === true) {
                    results.urls_stored += 1;
                }
                else {
                    results.urls_duplicates += 1;
                }
            }
            catch (error) {
                console.error(`❌ Failed to store URL ${url}:`, error);
                results.errors.push(`Failed to store URL ${url}: ${error instanceof Error ? error.message : 'Unknown error'}`);
            }
        }
    }
    delay</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/discoveryEngine.js (Line 780:2 - Line 824:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/pipeline/scrapingProcessor.js (Line 290:2 - Line 334:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn161" onclick="toggleCodeBlock('cloneGroup161', 'expandBtn161', 'collapseBtn161')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn161" onclick="toggleCodeBlock('cloneGroup161', 'expandBtn161', 'collapseBtn161')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup161"><code class="language-javascript text-sm text-gray-800">updateUrlQualityScore(url, result) {
        try {
            if (!supabaseAdmin) {
                return;
            }
            
            // Get current URL record
            const { data: urlRecord, error: fetchError } = await supabaseAdmin
                .from('discovered_urls')
                .select('processing_attempts, quality_score')
                .eq('url', url)
                .limit(1);
            
            if (fetchError || !urlRecord || urlRecord.length === 0) {
                return;
            }
            
            const current = urlRecord[0];
            const currentAttempts = current.processing_attempts || 0;
            const currentScore = current.quality_score || 0.5;
            
            // Update based on result
            let newScore, newAttempts;
            if (result === 'success') {
                newScore = Math.min(1, currentScore + 0.2); // Increase quality score on success
                newAttempts = currentAttempts;
            } else {
                newScore = Math.max(0, currentScore - 0.3); // Decrease quality score on failure
                newAttempts = currentAttempts + 1;
            }
            
            // Update the record
            await supabaseAdmin
                .from('discovered_urls')
                .update({ 
                    quality_score: newScore,
                    processing_attempts: newAttempts,
                    last_processed_at: new Date().toISOString()
                })
                .eq('url', url);
            
        } catch (error) {
            console.warn(`Could not update URL quality score for ${url}:`, error);
        }
    }</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/test-job-fetch.js (Line 3:1 - Line 19:13), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/safe-convert-discovered-to-jobs.js (Line 8:1 - Line 23:10)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn164" onclick="toggleCodeBlock('cloneGroup164', 'expandBtn164', 'collapseBtn164')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn164" onclick="toggleCodeBlock('cloneGroup164', 'expandBtn164', 'collapseBtn164')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup164"><code class="language-javascript text-sm text-gray-800">import dotenv from 'dotenv';
dotenv.config({ path: '.env.local' });

import { createClient } from '@supabase/supabase-js';

// Initialize Supabase with environment variables
const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
const serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;

if (!supabaseUrl || !serviceRoleKey) {
  console.error('❌ Missing Supabase credentials! Need both NEXT_PUBLIC_SUPABASE_URL and SUPABASE_SERVICE_ROLE_KEY');
  process.exit(1);
}

const supabase = createClient(supabaseUrl, serviceRoleKey);

async function testJobFetch</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/simplePipelineAnalysis.mjs (Line 16:49 - Line 46:8), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/test-quality-control.js (Line 22:41 - Line 52:45)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn166" onclick="toggleCodeBlock('cloneGroup166', 'expandBtn166', 'collapseBtn166')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn166" onclick="toggleCodeBlock('cloneGroup166', 'expandBtn166', 'collapseBtn166')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup166"><code class="language-javascript text-sm text-gray-800">);
    
    // Test 1: Check URL quality filtering
    console.log('1. Testing URL quality filtering...');
    
    const testUrls = [
        // Should be filtered out (non-food truck URLs)
        'https://www.facebook.com/foodtruck',
        'https://www.instagram.com/foodtruck',
        'https://www.eventbrite.com/food-truck-festival',
        'https://www.cityofcharleston.org/calendar',
        'https://www.reddit.com/r/foodtrucks',
        
        // Should be processed (food truck URLs)
        'https://www.bestfoodtruck.com',
        'https://charlestonfoodtrucks.com',
        'https://www.roaminghunger.com/charleston-food-trucks',
        
        // Should be filtered out (obviously non-food truck)
        'https://www.charleston.gov/news',
        'https://www.charleston.gov/events/calendar',
        'https://www.meetup.com/charleston-foodies',
    ];
    
    for (const url of testUrls) {
        const isFoodTruckUrl = !discoveryEngine.isObviouslyNonFoodTruckUrl(url);
        const result = isFoodTruckUrl ? '✅ WILL PROCESS' : '⏭️  WILL SKIP';
        console.log(`   ${result} ${url}`);
    }
    
    console</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/get-scraping-jobs.js (Line 4:12 - Line 19:32), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/get-truck-count.js (Line 3:9 - Line 18:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn167" onclick="toggleCodeBlock('cloneGroup167', 'expandBtn167', 'collapseBtn167')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn167" onclick="toggleCodeBlock('cloneGroup167', 'expandBtn167', 'collapseBtn167')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup167"><code class="language-javascript text-sm text-gray-800">;

// Load environment variables
dotenv.config({ path: '.env.local' });

const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
const serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;

if (!supabaseUrl || !serviceRoleKey) {
  console.error('❌ Missing Supabase credentials! Need both URL and SERVICE_ROLE_KEY');
  process.exit(1);
}

const supabase = createClient(supabaseUrl, serviceRoleKey);

// Parse command line arguments</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/eslint.config.mjs (Line 237:24 - Line 255:65), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/eslint.config.mjs (Line 212:33 - Line 229:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn168" onclick="toggleCodeBlock('cloneGroup168', 'expandBtn168', 'collapseBtn168')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn168" onclick="toggleCodeBlock('cloneGroup168', 'expandBtn168', 'collapseBtn168')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup168"><code class="language-javascript text-sm text-gray-800">],
    rules: {
      '@typescript-eslint/no-unsafe-argument': 'off',
    },
  },

  {
    files: ['hooks/realtime/**/*.ts', 'hooks/realtime/**/*.tsx'],
    rules: {
      '@typescript-eslint/no-unsafe-assignment': 'off',
      '@typescript-eslint/no-unsafe-call': 'off',
      '@typescript-eslint/no-unsafe-member-access': 'off',
      '@typescript-eslint/no-unsafe-argument': 'off',
      '@typescript-eslint/no-unsafe-return': 'off',
      '@typescript-eslint/no-redundant-type-constituents': 'off',
    },
  },

  // 8. Prettier - must be last to override other formatting rules</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/debugUrlFiltering.js (Line 10:2 - Line 36:68), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/discoveryEngine.js (Line 724:5 - Line 750:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn169" onclick="toggleCodeBlock('cloneGroup169', 'expandBtn169', 'collapseBtn169')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn169" onclick="toggleCodeBlock('cloneGroup169', 'expandBtn169', 'collapseBtn169')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup169"><code class="language-javascript text-sm text-gray-800">isObviouslyNonFoodTruckUrl(url) {
    const nonFoodTruckPatterns = [
        /\/events?\//i,
        /\/festivals?\//i,
        /\/calendar/i,
        /\/blog/i,
        /\/news/i,
        /\/articles?\//i,
        /\/government/i,
        /\/city\.gov/i,
        /\/municipal/i,
        /\/reddit\.com/i,
        /\/facebook\.com/i,
        /\/instagram\.com/i,
        /\/twitter\.com/i,
        /\/linkedin\.com/i,
        /\/youtube\.com/i,
        /\/yelp\.com/i,
        /\/google\.com\/maps/i,
        /\/foursquare\.com/i,
        /\/tripadvisor\.com/i,
        /\/zomato\.com/i,
        /\/eventbrite\.com/i,
        /\/meetup\.com/i,
    ];
    
    // Also check for blacklist keywords like the discovery engine does</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/check-discovered-urls.js (Line 1:1 - Line 11:34), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/get-truck-count.js (Line 2:1 - Line 12:69)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn170" onclick="toggleCodeBlock('cloneGroup170', 'expandBtn170', 'collapseBtn170')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn170" onclick="toggleCodeBlock('cloneGroup170', 'expandBtn170', 'collapseBtn170')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup170"><code class="language-javascript text-sm text-gray-800">import { createClient } from '@supabase/supabase-js';
import dotenv from 'dotenv';

// Load environment variables
dotenv.config({ path: '.env.local' });

const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
const serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;

if (!supabaseUrl || !serviceRoleKey) {
  console.error('❌ Missing Supabase credentials!'</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/check-discovered-urls.js (Line 7:1 - Line 17:20), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/merge-page-trucks.js (Line 13:1 - Line 23:12)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn171" onclick="toggleCodeBlock('cloneGroup171', 'expandBtn171', 'collapseBtn171')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn171" onclick="toggleCodeBlock('cloneGroup171', 'expandBtn171', 'collapseBtn171')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup171"><code class="language-javascript text-sm text-gray-800">const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
const serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;

if (!supabaseUrl || !serviceRoleKey) {
  console.error('❌ Missing Supabase credentials!');
  process.exit(1);
}

const supabase = createClient(supabaseUrl, serviceRoleKey);

async function checkDiscoveredUrls</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/apply-rls-fix.js (Line 1:1 - Line 11:53), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/execute-sql.js (Line 1:1 - Line 11:45)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn174" onclick="toggleCodeBlock('cloneGroup174', 'expandBtn174', 'collapseBtn174')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn174" onclick="toggleCodeBlock('cloneGroup174', 'expandBtn174', 'collapseBtn174')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup174"><code class="language-javascript text-sm text-gray-800">import { createClient } from '@supabase/supabase-js';
import { readFileSync } from 'fs';
import dotenv from 'dotenv';

// Load environment variables
dotenv.config({ path: '.env.local' });

const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
const serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;

console.log('🔧 Applying RLS policy fix to food_trucks table...'</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/apply-rls-fix.js (Line 11:53 - Line 28:12), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/execute-sql.js (Line 11:45 - Line 28:19)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn175" onclick="toggleCodeBlock('cloneGroup175', 'expandBtn175', 'collapseBtn175')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn175" onclick="toggleCodeBlock('cloneGroup175', 'expandBtn175', 'collapseBtn175')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup175"><code class="language-javascript text-sm text-gray-800">);
console.log('📍 URL:', supabaseUrl);
console.log('🔑 Service key present:', !!serviceRoleKey);

if (!supabaseUrl || !serviceRoleKey) {
  console.error('❌ Missing Supabase credentials! Need both URL and SERVICE_ROLE_KEY');
  process.exit(1);
}

// Create client with service role key (has admin permissions)
const supabase = createClient(supabaseUrl, serviceRoleKey, {
  auth: {
    autoRefreshToken: false,
    persistSession: false
  }
});

async function applyRLSFix</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/analyzePipelineQuality.js (Line 13:1 - Line 58:30), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/debugUrlFiltering.js (Line 10:1 - Line 55:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn176" onclick="toggleCodeBlock('cloneGroup176', 'expandBtn176', 'collapseBtn176')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn176" onclick="toggleCodeBlock('cloneGroup176', 'expandBtn176', 'collapseBtn176')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup176"><code class="language-javascript text-sm text-gray-800">function isObviouslyNonFoodTruckUrl(url) {
    const nonFoodTruckPatterns = [
        /\/events?\//i,
        /\/festivals?\//i,
        /\/calendar/i,
        /\/blog/i,
        /\/news/i,
        /\/articles?\//i,
        /\/government/i,
        /\/city\.gov/i,
        /\/municipal/i,
        /\/reddit\.com/i,
        /\/facebook\.com/i,
        /\/instagram\.com/i,
        /\/twitter\.com/i,
        /\/linkedin\.com/i,
        /\/youtube\.com/i,
        /\/yelp\.com/i,
        /\/google\.com\/maps/i,
        /\/foursquare\.com/i,
        /\/tripadvisor\.com/i,
        /\/zomato\.com/i,
        /\/eventbrite\.com/i,
        /\/meetup\.com/i,
    ];
    
    // Also check for blacklist keywords like the discovery engine does
    const blacklistKeywords = [
        'facebook.com',
        'instagram.com',
        'twitter.com',
        'linkedin.com',
        'youtube.com',
        'yelp.com',
        'google.com',
        'maps.google.com',
        'foursquare.com',
        'tripadvisor.com',
        'zomato.com',
        'eventbrite.com',
        'meetup.com',
    ];
    
    const urlLower = url.toLowerCase();
    
    // Check regex patterns first</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/analyze-pipeline-quality.js (Line 1:1 - Line 42:6), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/analyzePipelineQuality.js (Line 1:1 - Line 754:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn177" onclick="toggleCodeBlock('cloneGroup177', 'expandBtn177', 'collapseBtn177')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn177" onclick="toggleCodeBlock('cloneGroup177', 'expandBtn177', 'collapseBtn177')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup177"><code class="language-javascript text-sm text-gray-800">#!/usr/bin/env node

/**
 * Analyze Pipeline Quality Control
 * 
 * This script analyzes the quality control improvements made to the food truck discovery pipeline.
 */

import dotenv from 'dotenv';
dotenv.config({ path: '.env.local' });

// Simple test of the core filtering logic without database dependencies
function isObviouslyNonFoodTruckUrl(url) {
    const nonFoodTruckPatterns = [
        /\/events?\//i,
        /\/festivals?\//i,
        /\/calendar/i,
        /\/blog/i,
        /\/news/i,
        /\/articles?\//i,
        /\/government/i,
        /\/city\.gov/i,
        /\/municipal/i,
        /\/reddit\.com/i,
        /\/facebook\.com/i,
        /\/instagram\.com/i,
        /\/twitter\.com/i,
        /\/linkedin\.com/i,
        /\/youtube\.com/i,
        /\/yelp\.com/i,
        /\/google\.com\/maps/i,
        /\/foursquare\.com/i,
        /\/tripadvisor\.com/i,
        /\/zomato\.com/i,
        /\/eventbrite\.com/i,
        /\/meetup\.com/i,
    ];
    
    return nonFoodTruckPatterns.some(pattern =&gt; pattern.test(url));
}

async</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/analyze-pipeline-quality.js (Line 39:4 - Line 68:15), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/analyzePipelineQuality.js (Line 64:8 - Line 93:11)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn178" onclick="toggleCodeBlock('cloneGroup178', 'expandBtn178', 'collapseBtn178')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn178" onclick="toggleCodeBlock('cloneGroup178', 'expandBtn178', 'collapseBtn178')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup178"><code class="language-javascript text-sm text-gray-800">));
}

async function analyzePipelineQuality() {
    console.log('🧪 Analyzing Pipeline Quality Control...\n');
    
    // Test URL quality filtering
    console.log('1. Testing URL quality filtering...');
    
    const testUrls = [
        // Should be filtered out (non-food truck URLs)
        'https://www.facebook.com/foodtruck',
        'https://www.instagram.com/foodtruck',
        'https://www.eventbrite.com/food-truck-festival',
        'https://www.cityofcharleston.org/calendar',
        'https://www.reddit.com/r/foodtrucks',
        
        // Should be processed (food truck URLs)
        'https://www.bestfoodtruck.com',
        'https://charlestonfoodtrucks.com',
        'https://www.roaminghunger.com/charleston-food-trucks',
        
        // Should be filtered out (obviously non-food truck)
        'https://www.charleston.gov/news',
        'https://www.charleston.gov/events/calendar',
        'https://www.meetup.com/charleston-foodies',
    ];
    
    for (const url of testUrls) {
        const isFoodTruckUrl</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/analyze-pipeline-quality.js (Line 46:5 - Line 68:27), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/test-quality-control.js (Line 25:5 - Line 47:16)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn179" onclick="toggleCodeBlock('cloneGroup179', 'expandBtn179', 'collapseBtn179')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn179" onclick="toggleCodeBlock('cloneGroup179', 'expandBtn179', 'collapseBtn179')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup179"><code class="language-javascript text-sm text-gray-800">console.log('1. Testing URL quality filtering...');
    
    const testUrls = [
        // Should be filtered out (non-food truck URLs)
        'https://www.facebook.com/foodtruck',
        'https://www.instagram.com/foodtruck',
        'https://www.eventbrite.com/food-truck-festival',
        'https://www.cityofcharleston.org/calendar',
        'https://www.reddit.com/r/foodtrucks',
        
        // Should be processed (food truck URLs)
        'https://www.bestfoodtruck.com',
        'https://charlestonfoodtrucks.com',
        'https://www.roaminghunger.com/charleston-food-trucks',
        
        // Should be filtered out (obviously non-food truck)
        'https://www.charleston.gov/news',
        'https://www.charleston.gov/events/calendar',
        'https://www.meetup.com/charleston-foodies',
    ];
    
    for (const url of testUrls) {
        const isFoodTruckUrl = !isObviouslyNonFoodTruckUrl</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/analyze-pipeline-quality.js (Line 69:16 - Line 105:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/analyzePipelineQuality.js (Line 94:17 - Line 130:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn180" onclick="toggleCodeBlock('cloneGroup180', 'expandBtn180', 'collapseBtn180')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn180" onclick="toggleCodeBlock('cloneGroup180', 'expandBtn180', 'collapseBtn180')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup180"><code class="language-javascript text-sm text-gray-800">;
        console.log(`   ${result} ${url}`);
    }
    
    console.log('\n✅ Pipeline quality control analysis completed');
    
    console.log('\n📋 Summary of Quality Control Improvements:');
    console.log('   🚫 URL Quality Filtering:');
    console.log('      - Non-food truck URLs are properly filtered out');
    console.log('      - Social media and event sites are automatically skipped');
    console.log('      - Government and news sites are filtered');
    console.log('      - Resource waste is prevented');
    
    console.log('\n   📊 URL Quality Scoring:');
    console.log('      - Success increases quality score (+0.2)');
    console.log('      - Failure decreases quality score (-0.3)');
    console.log('      - Processing attempts are tracked');
    console.log('      - Blacklisting prevents repeated failures');
    
    console.log('\n   🎯 Pipeline Improvements:');
    console.log('      - &quot;Unknown Food Truck&quot; entries eliminated');
    console.log('      - Null/empty names are properly discarded');
    console.log('      - Pre-filtering prevents storing invalid URLs');
    console.log('      - The pipeline is more efficient and accurate');
    
    console.log('\n   📈 Impact:');
    console.log('      - Reduced database bloat');
    console.log('      - Lower API usage costs');
    console.log('      - Better data quality');
    console.log('      - More reliable scraping results');
}

// Run the analysis
analyzePipelineQuality().catch(error =&gt; {
    console.error('❌ Analysis failed:', error);
    process.exit(1);
});</code></pre></div><!-- Add more clone groups for .txt format as needed         // Add more clone groups for .txt format as needed--></div><a name="tsx-clones"></a><h2 class="text-2xl font-semibold text-gray-700 mb-4">tsx</h2><div class="divide-y divide-gray-200 border-b-2"><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/staging/ui-specialist-1/components/ui/Modal/index.tsx (Line 137:9 - Line 150:29), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/staging/ui-specialist-1/components/ui/Modal/index.tsx (Line 78:9 - Line 91:32)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn0" onclick="toggleCodeBlock('cloneGroup0', 'expandBtn0', 'collapseBtn0')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn0" onclick="toggleCodeBlock('cloneGroup0', 'expandBtn0', 'collapseBtn0')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup0"><code class="language-tsx text-sm text-gray-800">&lt;/DialogFooter&gt;
      )}
      
      {showCloseButton &amp;&amp; (
        &lt;DialogClose className=&quot;absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none&quot;&gt;
          &lt;X className=&quot;size-4&quot; /&gt;
          &lt;span className=&quot;sr-only&quot;&gt;Close&lt;/span&gt;
        &lt;/DialogClose&gt;
      )}
    &lt;/DialogContent&gt;
  &lt;/Dialog&gt;
);

// Form Modal Implementation</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/staging/ui-specialist-1/components/ui/Modal/index.tsx (Line 286:13 - Line 299:45), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/staging/ui-specialist-1/components/ui/Modal/index.tsx (Line 217:5 - Line 230:37)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn1" onclick="toggleCodeBlock('cloneGroup1', 'expandBtn1', 'collapseBtn1')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn1" onclick="toggleCodeBlock('cloneGroup1', 'expandBtn1', 'collapseBtn1')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup1"><code class="language-tsx text-sm text-gray-800">&gt;
        
        {showCloseButton &amp;&amp; (
          &lt;DialogClose className=&quot;absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none&quot;&gt;
            &lt;X className=&quot;size-4&quot; /&gt;
            &lt;span className=&quot;sr-only&quot;&gt;Close&lt;/span&gt;
          &lt;/DialogClose&gt;
        )}
      &lt;/DialogContent&gt;
    &lt;/Dialog&gt;
  );
};

// Main Modal Component with variant routing</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/components/admin/realtime/RealtimeStatusDisplay.tsx (Line 98:5 - Line 156:4), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/components/admin/realtime/RealtimeStatusDisplay.tsx (Line 12:10 - Line 60:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn5" onclick="toggleCodeBlock('cloneGroup5', 'expandBtn5', 'collapseBtn5')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn5" onclick="toggleCodeBlock('cloneGroup5', 'expandBtn5', 'collapseBtn5')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup5"><code class="language-tsx text-sm text-gray-800">;
  readonly systemMetrics: StatusMetric[];
  readonly scrapingJobs:
    | {
        active: number;
        completed: number;
        failed: number;
        pending: number;
      }
    | undefined;
  readonly alerts: SystemAlert[];
  readonly showDetails: boolean;
  readonly onToggleDetails: () =&gt; void;
  readonly onAcknowledgeAlert: (alertId: string) =&gt; void;
  readonly recentEventsCount: number;
  readonly onClearEvents: () =&gt; void;
}

/**
 * Displays the realtime status of a connection with various metrics and controls.
 * @example
 * RealtimeStatusDisplay({
 *   isConnected: false,
 *   isConnecting: true,
 *   connectionError: &quot;Timeout&quot;,
 *   lastEventTime: 1638349200000,
 *   connect: () =&gt; {},
 *   disconnect: () =&gt; {},
 *   systemMetrics: {},
 *   scrapingJobs: [],
 *   alerts: [],
 *   showDetails: false,
 *   onToggleDetails: () =&gt; {},
 *   onAcknowledgeAlert: () =&gt; {},
 *   recentEventsCount: 5,
 *   onClearEvents: () =&gt; {}
 * })
 * &lt;div&gt;...&lt;/div&gt;
 * @param {Object} props - Props object containing configuration for the display.
 * @param {boolean} props.isConnected - Connection status, true if currently connected.
 * @param {boolean} props.isConnecting - Connection initiation status, true if attempting to connect.
 * @param {string} props.connectionError - Description of the last encountered connection error.
 * @param {number} props.lastEventTime - Unix timestamp of the last event occurrence.
 * @param {function} props.connect - Function to initiate a connection.
 * @param {function} props.disconnect - Function to terminate the connection.
 * @param {Object} props.systemMetrics - Metrics data related to the system.
 * @param {Array} props.scrapingJobs - List of ongoing or past scraping jobs.
 * @param {Array} props.alerts - Array of alerts that have been triggered.
 * @param {boolean} props.showDetails - Flag to show detailed status information.
 * @param {function} props.onToggleDetails - Callback function to toggle detailed view.
 * @param {function} props.onAcknowledgeAlert - Function to acknowledge a specific alert.
 * @param {number} props.recentEventsCount - Count of recent events to display.
 * @param {function} props.onClearEvents - Callback function to clear the list of events.
 * @returns {JSX.Element} React component rendering the realtime status card.
 * @description
 *   - Utilizes conditional styling to indicate connection status through border color.
 *   - Last event time is formatted and passed as a Date object.
 *   - Component structure comprises a header for status and a content section for metrics and actions.
 */</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/app/admin/events/page.tsx (Line 202:17 - Line 220:7), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/app/admin/events/page.tsx (Line 138:2 - Line 156:29)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn9" onclick="toggleCodeBlock('cloneGroup9', 'expandBtn9', 'collapseBtn9')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn9" onclick="toggleCodeBlock('cloneGroup9', 'expandBtn9', 'collapseBtn9')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup9"><code class="language-tsx text-sm text-gray-800">&lt;/TableCell&gt;
                &lt;TableCell className=&quot;text-right&quot;&gt;
                  &lt;Button asChild&gt;
                    &lt;Link href={`/admin/schedules/${schedule.id}`}&gt;
                      &lt;Edit className=&quot;size-4&quot; /&gt;
                      &lt;span className=&quot;sr-only&quot;&gt;Edit&lt;/span&gt;
                    &lt;/Link&gt;
                  &lt;/Button&gt;
                &lt;/TableCell&gt;
              &lt;/TableRow&gt;
            ))}
          &lt;/TableBody&gt;
        &lt;/Table&gt;
      &lt;/CardContent&gt;
    &lt;/Card&gt;
  );
}

export</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/app/admin/data-quality/page.tsx (Line 144:6 - Line 154:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/app/admin/food-trucks/page.tsx (Line 100:4 - Line 109:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn10" onclick="toggleCodeBlock('cloneGroup10', 'expandBtn10', 'collapseBtn10')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn10" onclick="toggleCodeBlock('cloneGroup10', 'expandBtn10', 'collapseBtn10')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup10"><code class="language-tsx text-sm text-gray-800">&gt;
      &lt;/TableCell&gt;
      &lt;TableCell&gt;
        {truck.last_scraped_at == undefined
          ? 'N/A'
          : new Date(truck.last_scraped_at).toLocaleDateString()}
      &lt;/TableCell&gt;
      &lt;TableCell className=&quot;text-right&quot;&gt;
        &lt;Button asChild&gt;
          &lt;Link href={`/admin/food-trucks/${truck.id}`}&gt;
            &lt;</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/__tests__/components/TruckContactInfo.test.tsx (Line 73:42 - Line 89:20), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/__tests__/components/TruckContactInfo.test.tsx (Line 46:44 - Line 62:22)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn12" onclick="toggleCodeBlock('cloneGroup12', 'expandBtn12', 'collapseBtn12')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn12" onclick="toggleCodeBlock('cloneGroup12', 'expandBtn12', 'collapseBtn12')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup12"><code class="language-tsx text-sm text-gray-800">, () =&gt; {
      const truck = createMockTruck({
        contact_info: {
          phone: '(555) 123-4567',
          email: 'test@example.com',
          website: 'https://example.com'
        },
        social_media: {
          instagram: 'test_insta',
          facebook: 'test_fb',
          twitter: 'test_tw'
        }
      });

      render(&lt;TruckContactInfo truck={truck} /&gt;);

      // Check phone link</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/__tests__/components/TruckContactInfo.test.tsx (Line 132:7 - Line 141:66), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/__tests__/components/TruckContactInfo.test.tsx (Line 119:7 - Line 128:54)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn13" onclick="toggleCodeBlock('cloneGroup13', 'expandBtn13', 'collapseBtn13')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn13" onclick="toggleCodeBlock('cloneGroup13', 'expandBtn13', 'collapseBtn13')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup13"><code class="language-tsx text-sm text-gray-800">});

      render(&lt;TruckContactInfo truck={truck} /&gt;);

      expect(screen.getByText('No phone number available')).toBeInTheDocument();
      expect(screen.getByText('No email available')).toBeInTheDocument();
      expect(screen.getByText('No website available')).toBeInTheDocument();
    });

    it('renders fallback messages when contact fields are empty strings'</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/__tests__/components/TruckContactInfo.test.tsx (Line 149:7 - Line 158:70), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/__tests__/components/TruckContactInfo.test.tsx (Line 119:7 - Line 128:54)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn14" onclick="toggleCodeBlock('cloneGroup14', 'expandBtn14', 'collapseBtn14')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn14" onclick="toggleCodeBlock('cloneGroup14', 'expandBtn14', 'collapseBtn14')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup14"><code class="language-tsx text-sm text-gray-800">});

      render(&lt;TruckContactInfo truck={truck} /&gt;);

      expect(screen.getByText('No phone number available')).toBeInTheDocument();
      expect(screen.getByText('No email available')).toBeInTheDocument();
      expect(screen.getByText('No website available')).toBeInTheDocument();
    });

    it('does not render social media section when social_media is undefined'</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/__tests__/components/TruckContactInfo.test.tsx (Line 277:7 - Line 287:16), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/__tests__/components/TruckContactInfo.test.tsx (Line 164:7 - Line 174:35)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn15" onclick="toggleCodeBlock('cloneGroup15', 'expandBtn15', 'collapseBtn15')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn15" onclick="toggleCodeBlock('cloneGroup15', 'expandBtn15', 'collapseBtn15')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup15"><code class="language-tsx text-sm text-gray-800">});

      render(&lt;TruckContactInfo truck={truck} /&gt;);

      expect(screen.queryByText('Instagram')).not.toBeInTheDocument();
      expect(screen.queryByText('Facebook')).not.toBeInTheDocument();
      expect(screen.queryByText('Twitter')).not.toBeInTheDocument();
    });
  });

  describe('accessibility'</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/__tests__/components/TruckContactInfo.test.tsx (Line 372:2 - Line 380:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/__tests__/components/TruckContactInfo.test.tsx (Line 119:2 - Line 128:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn16" onclick="toggleCodeBlock('cloneGroup16', 'expandBtn16', 'collapseBtn16')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn16" onclick="toggleCodeBlock('cloneGroup16', 'expandBtn16', 'collapseBtn16')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup16"><code class="language-tsx text-sm text-gray-800">;

      render(&lt;TruckContactInfo truck={truck} /&gt;);

      expect(screen.getByText('No phone number available')).toBeInTheDocument();
      expect(screen.getByText('No email available')).toBeInTheDocument();
      expect(screen.getByText('No website available')).toBeInTheDocument();
    });
  }</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/__tests__/components/SocialMediaSection.test.tsx (Line 158:2 - Line 163:56), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/__tests__/components/SocialMediaSection.test.tsx (Line 144:2 - Line 149:57)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn17" onclick="toggleCodeBlock('cloneGroup17', 'expandBtn17', 'collapseBtn17')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn17" onclick="toggleCodeBlock('cloneGroup17', 'expandBtn17', 'collapseBtn17')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup17"><code class="language-tsx text-sm text-gray-800">})).not.toBeInTheDocument();
      expect(screen.queryByRole('link', { name: /twitter/i })).not.toBeInTheDocument();
      expect(screen.queryByText('No social media profiles available')).not.toBeInTheDocument();
    });

    it('renders only Twitter when other platforms are missing'</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/__tests__/components/SocialMediaSection.test.tsx (Line 177:55 - Line 192:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/__tests__/components/SocialMediaSection.test.tsx (Line 135:58 - Line 146:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn18" onclick="toggleCodeBlock('cloneGroup18', 'expandBtn18', 'collapseBtn18')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn18" onclick="toggleCodeBlock('cloneGroup18', 'expandBtn18', 'collapseBtn18')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup18"><code class="language-tsx text-sm text-gray-800">, () =&gt; {
      render(
        &lt;SocialMediaSection
          socialMedia={{ 
            instagram: 'valid_user',
            facebook: '',
            twitter: '   '
          }}
          showFallback={true}
        /&gt;
      );
      
      expect(screen.getByRole('link', { name: /instagram/i })).toBeInTheDocument();
      expect(screen.queryByRole('link', { name: /facebook/i })).not.toBeInTheDocument();
      expect(screen.queryByRole('link', { name: /twitter/i })).not.toBeInTheDocument();
    }</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/__tests__/components/ComponentRendering.test.tsx (Line 66:7 - Line 72:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/__tests__/components/TruckContactInfo.test.tsx (Line 121:7 - Line 381:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn19" onclick="toggleCodeBlock('cloneGroup19', 'expandBtn19', 'collapseBtn19')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn19" onclick="toggleCodeBlock('cloneGroup19', 'expandBtn19', 'collapseBtn19')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup19"><code class="language-tsx text-sm text-gray-800">render(&lt;TruckContactInfo truck={{ contact_info: undefined, social_media: undefined } as any} /&gt;);
      expect(screen.getByText('No phone number available')).toBeInTheDocument();
      expect(screen.getByText('No email available')).toBeInTheDocument();
      expect(screen.getByText('No website available')).toBeInTheDocument();
    });
  });
});</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/fallback/supabaseFallback.test.tsx (Line 72:77 - Line 80:42), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/fallback/supabaseFallback.test.tsx (Line 48:57 - Line 56:26)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn27" onclick="toggleCodeBlock('cloneGroup27', 'expandBtn27', 'collapseBtn27')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn27" onclick="toggleCodeBlock('cloneGroup27', 'expandBtn27', 'collapseBtn27')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup27"><code class="language-tsx text-sm text-gray-800">, async () =&gt; {
    // Mock the supabase client to simulate an error
    supabaseFallback.supabase.from = jest.fn().mockReturnValue({
      select: jest.fn().mockReturnValue({
        abortSignal: jest.fn().mockRejectedValue(new Error('Supabase error')),
      }),
    });

    // Pre-populate the cache with stale data</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/fallback/supabaseFallback.test.tsx (Line 84:5 - Line 91:8), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/fallback/supabaseFallback.test.tsx (Line 60:2 - Line 67:9)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn28" onclick="toggleCodeBlock('cloneGroup28', 'expandBtn28', 'collapseBtn28')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn28" onclick="toggleCodeBlock('cloneGroup28', 'expandBtn28', 'collapseBtn28')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup28"><code class="language-tsx text-sm text-gray-800">).toLocaleString(),
    };
    window.localStorage.setItem('food-trucks-cache', JSON.stringify(cachedData));

    render(&lt;TestComponent /&gt;);

    await waitFor(() =&gt; {
      expect(screen.getByTestId('status')).toHaveTextContent('stale'</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/fallback/supabaseFallback.test.tsx (Line 96:83 - Line 104:9), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/fallback/supabaseFallback.test.tsx (Line 48:57 - Line 56:26)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn29" onclick="toggleCodeBlock('cloneGroup29', 'expandBtn29', 'collapseBtn29')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn29" onclick="toggleCodeBlock('cloneGroup29', 'expandBtn29', 'collapseBtn29')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup29"><code class="language-tsx text-sm text-gray-800">, async () =&gt; {
    // Mock the supabase client to simulate an error
    supabaseFallback.supabase.from = jest.fn().mockReturnValue({
      select: jest.fn().mockReturnValue({
        abortSignal: jest.fn().mockRejectedValue(new Error('Supabase error')),
      }),
    });

    function</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/fallback/supabaseFallback.test.tsx (Line 104:25 - Line 110:7), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/lib/fallback/supabaseFallback.test.tsx (Line 19:14 - Line 25:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn30" onclick="toggleCodeBlock('cloneGroup30', 'expandBtn30', 'collapseBtn30')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn30" onclick="toggleCodeBlock('cloneGroup30', 'expandBtn30', 'collapseBtn30')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup30"><code class="language-tsx text-sm text-gray-800">() {
      const { trucks, loading, dataStatus } = useFoodTrucks();
      if (loading) return &lt;div&gt;Loading...&lt;/div&gt;;
      return (
        &lt;div&gt;
          &lt;div data-testid=&quot;status&quot;&gt;{dataStatus.status}&lt;/div&gt;
          {trucks.length</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/components/ui/badge.tsx (Line 1:1 - Line 17:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/staging/ui-specialist-2/components/ui/OptimizedBadge.tsx (Line 1:1 - Line 17:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn39" onclick="toggleCodeBlock('cloneGroup39', 'expandBtn39', 'collapseBtn39')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn39" onclick="toggleCodeBlock('cloneGroup39', 'expandBtn39', 'collapseBtn39')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup39"><code class="language-tsx text-sm text-gray-800">import * as React from 'react';
import { type VariantProps } from 'tailwind-variants';

import { cn } from '@/lib/utils';
import { badgeVariants } from './variants';

export interface BadgeProps
  extends React.HTMLAttributes&lt;HTMLDivElement&gt;,
    VariantProps&lt;typeof badgeVariants&gt; {}

function Badge({ className, variant, ...props }: BadgeProps) {
  return (
    &lt;div className={cn(badgeVariants({ variant }), className)} {...props} /&gt;
  );
}

export { Badge };</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/components/monitoring/FeatureList.tsx (Line 31:17 - Line 38:6), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/app/admin/data-cleanup/page.tsx (Line 154:2 - Line 161:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn40" onclick="toggleCodeBlock('cloneGroup40', 'expandBtn40', 'collapseBtn40')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn40" onclick="toggleCodeBlock('cloneGroup40', 'expandBtn40', 'collapseBtn40')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup40"><code class="language-tsx text-sm text-gray-800">) {
  return (
    &lt;div className=&quot;space-y-3&quot;&gt;
      &lt;h4 className=&quot;font-semibold text-sm&quot;&gt;{title}&lt;/h4&gt;
      &lt;ul className=&quot;space-y-2 text-sm text-muted-foreground&quot;&gt;
        {items.map((item, index) =&gt; (
          &lt;li key={index} className=&quot;flex items-center gap-2&quot;&gt;
            {React</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/components/map/MapComponent.tsx (Line 32:2 - Line 40:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/components/map/MapViewUpdater.tsx (Line 10:2 - Line 18:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn41" onclick="toggleCodeBlock('cloneGroup41', 'expandBtn41', 'collapseBtn41')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn41" onclick="toggleCodeBlock('cloneGroup41', 'expandBtn41', 'collapseBtn41')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup41"><code class="language-tsx text-sm text-gray-800">{
  const map = useMap();
  useEffect(() =&gt; {
    if (center) {
      map.flyTo(center, zoom ?? map.getZoom());
    }
  }, [center, zoom, map]);
  return &lt;&gt;&lt;/&gt;;
}</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/components/map/MapComponent.tsx (Line 177:2 - Line 188:3), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/components/map/TruckMarkers.tsx (Line 55:14 - Line 66:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn42" onclick="toggleCodeBlock('cloneGroup42', 'expandBtn42', 'collapseBtn42')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn42" onclick="toggleCodeBlock('cloneGroup42', 'expandBtn42', 'collapseBtn42')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup42"><code class="language-tsx text-sm text-gray-800">}
            eventHandlers={{
              click: () =&gt; {
                if (onSelectTruck) {
                  onSelectTruck(truck.id);
                }
              },
            }}
          &gt;
            &lt;Popup&gt;
              &lt;h4 className=&quot;font-bold&quot;&gt;{truck.name}&lt;/h4&gt;
              {truck.current_location.address &amp;&amp;</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/app/owner-dashboard/page.tsx (Line 1:1 - Line 11:6), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/app/user-dashboard/page.tsx (Line 1:1 - Line 11:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn43" onclick="toggleCodeBlock('cloneGroup43', 'expandBtn43', 'collapseBtn43')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn43" onclick="toggleCodeBlock('cloneGroup43', 'expandBtn43', 'collapseBtn43')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup43"><code class="language-tsx text-sm text-gray-800">'use client';

import { useState, useEffect } from 'react';
import { supabase } from '@/lib/supabase';
import { 
  Card, CardContent, CardDescription, CardHeader, CardTitle,
  Button, Badge
} from '@/lib/admin/shared-admin-imports';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import { Alert, AlertDescription } from '@/components/ui/alert';
import { Truck</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/app/owner-dashboard/page.tsx (Line 43:12 - Line 49:14), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/app/user-dashboard/page.tsx (Line 36:18 - Line 42:13)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn44" onclick="toggleCodeBlock('cloneGroup44', 'expandBtn44', 'collapseBtn44')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn44" onclick="toggleCodeBlock('cloneGroup44', 'expandBtn44', 'collapseBtn44')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup44"><code class="language-tsx text-sm text-gray-800">] = useState&lt;FoodTruck[]&gt;([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState&lt;string | null&gt;(null);
  const router = useRouter();

  useEffect(() =&gt; {
    async function loadOwnerData</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/app/owner-dashboard/page.tsx (Line 49:14 - Line 72:19), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/app/user-dashboard/page.tsx (Line 42:13 - Line 65:11)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn45" onclick="toggleCodeBlock('cloneGroup45', 'expandBtn45', 'collapseBtn45')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn45" onclick="toggleCodeBlock('cloneGroup45', 'expandBtn45', 'collapseBtn45')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup45"><code class="language-tsx text-sm text-gray-800">() {
      try {
        setLoading(true);
        
        // Get current user
        const { data: { user }, error: userError } = await supabase.auth.getUser();
        if (userError || !user) {
          router.push('/login');
          return;
        }

        // Get user profile
        const { data: profileData, error: profileError } = await supabase
          .from('profiles')
          .select('*')
          .eq('id', user.id)
          .single();

        if (profileError) {
          setError('Failed to load profile');
          return;
        }

        if (profileData.role !== 'food_truck_owner'</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/app/owner-dashboard/page.tsx (Line 100:14 - Line 136:6), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/app/user-dashboard/page.tsx (Line 93:13 - Line 129:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn46" onclick="toggleCodeBlock('cloneGroup46', 'expandBtn46', 'collapseBtn46')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn46" onclick="toggleCodeBlock('cloneGroup46', 'expandBtn46', 'collapseBtn46')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup46"><code class="language-tsx text-sm text-gray-800">();
  }, [router]);

  async function handleSignOut() {
    await supabase.auth.signOut();
    router.push('/login');
  }

  if (loading) {
    return (
      &lt;div className=&quot;min-h-screen flex items-center justify-center&quot;&gt;
        &lt;div className=&quot;text-center&quot;&gt;
          &lt;div className=&quot;animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4&quot;&gt;&lt;/div&gt;
          &lt;p&gt;Loading your dashboard...&lt;/p&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    );
  }

  if (error) {
    return (
      &lt;div className=&quot;min-h-screen flex items-center justify-center p-4&quot;&gt;
        &lt;Alert className=&quot;max-w-md&quot;&gt;
          &lt;AlertDescription&gt;{error}&lt;/AlertDescription&gt;
        &lt;/Alert&gt;
      &lt;/div&gt;
    );
  }

  return (
    &lt;div className=&quot;min-h-screen bg-background&quot;&gt;
      {/* Header */}
      &lt;header className=&quot;border-b bg-white shadow-sm&quot;&gt;
        &lt;div className=&quot;max-w-7xl mx-auto px-4 sm:px-6 lg:px-8&quot;&gt;
          &lt;div className=&quot;flex justify-between items-center h-16&quot;&gt;
            &lt;div className=&quot;flex items-center space-x-4&quot;&gt;
              &lt;Truck</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/app/owner-dashboard/page.tsx (Line 270:38 - Line 284:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/app/user-dashboard/page.tsx (Line 187:38 - Line 201:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn47" onclick="toggleCodeBlock('cloneGroup47', 'expandBtn47', 'collapseBtn47')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn47" onclick="toggleCodeBlock('cloneGroup47', 'expandBtn47', 'collapseBtn47')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup47"><code class="language-tsx text-sm text-gray-800">&quot;&gt;
                        &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                          &lt;MapPin className=&quot;h-4 w-4 text-muted-foreground&quot; /&gt;
                          &lt;span className=&quot;text-sm&quot;&gt;
                            {truck.current_location?.address || 'Location not set'}
                          &lt;/span&gt;
                        &lt;/div&gt;
                        &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                          &lt;Star className=&quot;h-4 w-4 text-muted-foreground&quot; /&gt;
                          &lt;span className=&quot;text-sm&quot;&gt;
                            {truck.average_rating?.toFixed(1) || 'No ratings'} 
                            {truck.review_count ? ` (${truck.review_count} reviews)` : ''}
                          &lt;/span&gt;
                        &lt;/div&gt;
                        &lt;</code></pre></div><!-- Add more clone groups for .txt format as needed         // Add more clone groups for .txt format as needed--></div><a name="css-clones"></a><h2 class="text-2xl font-semibold text-gray-700 mb-4">css</h2><div class="divide-y divide-gray-200 border-b-2"><!-- Add more clone groups for .txt format as needed         // Add more clone groups for .txt format as needed--></div><a name="json-clones"></a><h2 class="text-2xl font-semibold text-gray-700 mb-4">json</h2><div class="divide-y divide-gray-200 border-b-2"><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/jscpd-report.json/jscpd-report.json (Line 1:1 - Line 228:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/jscpd-report.json/html/jscpd-report.json (Line 1:1 - Line 227:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn163" onclick="toggleCodeBlock('cloneGroup163', 'expandBtn163', 'collapseBtn163')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn163" onclick="toggleCodeBlock('cloneGroup163', 'expandBtn163', 'collapseBtn163')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup163"><code class="language-json text-sm text-gray-800">{
  &quot;statistics&quot;: {
    &quot;detectionDate&quot;: &quot;2025-08-02T22:24:09.116Z&quot;,
    &quot;formats&quot;: {
      &quot;json&quot;: {
        &quot;sources&quot;: {
          &quot;C:/AI/food-truck-finder-poc/.vscode/settings.json&quot;: {
            &quot;lines&quot;: 23,
            &quot;tokens&quot;: 98,
            &quot;sources&quot;: 1,
            &quot;clones&quot;: 0,
            &quot;duplicatedLines&quot;: 0,
            &quot;duplicatedTokens&quot;: 0,
            &quot;percentage&quot;: 0,
            &quot;percentageTokens&quot;: 0,
            &quot;newDuplicatedLines&quot;: 0,
            &quot;newClones&quot;: 0
          },
          &quot;C:/AI/food-truck-finder-poc/.vscode/extensions.json&quot;: {
            &quot;lines&quot;: 4,
            &quot;tokens&quot;: 14,
            &quot;sources&quot;: 1,
            &quot;clones&quot;: 0,
            &quot;duplicatedLines&quot;: 0,
            &quot;duplicatedTokens&quot;: 0,
            &quot;percentage&quot;: 0,
            &quot;percentageTokens&quot;: 0,
            &quot;newDuplicatedLines&quot;: 0,
            &quot;newClones&quot;: 0
          },
          &quot;C:/AI/food-truck-finder-poc/vercel.json&quot;: {
            &quot;lines&quot;: 11,
            &quot;tokens&quot;: 50,
            &quot;sources&quot;: 1,
            &quot;clones&quot;: 0,
            &quot;duplicatedLines&quot;: 0,
            &quot;duplicatedTokens&quot;: 0,
            &quot;percentage&quot;: 0,
            &quot;percentageTokens&quot;: 0,
            &quot;newDuplicatedLines&quot;: 0,
            &quot;newClones&quot;: 0
          },
          &quot;C:/AI/food-truck-finder-poc/tsconfig.node.json&quot;: {
            &quot;lines&quot;: 11,
            &quot;tokens&quot;: 71,
            &quot;sources&quot;: 1,
            &quot;clones&quot;: 0,
            &quot;duplicatedLines&quot;: 0,
            &quot;duplicatedTokens&quot;: 0,
            &quot;percentage&quot;: 0,
            &quot;percentageTokens&quot;: 0,
            &quot;newDuplicatedLines&quot;: 0,
            &quot;newClones&quot;: 0
          },
          &quot;C:/AI/food-truck-finder-poc/tsconfig.lib.json&quot;: {
            &quot;lines&quot;: 19,
            &quot;tokens&quot;: 101,
            &quot;sources&quot;: 1,
            &quot;clones&quot;: 0,
            &quot;duplicatedLines&quot;: 0,
            &quot;duplicatedTokens&quot;: 0,
            &quot;percentage&quot;: 0,
            &quot;percentageTokens&quot;: 0,
            &quot;newDuplicatedLines&quot;: 0,
            &quot;newClones&quot;: 0
          },
          &quot;C:/AI/food-truck-finder-poc/tsconfig.json&quot;: {
            &quot;lines&quot;: 24,
            &quot;tokens&quot;: 184,
            &quot;sources&quot;: 1,
            &quot;clones&quot;: 0,
            &quot;duplicatedLines&quot;: 0,
            &quot;duplicatedTokens&quot;: 0,
            &quot;percentage&quot;: 0,
            &quot;percentageTokens&quot;: 0,
            &quot;newDuplicatedLines&quot;: 0,
            &quot;newClones&quot;: 0
          },
          &quot;C:/AI/food-truck-finder-poc/tsconfig.fix-imports.json&quot;: {
            &quot;lines&quot;: 21,
            &quot;tokens&quot;: 130,
            &quot;sources&quot;: 1,
            &quot;clones&quot;: 0,
            &quot;duplicatedLines&quot;: 0,
            &quot;duplicatedTokens&quot;: 0,
            &quot;percentage&quot;: 0,
            &quot;percentageTokens&quot;: 0,
            &quot;newDuplicatedLines&quot;: 0,
            &quot;newClones&quot;: 0
          },
          &quot;C:/AI/food-truck-finder-poc/tsconfig.base.json&quot;: {
            &quot;lines&quot;: 25,
            &quot;tokens&quot;: 158,
            &quot;sources&quot;: 1,
            &quot;clones&quot;: 0,
            &quot;duplicatedLines&quot;: 0,
            &quot;duplicatedTokens&quot;: 0,
            &quot;percentage&quot;: 0,
            &quot;percentageTokens&quot;: 0,
            &quot;newDuplicatedLines&quot;: 0,
            &quot;newClones&quot;: 0
          },
          &quot;C:/AI/food-truck-finder-poc/tsconfig.action.json&quot;: {
            &quot;lines&quot;: 13,
            &quot;tokens&quot;: 90,
            &quot;sources&quot;: 1,
            &quot;clones&quot;: 0,
            &quot;duplicatedLines&quot;: 0,
            &quot;duplicatedTokens&quot;: 0,
            &quot;percentage&quot;: 0,
            &quot;percentageTokens&quot;: 0,
            &quot;newDuplicatedLines&quot;: 0,
            &quot;newClones&quot;: 0
          },
          &quot;C:/AI/food-truck-finder-poc/package.json&quot;: {
            &quot;lines&quot;: 201,
            &quot;tokens&quot;: 1386,
            &quot;sources&quot;: 1,
            &quot;clones&quot;: 0,
            &quot;duplicatedLines&quot;: 0,
            &quot;duplicatedTokens&quot;: 0,
            &quot;percentage&quot;: 0,
            &quot;percentageTokens&quot;: 0,
            &quot;newDuplicatedLines&quot;: 0,
            &quot;newClones&quot;: 0
          },
          &quot;C:/AI/food-truck-finder-poc/error-analysis.json&quot;: {
            &quot;lines&quot;: 18,
            &quot;tokens&quot;: 112,
            &quot;sources&quot;: 1,
            &quot;clones&quot;: 0,
            &quot;duplicatedLines&quot;: 0,
            &quot;duplicatedTokens&quot;: 0,
            &quot;percentage&quot;: 0,
            &quot;percentageTokens&quot;: 0,
            &quot;newDuplicatedLines&quot;: 0,
            &quot;newClones&quot;: 0
          },
          &quot;C:/AI/food-truck-finder-poc/components.json&quot;: {
            &quot;lines&quot;: 20,
            &quot;tokens&quot;: 144,
            &quot;sources&quot;: 1,
            &quot;clones&quot;: 0,
            &quot;duplicatedLines&quot;: 0,
            &quot;duplicatedTokens&quot;: 0,
            &quot;percentage&quot;: 0,
            &quot;percentageTokens&quot;: 0,
            &quot;newDuplicatedLines&quot;: 0,
            &quot;newClones&quot;: 0
          },
          &quot;C:/AI/food-truck-finder-poc/.jscpd.json&quot;: {
            &quot;lines&quot;: 29,
            &quot;tokens&quot;: 169,
            &quot;sources&quot;: 1,
            &quot;clones&quot;: 0,
            &quot;duplicatedLines&quot;: 0,
            &quot;duplicatedTokens&quot;: 0,
            &quot;percentage&quot;: 0,
            &quot;percentageTokens&quot;: 0,
            &quot;newDuplicatedLines&quot;: 0,
            &quot;newClones&quot;: 0
          },
          &quot;C:/AI/food-truck-finder-poc/.jscpd-github-actions.json&quot;: {
            &quot;lines&quot;: 27,
            &quot;tokens&quot;: 167,
            &quot;sources&quot;: 1,
            &quot;clones&quot;: 0,
            &quot;duplicatedLines&quot;: 0,
            &quot;duplicatedTokens&quot;: 0,
            &quot;percentage&quot;: 0,
            &quot;percentageTokens&quot;: 0,
            &quot;newDuplicatedLines&quot;: 0,
            &quot;newClones&quot;: 0
          },
          &quot;C:/AI/food-truck-finder-poc/.current-metrics.json&quot;: {
            &quot;lines&quot;: 6,
            &quot;tokens&quot;: 36,
            &quot;sources&quot;: 1,
            &quot;clones&quot;: 0,
            &quot;duplicatedLines&quot;: 0,
            &quot;duplicatedTokens&quot;: 0,
            &quot;percentage&quot;: 0,
            &quot;percentageTokens&quot;: 0,
            &quot;newDuplicatedLines&quot;: 0,
            &quot;newClones&quot;: 0
          },
          &quot;C:/AI/food-truck-finder-poc/.cocomo-metrics.json&quot;: {
            &quot;lines&quot;: 55,
            &quot;tokens&quot;: 394,
            &quot;sources&quot;: 1,
            &quot;clones&quot;: 0,
            &quot;duplicatedLines&quot;: 0,
            &quot;duplicatedTokens&quot;: 0,
            &quot;percentage&quot;: 0,
            &quot;percentageTokens&quot;: 0,
            &quot;newDuplicatedLines&quot;: 0,
            &quot;newClones&quot;: 0
          }
        },
        &quot;total&quot;: {
          &quot;lines&quot;: 507,
          &quot;tokens&quot;: 3304,
          &quot;sources&quot;: 16,
          &quot;clones&quot;: 0,
          &quot;duplicatedLines&quot;: 0,
          &quot;duplicatedTokens&quot;: 0,
          &quot;percentage&quot;: 0,
          &quot;percentageTokens&quot;: 0,
          &quot;newDuplicatedLines&quot;: 0,
          &quot;newClones&quot;: 0
        }
      }
    },
    &quot;total&quot;: {
      &quot;lines&quot;: 507,
      &quot;tokens&quot;: 3304,
      &quot;sources&quot;: 16,
      &quot;clones&quot;: 0,
      &quot;duplicatedLines&quot;: 0,
      &quot;duplicatedTokens&quot;: 0,
      &quot;percentage&quot;: 0,
      &quot;percentageTokens&quot;: 0,
      &quot;newDuplicatedLines&quot;: 0,
      &quot;newClones&quot;: 0
    }
  },
  &quot;duplicates&quot;: []
}</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/branch-meta.json (Line 24:5 - Line 91:25), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/branch-meta.json (Line 2:5 - Line 25:19)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn172" onclick="toggleCodeBlock('cloneGroup172', 'expandBtn172', 'collapseBtn172')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn172" onclick="toggleCodeBlock('cloneGroup172', 'expandBtn172', 'collapseBtn172')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup172"><code class="language-json text-sm text-gray-800">{
        &quot;BranchName&quot;:  &quot;add-more-logging&quot;,
        &quot;BranchType&quot;:  &quot;other&quot;,
        &quot;LatestHash&quot;:  &quot;51313ae710b2a626a2319ad50e68ef40e65a57f9&quot;,
        &quot;LatestMsg&quot;:  &quot;\u0027Update THE-9-MILLION-DOLLAR-CODE.md\u0027&quot;,
        &quot;MergeBaseHash&quot;:  &quot;58d61158fd957580b7aec2ae7c32678ec00ebcfd&quot;,
        &quot;CommitsSinceBase&quot;:  115,
        &quot;TopAuthors&quot;:  [
                           {
                               &quot;Author&quot;:  &quot;CodeDeficient \u003cuser@example.com\u003e&quot;,
                               &quot;Count&quot;:  87
                           },
                           {
                               &quot;Author&quot;:  &quot;Daniel King \u003c89734689+CodeDeficient@users.noreply.github.com\u003e&quot;,
                               &quot;Count&quot;:  20
                           },
                           {
                               &quot;Author&quot;:  &quot;google-labs-jules[bot] \u003c161369871+google-labs-jules[bot]@users.noreply.github.com\u003e&quot;,
                               &quot;Count&quot;:  8
                           }
                       ]
    },
    {
        &quot;BranchName&quot;:  &quot;add-more-logging&quot;,
        &quot;BranchType&quot;:  &quot;other&quot;,
        &quot;LatestHash&quot;:  &quot;51313ae710b2a626a2319ad50e68ef40e65a57f9&quot;,
        &quot;LatestMsg&quot;:  &quot;\u0027Update THE-9-MILLION-DOLLAR-CODE.md\u0027&quot;,
        &quot;MergeBaseHash&quot;:  &quot;58d61158fd957580b7aec2ae7c32678ec00ebcfd&quot;,
        &quot;CommitsSinceBase&quot;:  115,
        &quot;TopAuthors&quot;:  [
                           {
                               &quot;Author&quot;:  &quot;CodeDeficient \u003cuser@example.com\u003e&quot;,
                               &quot;Count&quot;:  87
                           },
                           {
                               &quot;Author&quot;:  &quot;Daniel King \u003c89734689+CodeDeficient@users.noreply.github.com\u003e&quot;,
                               &quot;Count&quot;:  20
                           },
                           {
                               &quot;Author&quot;:  &quot;google-labs-jules[bot] \u003c161369871+google-labs-jules[bot]@users.noreply.github.com\u003e&quot;,
                               &quot;Count&quot;:  8
                           }
                       ]
    },
    {
        &quot;BranchName&quot;:  &quot;add-more-logging&quot;,
        &quot;BranchType&quot;:  &quot;other&quot;,
        &quot;LatestHash&quot;:  &quot;51313ae710b2a626a2319ad50e68ef40e65a57f9&quot;,
        &quot;LatestMsg&quot;:  &quot;\u0027Update THE-9-MILLION-DOLLAR-CODE.md\u0027&quot;,
        &quot;MergeBaseHash&quot;:  &quot;58d61158fd957580b7aec2ae7c32678ec00ebcfd&quot;,
        &quot;CommitsSinceBase&quot;:  115,
        &quot;TopAuthors&quot;:  [
                           {
                               &quot;Author&quot;:  &quot;CodeDeficient \u003cuser@example.com\u003e&quot;,
                               &quot;Count&quot;:  87
                           },
                           {
                               &quot;Author&quot;:  &quot;Daniel King \u003c89734689+CodeDeficient@users.noreply.github.com\u003e&quot;,
                               &quot;Count&quot;:  20
                           },
                           {
                               &quot;Author&quot;:  &quot;google-labs-jules[bot] \u003c161369871+google-labs-jules[bot]@users.noreply.github.com\u003e&quot;,
                               &quot;Count&quot;:  8
                           }
                       ]
    },
    {
        &quot;BranchName&quot;:  &quot;data-specialist-2-work&quot;</code></pre></div><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/branch-meta.json (Line 435:95 - Line 455:25), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/branch-meta.json (Line 421:45 - Line 441:37)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn173" onclick="toggleCodeBlock('cloneGroup173', 'expandBtn173', 'collapseBtn173')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn173" onclick="toggleCodeBlock('cloneGroup173', 'expandBtn173', 'collapseBtn173')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup173"><code class="language-json text-sm text-gray-800">,
                               &quot;Count&quot;:  1
                           }
                       ]
    },
    {
        &quot;BranchName&quot;:  &quot;fix/type-errors-and-initial-dedupe&quot;,
        &quot;BranchType&quot;:  &quot;hotfix&quot;,
        &quot;LatestHash&quot;:  &quot;181eefe2ddf790e3eba0a930c4141b7a3eff3c15&quot;,
        &quot;LatestMsg&quot;:  &quot;\u0027Fix: Address critical type errors and initial code cleanup\u0027&quot;,
        &quot;MergeBaseHash&quot;:  &quot;63d7232eb0c773321e1314264f8a0f35501ed7fe&quot;,
        &quot;CommitsSinceBase&quot;:  1,
        &quot;TopAuthors&quot;:  [
                           {
                               &quot;Author&quot;:  &quot;google-labs-jules[bot] \u003c161369871+google-labs-jules[bot]@users.noreply.github.com\u003e&quot;,
                               &quot;Count&quot;:  1
                           }
                       ]
    },
    {
        &quot;BranchName&quot;:  &quot;linting-fixes-phase1-3&quot;</code></pre></div><!-- Add more clone groups for .txt format as needed         // Add more clone groups for .txt format as needed--></div><a name="bash-clones"></a><h2 class="text-2xl font-semibold text-gray-700 mb-4">bash</h2><div class="divide-y divide-gray-200 border-b-2"><!-- Add more clone groups for .txt format as needed         // Add more clone groups for .txt format as needed--></div><a name="markup-clones"></a><h2 class="text-2xl font-semibold text-gray-700 mb-4">markup</h2><div class="divide-y divide-gray-200 border-b-2"><!-- Add more clone groups for .txt format as needed         // Add more clone groups for .txt format as needed--></div><a name="powershell-clones"></a><h2 class="text-2xl font-semibold text-gray-700 mb-4">powershell</h2><div class="divide-y divide-gray-200 border-b-2"><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/Test-InvokeGitSafe.ps1 (Line 4:1 - Line 42:2), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/Invoke-GitSafe.ps1 (Line 147:5 - Line 185:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn165" onclick="toggleCodeBlock('cloneGroup165', 'expandBtn165', 'collapseBtn165')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn165" onclick="toggleCodeBlock('cloneGroup165', 'expandBtn165', 'collapseBtn165')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup165"><code class="language-powershell text-sm text-gray-800">Write-Host &quot;Running Invoke-GitSafe verification tests...&quot; -ForegroundColor Green

try {
    # Test 1: Quick command that should succeed
    Write-Host &quot;`nTest 1: Quick git command (rev-parse --short HEAD)&quot; -ForegroundColor Yellow
    $shortHash = Invoke-GitSafe 'rev-parse --short HEAD'
    Write-Host &quot;Success: $shortHash&quot; -ForegroundColor Green
    
    # Test 2: Another quick command
    Write-Host &quot;`nTest 2: Git status check&quot; -ForegroundColor Yellow
    $status = Invoke-GitSafe 'status --porcelain'
    if ($status) {
        Write-Host &quot;Success: Repository has changes&quot; -ForegroundColor Green
    } else {
        Write-Host &quot;Success: Repository is clean&quot; -ForegroundColor Green
    }
    
    # Test 3: Timeout test with a command that should timeout
    Write-Host &quot;`nTest 3: Timeout test (simulated long-running command)&quot; -ForegroundColor Yellow
    try {
        # Use a command that might take longer than 1 second
        # This simulates a long-running git command
        $result = Invoke-GitSafe 'log --all --oneline' -TimeoutSec 1
        Write-Host &quot;Command completed within timeout: $(($result -split &quot;`n&quot;).Count) lines&quot; -ForegroundColor Green
    }
    catch [System.TimeoutException] {
        Write-Host &quot;Timeout test successful: Command properly timed out after 1 second&quot; -ForegroundColor Green
        Write-Host &quot;  Warning should have been displayed above&quot; -ForegroundColor Cyan
    }
    catch {
        Write-Host &quot;Unexpected error in timeout test: $($_.Exception.Message)&quot; -ForegroundColor Red
    }
    
    Write-Host &quot;`nAll verification tests completed!&quot; -ForegroundColor Green
}
catch {
    Write-Host &quot;Verification test failed: $($_.Exception.Message)&quot; -ForegroundColor Red
    exit 1
}</code></pre></div><!-- Add more clone groups for .txt format as needed         // Add more clone groups for .txt format as needed--></div><a name="sql-clones"></a><h2 class="text-2xl font-semibold text-gray-700 mb-4">sql</h2><div class="divide-y divide-gray-200 border-b-2"><div class="py-4"><p class="text-gray-600">C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/fix-advisor-alerts.sql (Line 11:2 - Line 33:99), C:/AI/git-cleanup-temp/food-truck-finder-poc-cleaned/scripts/production-migration.sql (Line 93:2 - Line 115:80)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn96" onclick="toggleCodeBlock('cloneGroup96', 'expandBtn96', 'collapseBtn96')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn96" onclick="toggleCodeBlock('cloneGroup96', 'expandBtn96', 'collapseBtn96')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup96"><code class="language-sql text-sm text-gray-800">AS
SELECT 
  uf.id,
  uf.user_id,
  uf.truck_id,
  uf.created_at,
  uf.updated_at,
  ft.name,
  ft.cuisine_type,
  ft.current_location,
  ft.contact_info,
  ft.verification_status,
  ft.data_quality_score,
  ft.average_rating,
  ft.review_count
FROM user_favorites uf
JOIN food_trucks ft ON uf.truck_id = ft.id;

-- Grant access to authenticated users
GRANT SELECT ON favorite_trucks TO authenticated;

-- Add comment on the view
COMMENT ON VIEW favorite_trucks IS 'View that combines user favorites with food truck details for easier querying (security_invoker)'</code></pre></div><!-- Add more clone groups for .txt format as needed         // Add more clone groups for .txt format as needed--></div><a name="yaml-clones"></a><h2 class="text-2xl font-semibold text-gray-700 mb-4">yaml</h2><div class="divide-y divide-gray-200 border-b-2"><!-- Add more clone groups for .txt format as needed         // Add more clone groups for .txt format as needed--></div><a name="markdown-clones"></a><h2 class="text-2xl font-semibold text-gray-700 mb-4">markdown</h2><div class="divide-y divide-gray-200 border-b-2"><!-- Add more clone groups for .txt format as needed         // Add more clone groups for .txt format as needed--></div></section><!-- Add more sections for other formats and clone groups as needed--></main><footer class="bg-white shadow mt-8 py-4"><div class="container mx-auto px-4 text-center"><p class="text-sm text-gray-600">This report is generated by jscpd, an open-source copy/paste detector.</p><p class="text-sm text-gray-600">jscpd is licensed under the MIT License.</p><a class="text-blue-500 text-sm" href="https://github.com/kucherenko/jscpd" target="_blank" rel="noopener noreferrer">View jscpd on GitHub</a></div></footer><script src="js/prism.js"></script><script>function toggleCodeBlock(codeBlockId, expandBtnId, collapseBtnId) {
  const codeBlock = document.getElementById(codeBlockId);
  const expandBtn = document.getElementById(expandBtnId);
  const collapseBtn = document.getElementById(collapseBtnId);

  codeBlock.classList.toggle('hidden');
  expandBtn.classList.toggle('hidden');
  collapseBtn.classList.toggle('hidden');
}</script></body></html>